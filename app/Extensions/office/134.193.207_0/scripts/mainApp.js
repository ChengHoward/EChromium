/*
 RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/domReady for details

 lodash 4.5.1 (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 Build: `lodash -o ./dist/lodash.js`
 MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors */
define("third_party/domready/domReady",[],function(){function c(){if(!q){q=!0;g&&clearInterval(g);var a=e;if(q&&a.length){e=[];var c;for(c=0;c<a.length;c+=1)a[c](v)}}}function l(a){q?a(v):e.push(a);return l}var k,a,g,h="undefined"!==typeof window&&window.document,q=!h,v=h?document:null,e=[];if(h){if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(window.attachEvent){window.attachEvent("onload",c);a=document.createElement("div");
try{k=null===window.frameElement}catch(n){}a.doScroll&&k&&window.external&&(g=setInterval(function(){try{a.doScroll(),c()}catch(e){}},30))}"complete"===document.readyState&&c()}l.version="2.0.1";l.load=function(a,c,e,g){g.isBuild?e(null):l(e)};return l});
(function(){function c(c){var k=null;if(this.id===c)return this;if(this.hasChildNodes())for(var a=0,g=this.childNodes.length;a<g&&(this.childNodes[a].nodeType!==Node.ELEMENT_NODE||!(k=this.childNodes[a].getElementById(c))||k.id!==c);a++);return k}Element.prototype.clear=function(){if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);return this};Element.prototype.removeElm=function(){return this.parentNode?(this.parentNode.removeChild(this),this):null};Function.prototype.bake=
function(c){var k=this,a=[].slice.call(arguments,1);return function(){return k.apply(c,a.concat([].slice.call(arguments,0)))}};Element.prototype.getElementById=c;DocumentFragment.prototype.getElementById=c})();define("qowtRoot/lib/framework/framework",function(){});
(function(){var c,l=l||{},k=this,a=function(b){return void 0!==b},g=function(){},h=function(b){var m=typeof b;if("object"==m)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return m;var w=Object.prototype.toString.call(b);if("[object Window]"==w)return"object";if("[object Array]"==w||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==w||"undefined"!=typeof b.call&&
"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==m&&"undefined"==typeof b.call)return"object";return m},q=function(b){return"array"==h(b)},v=function(b){var m=h(b);return"array"==m||"object"==m&&"number"==typeof b.length},e=function(b){return"string"==typeof b},n=function(b){return"number"==typeof b},y=function(b){return"function"==h(b)},x=function(b){var m=typeof b;return"object"==m&&null!=b||"function"==m},O=function(b,
m,w){return b.call.apply(b.bind,arguments)},F=function(b,m,w){if(!b)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var w=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(w,a);return b.apply(m,w)}}return function(){return b.apply(m,arguments)}},z=function(b,m,w){z=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?O:F;return z.apply(null,arguments)},A=function(b,m){var w=Array.prototype.slice.call(arguments,
1);return function(){var m=w.slice();m.push.apply(m,arguments);return b.apply(this,m)}},D=Date.now||function(){return+new Date},u=function(b,m){var w=b.split("."),d=k;w[0]in d||!d.execScript||d.execScript("var "+w[0]);for(var c;w.length&&(c=w.shift());)!w.length&&a(m)?d[c]=m:d=d[c]?d[c]:d[c]={}},G=function(b,m){function w(){}w.prototype=m.prototype;b.K=m.prototype;b.prototype=new w;b.Qc=function(b,w,a){return m.prototype[w].apply(b,Array.prototype.slice.call(arguments,2))}};Function.prototype.bind=
Function.prototype.bind||function(b,m){if(1<arguments.length){var w=Array.prototype.slice.call(arguments,1);w.unshift(this,b);return z.apply(null,w)}return z(this,b)};var R=function(b){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var m=Error().stack;m&&(this.stack=m)}b&&(this.message=String(b))};G(R,Error);R.prototype.name="CustomError";var ba=String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},ca=function(b,m){return b<
m?-1:b>m?1:0},E=Array.prototype,ta=E.indexOf?function(b,m,w){return E.indexOf.call(b,m,w)}:function(b,m,w){w=null==w?0:0>w?Math.max(0,b.length+w):w;if(e(b))return e(m)&&1==m.length?b.indexOf(m,w):-1;for(;w<b.length;w++)if(w in b&&b[w]===m)return w;return-1},r=E.forEach?function(b,m,w){E.forEach.call(b,m,w)}:function(b,m,w){for(var a=b.length,d=e(b)?b.split(""):b,c=0;c<a;c++)c in d&&m.call(w,d[c],c,b)},U=E.some?function(b,m,w){return E.some.call(b,m,w)}:function(b,m,w){for(var a=b.length,d=e(b)?b.split(""):
b,c=0;c<a;c++)if(c in d&&m.call(w,d[c],c,b))return!0;return!1},X=E.every?function(b,m,w){return E.every.call(b,m,w)}:function(b,m,w){for(var a=b.length,d=e(b)?b.split(""):b,c=0;c<a;c++)if(c in d&&!m.call(w,d[c],c,b))return!1;return!0},I=function(b){var m;a:{m=Pd;for(var w=b.length,a=e(b)?b.split(""):b,d=0;d<w;d++)if(d in a&&m.call(void 0,a[d],d,b)){m=d;break a}m=-1}return 0>m?null:e(b)?b.charAt(m):b[m]},kb=function(b,m){var w=ta(b,m),a;(a=0<=w)&&E.splice.call(b,w,1);return a},Bc=function(b){return E.concat.apply(E,
arguments)},Cc=function(b,m,w){return 2>=arguments.length?E.slice.call(b,m):E.slice.call(b,m,w)},Dc="StopIteration"in k?k.StopIteration:Error("StopIteration"),Kb=function(){};Kb.prototype.next=function(){throw Dc;};Kb.prototype.wc=function(){return this};var cb=function(b,m,w){for(var a in b)m.call(w,b[a],a,b)},Ba=function(b){var m=[],w=0,a;for(a in b)m[w++]=b[a];return m},Lb=function(b){var m=[],w=0,a;for(a in b)m[w++]=a;return m},dc=function(b,m){var w;a:{for(w in b)if(m.call(void 0,b[w],w,b))break a;
w=void 0}return w&&b[w]},Ga="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),wb=function(b,m){for(var w,a,d=1;d<arguments.length;d++){a=arguments[d];for(w in a)b[w]=a[w];for(var c=0;c<Ga.length;c++)w=Ga[c],Object.prototype.hasOwnProperty.call(a,w)&&(b[w]=a[w])}},ga=function(b,m){this.q={};this.b=[];this.ra=this.j=0;var w=arguments.length;if(1<w){if(w%2)throw Error("Uneven number of arguments");for(var a=0;a<w;a+=2)this.set(arguments[a],arguments[a+
1])}else b&&this.la(b)};ga.prototype.w=function(){xb(this);for(var b=[],m=0;m<this.b.length;m++)b.push(this.q[this.b[m]]);return b};ga.prototype.H=function(){xb(this);return this.b.concat()};ga.prototype.R=function(b){return db(this.q,b)};ga.prototype.remove=function(b){return db(this.q,b)?(delete this.q[b],this.j--,this.ra++,this.b.length>2*this.j&&xb(this),!0):!1};var xb=function(b){if(b.j!=b.b.length){for(var m=0,a=0;m<b.b.length;){var d=b.b[m];db(b.q,d)&&(b.b[a++]=d);m++}b.b.length=a}if(b.j!=
b.b.length){for(var c={},a=m=0;m<b.b.length;)d=b.b[m],db(c,d)||(b.b[a++]=d,c[d]=1),m++;b.b.length=a}};c=ga.prototype;c.get=function(b,m){return db(this.q,b)?this.q[b]:m};c.set=function(b,m){db(this.q,b)||(this.j++,this.b.push(b),this.ra++);this.q[b]=m};c.la=function(b){var m;b instanceof ga?(m=b.H(),b=b.w()):(m=Lb(b),b=Ba(b));for(var a=0;a<m.length;a++)this.set(m[a],b[a])};c.forEach=function(b,m){for(var a=this.H(),d=0;d<a.length;d++){var c=a[d],e=this.get(c);b.call(m,e,c,this)}};c.clone=function(){return new ga(this)};
c.Lb=function(){xb(this);for(var b={},m=0;m<this.b.length;m++){var a=this.b[m];b[a]=this.q[a]}return b};c.wc=function(b){xb(this);var m=0,a=this.b,d=this.q,c=this.ra,e=this,g=new Kb;g.next=function(){for(;;){if(c!=e.ra)throw Error("The map has changed since the iterator was created");if(m>=a.length)throw Dc;var g=a[m++];return b?g:d[g]}};return g};var db=function(b,m){return Object.prototype.hasOwnProperty.call(b,m)},p,lb,yb={id:"hitType",name:"t",valueType:"text",maxLength:void 0,defaultValue:void 0},
Ec={id:"sessionControl",name:"sc",valueType:"text",maxLength:void 0,defaultValue:void 0},ec={id:"description",name:"cd",valueType:"text",maxLength:2048,defaultValue:void 0},Fc={id:"eventCategory",name:"ec",valueType:"text",maxLength:150,defaultValue:void 0},Mb={id:"eventAction",name:"ea",valueType:"text",maxLength:500,defaultValue:void 0},mb={id:"eventLabel",name:"el",valueType:"text",maxLength:500,defaultValue:void 0},Nb={id:"eventValue",name:"ev",valueType:"integer",maxLength:void 0,defaultValue:void 0},
Gc={qd:yb,Rc:{id:"anonymizeIp",name:"aip",valueType:"boolean",maxLength:void 0,defaultValue:void 0},Bd:{id:"queueTime",name:"qt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Xc:{id:"cacheBuster",name:"z",valueType:"text",maxLength:void 0,defaultValue:void 0},Hd:Ec,Id:{id:"sessionGroup",name:"sg",valueType:"text",maxLength:void 0,defaultValue:void 0},Yd:{id:"userId",name:"uid",valueType:"text",maxLength:void 0,defaultValue:void 0},yd:{id:"nonInteraction",name:"ni",valueType:"boolean",
maxLength:void 0,defaultValue:void 0},gd:ec,Rd:{id:"title",name:"dt",valueType:"text",maxLength:1500,defaultValue:void 0},Tc:{id:"appId",name:"aid",valueType:"text",maxLength:150,defaultValue:void 0},Uc:{id:"appInstallerId",name:"aiid",valueType:"text",maxLength:150,defaultValue:void 0},kd:Fc,jd:Mb,ld:mb,md:Nb,Kd:{id:"socialNetwork",name:"sn",valueType:"text",maxLength:50,defaultValue:void 0},Jd:{id:"socialAction",name:"sa",valueType:"text",maxLength:50,defaultValue:void 0},Ld:{id:"socialTarget",
name:"st",valueType:"text",maxLength:2048,defaultValue:void 0},Ud:{id:"transactionId",name:"ti",valueType:"text",maxLength:500,defaultValue:void 0},Td:{id:"transactionAffiliation",name:"ta",valueType:"text",maxLength:500,defaultValue:void 0},Vd:{id:"transactionRevenue",name:"tr",valueType:"currency",maxLength:void 0,defaultValue:void 0},Wd:{id:"transactionShipping",name:"ts",valueType:"currency",maxLength:void 0,defaultValue:void 0},Xd:{id:"transactionTax",name:"tt",valueType:"currency",maxLength:void 0,
defaultValue:void 0},ed:{id:"currencyCode",name:"cu",valueType:"text",maxLength:10,defaultValue:void 0},ud:{id:"itemPrice",name:"ip",valueType:"currency",maxLength:void 0,defaultValue:void 0},vd:{id:"itemQuantity",name:"iq",valueType:"integer",maxLength:void 0,defaultValue:void 0},sd:{id:"itemCode",name:"ic",valueType:"text",maxLength:500,defaultValue:void 0},td:{id:"itemName",name:"in",valueType:"text",maxLength:500,defaultValue:void 0},rd:{id:"itemCategory",name:"iv",valueType:"text",maxLength:500,
defaultValue:void 0},cd:{id:"campaignSource",name:"cs",valueType:"text",maxLength:100,defaultValue:void 0},ad:{id:"campaignMedium",name:"cm",valueType:"text",maxLength:50,defaultValue:void 0},bd:{id:"campaignName",name:"cn",valueType:"text",maxLength:100,defaultValue:void 0},$c:{id:"campaignKeyword",name:"ck",valueType:"text",maxLength:500,defaultValue:void 0},Yc:{id:"campaignContent",name:"cc",valueType:"text",maxLength:500,defaultValue:void 0},Zc:{id:"campaignId",name:"ci",valueType:"text",maxLength:100,
defaultValue:void 0},pd:{id:"gclid",name:"gclid",valueType:"text",maxLength:void 0,defaultValue:void 0},fd:{id:"dclid",name:"dclid",valueType:"text",maxLength:void 0,defaultValue:void 0},Ad:{id:"pageLoadTime",name:"plt",valueType:"integer",maxLength:void 0,defaultValue:void 0},hd:{id:"dnsTime",name:"dns",valueType:"integer",maxLength:void 0,defaultValue:void 0},Md:{id:"tcpConnectTime",name:"tcp",valueType:"integer",maxLength:void 0,defaultValue:void 0},Gd:{id:"serverResponseTime",name:"srt",valueType:"integer",
maxLength:void 0,defaultValue:void 0},zd:{id:"pageDownloadTime",name:"pdt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Cd:{id:"redirectResponseTime",name:"rrt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Nd:{id:"timingCategory",name:"utc",valueType:"text",maxLength:150,defaultValue:void 0},Qd:{id:"timingVar",name:"utv",valueType:"text",maxLength:500,defaultValue:void 0},Pd:{id:"timingValue",name:"utt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Od:{id:"timingLabel",
name:"utl",valueType:"text",maxLength:500,defaultValue:void 0},nd:{id:"exDescription",name:"exd",valueType:"text",maxLength:150,defaultValue:void 0},od:{id:"exFatal",name:"exf",valueType:"boolean",maxLength:void 0,defaultValue:"1"}},Hc=function(b){if(1>b||200<b)throw Error("Expected dimension index range 1-200, but was : "+b);return{id:"dimension"+b,name:"cd"+b,valueType:"text",maxLength:150,defaultValue:void 0}},Ic=function(b){if(1>b||200<b)throw Error("Expected metric index range 1-200, but was : "+
b);return{id:"metric"+b,name:"cm"+b,valueType:"integer",maxLength:void 0,defaultValue:void 0}},Jc=function(b){if(1>b)return"0";if(3>b)return"1-2";b=Math.floor(Math.log(b-1)/Math.log(2));return Math.pow(2,b)+1+"-"+Math.pow(2,b+1)},fd=function(b,m){for(var a=0,d=b.length-1,c=0;a<=d;){var e=Math.floor((a+d)/2),c=b[e];if(m<=c){d=0==e?0:b[e-1];if(m>d)return(d+1).toString()+"-"+c.toString();d=e-1}else if(m>c){if(e>=b.length-1)return(b[b.length-1]+1).toString()+"+";a=e+1}}return"<= 0"},Qa=function(){this.bb=
[]},Ha=function(){return new Qa};c=Qa.prototype;c.when=function(b){this.bb.push(b);return this};c.Ab=function(b){var m=arguments;this.when(function(b){return 0<=ta(m,b.Ib())});return this};c.Pc=function(b,m){var a=Cc(arguments,1);this.when(function(m){m=m.W().get(b);return 0<=ta(a,m)});return this};c.zb=function(b,m){if(x(this.g))throw Error("Filter has already been set.");this.g=x(m)?z(b,m):b;return this};c.Da=function(){if(0==this.bb.length)throw Error("Must specify at least one predicate using #when or a helper method.");
if(!x(this.g))throw Error("Must specify a delegate filter using #applyFilter.");return z(function(b){X(this.bb,function(m){return m(b)})&&this.g(b)},this)};var la=function(){this.Cb=!1;this.Db="";this.sb=!1;this.Aa=null};la.prototype.xc=function(b){this.Cb=!0;this.Db=b||" - ";return this};la.prototype.Oc=function(){this.sb=!0;return this};la.prototype.Fc=function(){return Ca(this,Jc)};la.prototype.Gc=function(b){return Ca(this,A(fd,b))};var Ca=function(b,m){if(null!=b.Aa)throw Error("LabelerBuilder: Only one labeling strategy may be used.");
b.Aa=z(function(b){var a=b.W().get(Nb),d=b.W().get(mb);n(a)&&(a=m(a),null!=d&&this.Cb&&(a=d+this.Db+a),b.W().set(mb,a))},b);return b};la.prototype.Da=function(){if(null==this.Aa)throw Error("LabelerBuilder: a labeling strategy must be specified prior to calling build().");return Ha().Ab("event").zb(z(function(b){this.Aa(b);this.sb&&b.W().remove(Nb)},this)).Da()};var fc=function(b,m){var a=Array.prototype.slice.call(arguments),d=a.shift();if("undefined"==typeof d)throw Error("[goog.string.format] Template required");
return d.replace(/%([0\-\ \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(b,m,d,c,e,g,h,l){if("%"==g)return"%";var k=a.shift();if("undefined"==typeof k)throw Error("[goog.string.format] Not enough arguments");arguments[0]=k;return Ra[g].apply(null,arguments)})},Ra={s:function(b,m,a){return isNaN(a)||""==a||b.length>=a?b:-1<m.indexOf("-",0)?b+Array(a-b.length+1).join(" "):Array(a-b.length+1).join(" ")+b},f:function(b,m,a,d,c){d=b.toString();isNaN(c)||""==c||(d=b.toFixed(c));var e;e=0>b?"-":0<=m.indexOf("+")?
"+":0<=m.indexOf(" ")?" ":"";0<=b&&(d=e+d);if(isNaN(a)||d.length>=a)return d;d=isNaN(c)?Math.abs(b).toString():Math.abs(b).toFixed(c);b=a-d.length-e.length;return 0<=m.indexOf("-",0)?e+d+Array(b+1).join(" "):e+Array(b+1).join(0<=m.indexOf("0",0)?"0":" ")+d},d:function(b,m,a,d,c,e,g,h){return Ra.f(parseInt(b,10),m,a,d,0,e,g,h)}};Ra.i=Ra.d;Ra.u=Ra.d;var gd=function(b){if("function"==typeof b.w)return b.w();if(e(b))return b.split("");if(v(b)){for(var m=[],a=b.length,d=0;d<a;d++)m.push(b[d]);return m}return Ba(b)},
hd=function(b,m){if("function"==typeof b.forEach)b.forEach(m,void 0);else if(v(b)||e(b))r(b,m,void 0);else{var a;if("function"==typeof b.H)a=b.H();else if("function"!=typeof b.w)if(v(b)||e(b)){a=[];for(var d=b.length,c=0;c<d;c++)a.push(c)}else a=Lb(b);else a=void 0;for(var d=gd(b),c=d.length,g=0;g<c;g++)m.call(void 0,d[g],a&&a[g],b)}},V=function(b){this.F=new ga;if(0<arguments.length%2)throw Error("Uneven number of arguments to ParameterMap constructor.");for(var m=arguments,a=0;a<m.length;a+=2)this.set(m[a],
m[a+1])};V.prototype.set=function(b,m){if(null==m)throw Error("undefined-or-null value for key: "+b.name);this.F.set(b.name,{key:b,value:m})};V.prototype.remove=function(b){this.F.remove(b.name)};V.prototype.get=function(b){b=this.F.get(b.name,null);return null===b?null:b.value};V.prototype.la=function(b){this.F.la(b.F)};var nb=function(b,m){r(b.F.w(),function(b){m(b.key,b.value)})};V.prototype.Lb=function(){var b={};nb(this,function(m,a){b[m.id]=a});return b};V.prototype.clone=function(){var b=new V;
b.F=this.F.clone();return b};V.prototype.toString=function(){var b={};nb(this,function(m,a){b[m.id]=a});return JSON.stringify(b)};var aa=function(b){this.g=b};c=aa.prototype;c.yc=function(b){var m=new aa(z(this.Q,this));m.I=Fc;m.M=b;return m};c.action=function(b){var m=new aa(z(this.Q,this));m.I=Mb;m.M=b;return m};c.label=function(b){var m=new aa(z(this.Q,this));m.I=mb;m.M=b;return m};c.value=function(b){var m=new aa(z(this.Q,this));m.I=Nb;m.M=b;return m};c.zc=function(b){var m=new aa(z(this.Q,this));
m.I=Hc(b.index);m.M=b.value;return m};c.Ec=function(b){var m=new aa(z(this.Q,this));m.I=Ic(b.index);m.M=b.value;return m};c.send=function(b){var m=new V;this.Q(m);return b.send("event",m)};c.Q=function(b){null!=this.I&&null!=this.M&&!b.F.R(this.I.name)&&b.set(this.I,this.M);x(this.g)&&this.g(b)};var id=new aa(g),T=function(){this.ba=this.ba;this.Ea=this.Ea};T.prototype.ba=!1;T.prototype.$=function(){this.ba||(this.ba=!0,this.l())};T.prototype.l=function(){if(this.Ea)for(;this.Ea.length;)this.Ea.shift()()};
var Ia=function(b,m){this.type=b;this.currentTarget=this.target=m;this.defaultPrevented=this.X=!1;this.nb=!0};Ia.prototype.l=function(){};Ia.prototype.$=function(){};Ia.prototype.preventDefault=function(){this.defaultPrevented=!0;this.nb=!1};var zb=function(b){zb[" "](b);return b};zb[" "]=g;var ia;a:{var Ob=k.navigator;if(Ob){var ua=Ob.userAgent;if(ua){ia=ua;break a}}ia=""}var va=function(b){return-1!=ia.indexOf(b)},wa=va("Opera")||va("OPR"),M=va("Trident")||va("MSIE"),xa=va("Gecko")&&-1==ia.toLowerCase().indexOf("webkit")&&
!(va("Trident")||va("MSIE")),Da=-1!=ia.toLowerCase().indexOf("webkit"),Pb=function(){var b=k.document;return b?b.documentMode:void 0},Qb=function(){var b="",m;if(wa&&k.opera)return b=k.opera.version,y(b)?b():b;xa?m=/rv\:([^\);]+)(\)|;)/:M?m=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Da&&(m=/WebKit\/(\S+)/);m&&(b=(b=m.exec(ia))?b[1]:"");return M&&(m=Pb(),m>parseFloat(b))?String(m):b}(),N={},H=function(b){var m;if(!(m=N[b])){m=0;for(var a=ba(String(Qb)).split("."),d=ba(String(b)).split("."),c=Math.max(a.length,
d.length),e=0;0==m&&e<c;e++){var g=a[e]||"",h=d[e]||"",l=/(\d*)(\D*)/g,k=/(\d*)(\D*)/g;do{var r=l.exec(g)||["","",""],n=k.exec(h)||["","",""];if(0==r[0].length&&0==n[0].length)break;m=ca(0==r[1].length?0:parseInt(r[1],10),0==n[1].length?0:parseInt(n[1],10))||ca(0==r[2].length,0==n[2].length)||ca(r[2],n[2])}while(0==m)}m=N[b]=0<=m}return m},P=k.document,Ja=P&&M?Pb()||("CSS1Compat"==P.compatMode?parseInt(Qb,10):5):void 0,gc=!M||M&&9<=Ja,jd=M&&!H("9"),da=!Da||H("528"),kd=xa&&H("1.9b")||M&&H("8")||wa&&
H("9.5")||Da&&H("528"),qe=xa&&!H("8")||M&&!H("9"),Rb=function(b,m){Ia.call(this,b?b.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.Fb=this.state=null;if(b){var a=this.type=b.type;this.target=b.target||b.srcElement;this.currentTarget=m;var d=b.relatedTarget;if(d){if(xa){var c;a:{try{zb(d.nodeName);c=!0;break a}catch(e){}c=
!1}c||(d=null)}}else"mouseover"==a?d=b.fromElement:"mouseout"==a&&(d=b.toElement);this.relatedTarget=d;this.offsetX=Da||void 0!==b.offsetX?b.offsetX:b.layerX;this.offsetY=Da||void 0!==b.offsetY?b.offsetY:b.layerY;this.clientX=void 0!==b.clientX?b.clientX:b.pageX;this.clientY=void 0!==b.clientY?b.clientY:b.pageY;this.screenX=b.screenX||0;this.screenY=b.screenY||0;this.button=b.button;this.keyCode=b.keyCode||0;this.charCode=b.charCode||("keypress"==a?b.keyCode:0);this.ctrlKey=b.ctrlKey;this.altKey=
b.altKey;this.shiftKey=b.shiftKey;this.metaKey=b.metaKey;this.state=b.state;this.Fb=b;b.defaultPrevented&&this.preventDefault()}};G(Rb,Ia);Rb.prototype.preventDefault=function(){Rb.K.preventDefault.call(this);var b=this.Fb;if(b.preventDefault)b.preventDefault();else if(b.returnValue=!1,jd)try{if(b.ctrlKey||112<=b.keyCode&&123>=b.keyCode)b.keyCode=-1}catch(m){}};Rb.prototype.l=function(){};var eb="closure_listenable_"+(1E6*Math.random()|0),qa=function(b){return!(!b||!b[eb])},Qd=0,ld=function(b,m,a,
d,c){this.O=b;this.proxy=null;this.src=m;this.type=a;this.sa=!!d;this.va=c;this.key=++Qd;this.removed=this.ta=!1},Ka=function(b){b.removed=!0;b.O=null;b.proxy=null;b.src=null;b.va=null},ra=function(b){this.src=b;this.k={};this.ca=0};ra.prototype.add=function(b,m,a,d,c){var e=b.toString();(b=this.k[e])||(b=this.k[e]=[],this.ca++);var g=Sa(b,m,d,c);-1<g?(m=b[g],a||(m.ta=!1)):(m=new ld(m,this.src,e,!!d,c),m.ta=a,b.push(m));return m};ra.prototype.remove=function(b,m,a,d){b=b.toString();if(!(b in this.k))return!1;
var c=this.k[b];m=Sa(c,m,a,d);return-1<m?(Ka(c[m]),E.splice.call(c,m,1),0==c.length&&(delete this.k[b],this.ca--),!0):!1};var Ea=function(b,m){var a=m.type;if(!(a in b.k))return!1;var d=kb(b.k[a],m);d&&(Ka(m),0==b.k[a].length&&(delete b.k[a],b.ca--));return d};ra.prototype.removeAll=function(b){b=b&&b.toString();var m=0,a;for(a in this.k)if(!b||a==b){for(var d=this.k[a],c=0;c<d.length;c++)++m,Ka(d[c]);delete this.k[a];this.ca--}return m};ra.prototype.aa=function(b,m,a,d){b=this.k[b.toString()];var c=
-1;b&&(c=Sa(b,m,a,d));return-1<c?b[c]:null};var Sa=function(b,m,a,d){for(var c=0;c<b.length;++c){var e=b[c];if(!e.removed&&e.O==m&&e.sa==!!a&&e.va==d)return c}return-1},re="closure_lm_"+(1E6*Math.random()|0),d={},Ne=0,ja=function(b,m,a,d,c){if(q(m)){for(var e=0;e<m.length;e++)ja(b,m[e],a,d,c);return null}a=hc(a);return qa(b)?b.listen(m,a,d,c):J(b,m,a,!1,d,c)},J=function(b,m,a,d,c,e){if(!m)throw Error("Invalid event type");var g=!!c,h=Sb(b);h||(b[re]=h=new ra(b));a=h.add(m,a,d,c,e);if(a.proxy)return a;
d=vf();a.proxy=d;d.src=b;d.O=a;b.addEventListener?b.addEventListener(m.toString(),d,g):b.attachEvent(Ta(m.toString()),d);Ne++;return a},vf=function(){var b=wf,m=gc?function(a){return b.call(m.src,m.O,a)}:function(a){a=b.call(m.src,m.O,a);if(!a)return a};return m},Oe=function(b,m,a,d,c){if(q(m)){for(var e=0;e<m.length;e++)Oe(b,m[e],a,d,c);return null}a=hc(a);return qa(b)?b.cb(m,a,d,c):J(b,m,a,!0,d,c)},Pe=function(b,m,a,d,c){if(q(m))for(var e=0;e<m.length;e++)Pe(b,m[e],a,d,c);else a=hc(a),qa(b)?b.Wa(m,
a,d,c):b&&(b=Sb(b))&&(m=b.aa(m,a,!!d,c))&&md(m)},md=function(b){if(n(b)||!b||b.removed)return!1;var m=b.src;if(qa(m))return Ea(m.D,b);var a=b.type,d=b.proxy;m.removeEventListener?m.removeEventListener(a,d,b.sa):m.detachEvent&&m.detachEvent(Ta(a),d);Ne--;(a=Sb(m))?(Ea(a,b),0==a.ca&&(a.src=null,m[re]=null)):Ka(b);return!0},Ta=function(b){return b in d?d[b]:d[b]="on"+b},Re=function(b,m,a,d){var c=1;if(b=Sb(b))if(m=b.k[m.toString()])for(m=m.concat(),b=0;b<m.length;b++){var e=m[b];e&&e.sa==a&&!e.removed&&
(c&=!1!==Qe(e,d))}return Boolean(c)},Qe=function(b,m){var a=b.O,d=b.va||b.src;b.ta&&md(b);return a.call(d,m)},wf=function(b,m){if(b.removed)return!0;if(!gc){var a;if(!(a=m))a:{a=["window","event"];for(var d=k,c;c=a.shift();)if(null!=d[c])d=d[c];else{a=null;break a}a=d}c=a;a=new Rb(c,this);d=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var e=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==c.returnValue)c.returnValue=!0}c=[];for(e=a.currentTarget;e;e=e.parentNode)c.push(e);
for(var e=b.type,h=c.length-1;!a.X&&0<=h;h--)a.currentTarget=c[h],d&=Re(c[h],e,!0,a);for(h=0;!a.X&&h<c.length;h++)a.currentTarget=c[h],d&=Re(c[h],e,!1,a)}return d}return Qe(b,new Rb(m,this))},Sb=function(b){b=b[re];return b instanceof ra?b:null},ic="__closure_events_fn_"+(1E9*Math.random()>>>0),hc=function(b){if(y(b))return b;b[ic]||(b[ic]=function(m){return b.handleEvent(m)});return b[ic]},Z=function(){T.call(this);this.D=new ra(this);this.mc=this;this.Ra=null};G(Z,T);Z.prototype[eb]=!0;c=Z.prototype;
c.addEventListener=function(b,m,a,d){ja(this,b,m,a,d)};c.removeEventListener=function(b,m,a,d){Pe(this,b,m,a,d)};c.dispatchEvent=function(b){var m,a=this.Ra;if(a){m=[];for(var d=1;a;a=a.Ra)m.push(a),++d}a=this.mc;d=b.type||b;if(e(b))b=new Ia(b,a);else if(b instanceof Ia)b.target=b.target||a;else{var c=b;b=new Ia(d,a);wb(b,c)}var c=!0,g;if(m)for(var h=m.length-1;!b.X&&0<=h;h--)g=b.currentTarget=m[h],c=Kc(g,d,!0,b)&&c;b.X||(g=b.currentTarget=a,c=Kc(g,d,!0,b)&&c,b.X||(c=Kc(g,d,!1,b)&&c));if(m)for(h=
0;!b.X&&h<m.length;h++)g=b.currentTarget=m[h],c=Kc(g,d,!1,b)&&c;return c};c.l=function(){Z.K.l.call(this);this.D&&this.D.removeAll(void 0);this.Ra=null};c.listen=function(b,a,d,c){return this.D.add(String(b),a,!1,d,c)};c.cb=function(b,a,d,c){return this.D.add(String(b),a,!0,d,c)};c.Wa=function(b,a,d,c){return this.D.remove(String(b),a,d,c)};var Kc=function(b,a,d,c){a=b.D.k[String(a)];if(!a)return!0;a=a.concat();for(var e=!0,g=0;g<a.length;++g){var h=a[g];if(h&&!h.removed&&h.sa==d){var l=h.O,k=h.va||
h.src;h.ta&&Ea(b.D,h);e=!1!==l.call(k,c)&&e}}return e&&0!=c.nb};Z.prototype.aa=function(b,a,d,c){return this.D.aa(String(b),a,d,c)};var nd=function(b){k.setTimeout(function(){throw b;},0)},jc,od=function(){var b=k.MessageChannel;"undefined"===typeof b&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&(b=function(){var b=document.createElement("iframe");b.style.display="none";b.src="";document.documentElement.appendChild(b);var a=b.contentWindow,b=a.document;b.open();b.write("");
b.close();var m="callImmediate"+Math.random(),d="file:"==a.location.protocol?"*":a.location.protocol+"//"+a.location.host,b=z(function(b){if(("*"==d||b.origin==d)&&b.data==m)this.port1.onmessage()},this);a.addEventListener("message",b,!1);this.port1={};this.port2={postMessage:function(){a.postMessage(m,d)}}});if("undefined"!==typeof b&&!va("Trident")&&!va("MSIE")){var m=new b,d={},c=d;m.port1.onmessage=function(){if(a(d.next)){d=d.next;var b=d.Hb;d.Hb=null;b()}};return function(b){c.next={Hb:b};c=
c.next;m.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(b){var a=document.createElement("script");a.onreadystatechange=function(){a.onreadystatechange=null;a.parentNode.removeChild(a);a=null;b();b=null};document.documentElement.appendChild(a)}:function(b){k.setTimeout(b,0)}},Va=function(b,a){Ua||Tb();ya||(Ua(),ya=!0);Lc.push(new Rd(b,a))},Ua,Tb=function(){if(k.Promise&&k.Promise.resolve){var b=k.Promise.resolve();Ua=function(){b.then(Ab)}}else Ua=
function(){var b=Ab;!y(k.setImmediate)||k.Window&&k.Window.prototype.setImmediate==k.setImmediate?(jc||(jc=od()),jc(b)):k.setImmediate(b)}},ya=!1,Lc=[],Ab=function(){for(;Lc.length;){var b=Lc;Lc=[];for(var a=0;a<b.length;a++){var d=b[a];try{d.Ac.call(d.scope)}catch(c){nd(c)}}}ya=!1},Rd=function(b,a){this.Ac=b;this.scope=a},ob=function(b){b.prototype.then=b.prototype.then;b.prototype.$goog_Thenable=!0},Sd=function(b){if(!b)return!1;try{return!!b.$goog_Thenable}catch(a){return!1}},fb=function(b,a){this.n=
0;this.B=void 0;this.o=this.p=null;this.wa=this.Ma=!1;try{var d=this;b.call(a,function(b){pb(d,2,b)},function(b){pb(d,3,b)})}catch(c){pb(this,3,c)}};fb.prototype.then=function(b,a,d){return La(this,y(b)?b:null,y(a)?a:null,d)};ob(fb);fb.prototype.cancel=function(b){0==this.n&&Va(function(){var a=new Bb(b);S(this,a)},this)};var S=function(b,a){if(0==b.n)if(b.p){var d=b.p;if(d.o){for(var c=0,e=-1,g=0,h;h=d.o[g];g++)if(h=h.xa)if(c++,h==b&&(e=g),0<=e&&1<c)break;0<=e&&(0==d.n&&1==c?S(d,a):(c=d.o.splice(e,
1)[0],Mc(d),c.Oa(a)))}}else pb(b,3,a)},xf=function(b,a){b.o&&b.o.length||2!=b.n&&3!=b.n||b.Ma||(b.Ma=!0,Va(b.vc,b));b.o||(b.o=[]);b.o.push(a)},La=function(b,m,d,c){var e={xa:null,kb:null,Oa:null};e.xa=new fb(function(b,g){e.kb=m?function(a){try{var d=m.call(c,a);b(d)}catch(e){g(e)}}:b;e.Oa=d?function(m){try{var e=d.call(c,m);!a(e)&&m instanceof Bb?g(m):b(e)}catch(h){g(h)}}:g});e.xa.p=b;xf(b,e);return e.xa};fb.prototype.xb=function(b){this.n=0;pb(this,2,b)};fb.prototype.yb=function(b){this.n=0;pb(this,
3,b)};var pb=function(b,a,d){if(0==b.n){if(b==d)a=3,d=new TypeError("Promise cannot resolve to itself");else{if(Sd(d)){b.n=1;d.then(b.xb,b.yb,b);return}if(x(d))try{var c=d.then;if(y(c)){Nc(b,d,c);return}}catch(e){a=3,d=e}}b.B=d;b.n=a;b.Ma||(b.Ma=!0,Va(b.vc,b));3!=a||d instanceof Bb||pd(b,d)}},Nc=function(b,a,d){b.n=1;var c=!1,e=function(a){c||(c=!0,b.xb(a))},g=function(a){c||(c=!0,b.yb(a))};try{d.call(a,e,g)}catch(h){g(h)}};fb.prototype.vc=function(){for(;this.o&&this.o.length;){var b=this.o;this.o=
[];for(var a=0;a<b.length;a++){var d=b[a],c=this.B;2==this.n?d.kb(c):(Mc(this),d.Oa(c))}}this.Ma=!1};var Mc=function(b){for(;b&&b.wa;b=b.p)b.wa=!1},pd=function(b,a){b.wa=!0;Va(function(){b.wa&&yf.call(null,a)})},yf=nd,Bb=function(b){R.call(this,b)};G(Bb,R);Bb.prototype.name="cancel";var W=function(b,a){this.ma=[];this.ib=b;this.hb=a||null;this.Z=this.A=!1;this.B=void 0;this.La=this.Nb=this.Ka=!1;this.na=0;this.p=null;this.Ja=0};W.prototype.cancel=function(b){if(this.A)this.B instanceof W&&this.B.cancel();
else{if(this.p){var a=this.p;delete this.p;b?a.cancel(b):(a.Ja--,0>=a.Ja&&a.cancel())}this.ib?this.ib.call(this.hb,this):this.La=!0;this.A||this.C(new Ub)}};W.prototype.jb=function(b,a){this.Ka=!1;Cb(this,b,a)};var Cb=function(b,a,d){b.A=!0;b.B=d;b.Z=!a;qd(b)},qb=function(b){if(b.A){if(!b.La)throw new Db;b.La=!1}};W.prototype.t=function(b){qb(this);Cb(this,!0,b)};W.prototype.C=function(b){qb(this);Cb(this,!1,b)};W.prototype.N=function(b,a){return rb(this,b,null,a)};var rb=function(b,a,d,c){b.ma.push([a,
d,c]);b.A&&qd(b);return b};W.prototype.then=function(b,a,d){var c,e,g=new fb(function(b,a){c=b;e=a});rb(this,c,function(b){b instanceof Ub?g.cancel():e(b)});return g.then(b,a,d)};ob(W);var kc=function(b){var a=new W;rb(b,a.t,a.C,a);return a},rd=function(b){return U(b.ma,function(b){return y(b[1])})},qd=function(b){if(b.na&&b.A&&rd(b)){var d=b.na,c=lc[d];c&&(k.clearTimeout(c.pa),delete lc[d]);b.na=0}b.p&&(b.p.Ja--,delete b.p);for(var d=b.B,e=c=!1;b.ma.length&&!b.Ka;){var g=b.ma.shift(),h=g[0],l=g[1],
g=g[2];if(h=b.Z?l:h)try{var r=h.call(g||b.hb,d);a(r)&&(b.Z=b.Z&&(r==d||r instanceof Error),b.B=d=r);Sd(d)&&(e=!0,b.Ka=!0)}catch(n){d=n,b.Z=!0,rd(b)||(c=!0)}}b.B=d;e&&(r=z(b.jb,b,!0),e=z(b.jb,b,!1),d instanceof W?(rb(d,r,e),d.Nb=!0):d.then(r,e));c&&(d=new sd(d),lc[d.pa]=d,b.na=d.pa)},Vb=function(b){var a=new W;a.t(b);return a},Ud=function(){var b=Td,a=new W;a.C(b);return a},Db=function(){R.call(this)};G(Db,R);Db.prototype.message="Deferred has already fired";Db.prototype.name="AlreadyCalledError";
var Ub=function(){R.call(this)};G(Ub,R);Ub.prototype.message="Deferred was canceled";Ub.prototype.name="CanceledError";var sd=function(b){this.pa=k.setTimeout(z(this.qc,this),0);this.ka=b};sd.prototype.qc=function(){delete lc[this.pa];throw this.ka;};var lc={},mc=function(b){this.ab=[];this.g=b};mc.prototype.V=function(b){if(!y(b))throw Error("Invalid filter. Must be a function.");this.ab.push(b)};mc.prototype.send=function(b,a){for(var d=new sb(b,a),c=0;c<this.ab.length&&(this.ab[c](d),!d.Za);c++);
return d.Za?Vb():this.g.send(b,a)};var sb=function(b,a){this.sc=b;this.rc=a;this.Za=!1};sb.prototype.Ib=function(){return this.sc};sb.prototype.W=function(){return this.rc};sb.prototype.cancel=function(){this.Za=!0};var nc=function(b,a){this.width=b;this.height=a};nc.prototype.clone=function(){return new nc(this.width,this.height)};nc.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};!xa&&!M||M&&M&&9<=Ja||xa&&H("1.9.1");M&&H("9");var td=
{id:"apiVersion",name:"v",valueType:"text",maxLength:void 0,defaultValue:void 0},Oc={id:"appName",name:"an",valueType:"text",maxLength:100,defaultValue:void 0},Pc={id:"appVersion",name:"av",valueType:"text",maxLength:100,defaultValue:void 0},Ma={id:"clientId",name:"cid",valueType:"text",maxLength:void 0,defaultValue:void 0},Vd={id:"language",name:"ul",valueType:"text",maxLength:20,defaultValue:void 0},oc={id:"libVersion",name:"_v",valueType:"text",maxLength:void 0,defaultValue:void 0},pc={id:"sampleRateOverride",
name:"usro",valueType:"integer",maxLength:void 0,defaultValue:void 0},ud={id:"screenColors",name:"sd",valueType:"text",maxLength:20,defaultValue:void 0},tb={id:"screenResolution",name:"sr",valueType:"text",maxLength:20,defaultValue:void 0},qc={id:"trackingId",name:"tid",valueType:"text",maxLength:void 0,defaultValue:void 0},vd={id:"viewportSize",name:"vp",valueType:"text",maxLength:20,defaultValue:void 0},wd={Sc:td,Vc:Oc,Wc:Pc,dd:Ma,wd:Vd,xd:oc,Dd:pc,Ed:ud,Fd:tb,Sd:qc,Zd:vd},xd=function(b){if(!e(b))return b;
var a=Wd(b,Gc);if(x(a))return a;a=Wd(b,wd);if(x(a))return a;a=/^dimension(\d+)$/.exec(b);if(null!==a)return Hc(parseInt(a[1],10));a=/^metric(\d+)$/.exec(b);if(null!==a)return Ic(parseInt(a[1],10));throw Error(b+" is not a valid parameter name.");},Wd=function(b,a){var d=dc(a,function(a){return a.id==b&&"metric"!=b&&"dimension"!=b});return x(d)?d:null},za=function(b,a){this.bc=a;this.r=a.Ta();this.ub=new V;this.Ya=!1};c=za.prototype;c.set=function(b,a){if(null==a)throw Error("Value must be defined and not null. Parameter="+
b.id);var d=xd(b);this.ub.set(d,a)};c.V=function(b){this.bc.V(b)};c.send=function(b,a){if(b instanceof aa)return b.send(this);var d=this.ub.clone();a instanceof V?d.la(a):x(a)&&cb(a,function(b,a){null!=b&&d.set(xd(a),b)},this);this.Ya&&(this.Ya=!1,d.set(Ec,"start"));return this.r.send(b,d)};c.Hc=function(b){var a={description:b};this.set(ec,b);return this.send("appview",a)};c.Ic=function(b,a,d,c){return this.send("event",{eventCategory:b,eventAction:a,eventLabel:d,eventValue:c})};c.Kc=function(b,
a,d){return this.send("social",{socialNetwork:b,socialAction:a,socialTarget:d})};c.Jc=function(b,a){return this.send("exception",{exDescription:b,exFatal:a})};c.Eb=function(b,a,d,c,e){return this.send("timing",{timingCategory:b,timingVar:a,timingLabel:c,timingValue:d,sampleRateOverride:e})};c.Bc=function(){this.Ya=!0};c.Nc=function(b,a,d,c){return new rc(this,b,a,d,c)};var rc=function(b,a,d,c,e){this.Bb=b;this.hc=a;this.kc=d;this.ic=c;this.qa=e;this.jc=D()};rc.prototype.send=function(){var b=this.Bb.Eb(this.hc,
this.kc,D()-this.jc,this.ic,this.qa);this.Bb=null;return b};var Eb=function(b,a,d,c,e){this.gc=b;this.dc=a;this.ec=d;this.e=c;this.fc=e};Eb.prototype.Dc=function(b){var a=new za(0,this.fc.create());a.set(oc,this.gc);a.set(td,1);a.set(Oc,this.dc);a.set(Pc,this.ec);a.set(qc,b);(b=navigator.language||navigator.browserLanguage)&&a.set(Vd,b);(b=screen.colorDepth+"-bit")&&a.set(ud,b);(b=[screen.width,screen.height].join("x"))&&a.set(tb,b);b=window.document;b="CSS1Compat"==b.compatMode?b.documentElement:
b.body;b=new nc(b.clientWidth,b.clientHeight);(b=[b.width,b.height].join("x"))&&a.set(vd,b);return a};Eb.prototype.Cc=function(){return kc(this.e.Y)};var ka=function(b){this.tc=b};ka.prototype.send=function(b,a){this.tc.push({Ub:b,Vb:a});return Vb()};var gb=function(b,a,d){this.e=b;this.T=[];this.L={enabled:new ka(this.T),disabled:d};this.r=this.L.enabled;rb(kc(this.e.Y),A(this.Rb,a),this.Qb,this)};gb.prototype.Rb=function(b,a){if(null===this.T)throw Error("Channel setup already completed.");if(a!=
this.e)throw Error("Yikes! Multiple settings instances!");this.L.enabled=b();Qc(this);r(this.T,function(b){this.send(b.Ub,b.Vb)},this);this.T=null;zf(this.e,z(this.Yb,this))};gb.prototype.Qb=function(){if(null===this.T)throw Error("Channel setup already completed.");this.r=this.L.enabled=this.L.disabled;this.T=null};gb.prototype.send=function(b,a){return this.r.send(b,a)};var Qc=function(b){b.r=b.e.ya()?b.L.enabled:b.L.disabled};gb.prototype.Yb=function(b){switch(b){case "analytics.tracking-permitted":Qc(this)}};
var Wb=function(b,a,d,c,e,g){W.call(this,e,g);this.Na=b;this.Pa=[];this.lb=!!a;this.Pb=!!d;this.Ob=!!c;for(a=this.mb=0;a<b.length;a++)rb(b[a],z(this.tb,this,a,!0),z(this.tb,this,a,!1));0!=b.length||this.lb||this.t(this.Pa)};G(Wb,W);Wb.prototype.tb=function(b,a,d){this.mb++;this.Pa[b]=[a,d];this.A||(this.lb&&a?this.t([b,d]):this.Pb&&!a?this.C(d):this.mb==this.Na.length&&this.t(this.Pa));this.Ob&&!a&&(d=null);return d};Wb.prototype.C=function(b){Wb.K.C.call(this,b);for(b=0;b<this.Na.length;b++)this.Na[b].cancel()};
var Rc=function(b){return(new Wb(b,!1,!0)).N(function(b){for(var a=[],d=0;d<b.length;d++)a[d]=b[d][1];return a})},ma=function(b){this.m=b;this.qa=100;this.ob=[];this.U=this.Qa=null;this.Y=Xd(this);this.Y.N(function(){this.pb=ja(this.m,"a",z(this.Sb,this))},this)},Xd=function(b){return yd(b).N(function(){return this},b)},yd=function(b){return Rc([Yd(b),sc(b)])};ma.prototype.Sb=function(){Wa(this);var b=ub(this),a=this.ya();yd(this).N(function(){if(b!=ub(this))throw Error("User ID changed unexpectedly!");
a!=this.ya()&&zd(this)},this)};var zf=function(b,a){Wa(b);b.ob.push(a)};ma.prototype.Mc=function(b){Wa(this);var a=this.U!=b;this.U=b;this.m.set("analytics.tracking-permitted",b.toString());a&&zd(this)};ma.prototype.ya=function(){Wa(this);var b;if(b=this.U)b=k._gaUserPrefs,b=!(b&&b.ioo&&b.ioo());return b};var Yd=function(b){return b.m.get("analytics.tracking-permitted").N(function(b){this.U=!0;if(a(b))switch(b){case "true":this.U=!0;break;case "false":this.U=!1}},b)},ub=function(b){Wa(b);if(!e(b.Qa))throw Error("Invalid state. UserID is not a string.");
return b.Qa},sc=function(b){return b.m.get("analytics.user-id").N(function(b){if(!a(b)){b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("");for(var d=0,c=b.length;d<c;d++)switch(b[d]){case "x":b[d]=Math.floor(16*Math.random()).toString(16);break;case "y":b[d]=(Math.floor(4*Math.random())+8).toString(16)}b=b.join("");this.m.set("analytics.user-id",b)}this.Qa=b},b)};ma.prototype.Lc=function(b){Wa(this);this.qa=b};var Zd=function(b){Wa(b);return b.qa},zd=function(b){r(b.ob,function(b){b("analytics.tracking-permitted")})};
ma.prototype.$=function(){null!=this.pb&&md(this.pb)};var Wa=function(b){if(!kc(b.Y).A)throw Error("Settings object accessed prior to entering ready state.");},Xb=function(){Z.call(this);this.P="google-analytics";this.m=chrome.storage.local;chrome.storage.onChanged.addListener(z(this.$a,this))};G(Xb,Z);Xb.prototype.$a=function(b){Ad(this,b)&&this.dispatchEvent("a")};var Ad=function(b,a){return U(Lb(a),function(b){return 0==b.lastIndexOf(this.P,0)},b)};Xb.prototype.get=function(b){var a=new W,d=this.P+
"."+b;this.m.get(d,function(b){chrome.runtime.lastError?a.C(chrome.runtime.lastError):(b=b[d],a.t(null!=b?b.toString():void 0))});return a};Xb.prototype.set=function(b,a){var d=new W,c={};c[this.P+"."+b]=a;this.m.set(c,function(){chrome.runtime.lastError?d.C(chrome.runtime.lastError):d.t()});return d};var Fb=function(b,a){Z.call(this);this.za=b||1;this.S=a||k;this.Sa=z(this.nc,this);this.Ua=D()};G(Fb,Z);c=Fb.prototype;c.enabled=!1;c.h=null;c.nc=function(){if(this.enabled){var b=D()-this.Ua;0<b&&b<
.8*this.za?this.h=this.S.setTimeout(this.Sa,this.za-b):(this.h&&(this.S.clearTimeout(this.h),this.h=null),this.dispatchEvent("tick"),this.enabled&&(this.h=this.S.setTimeout(this.Sa,this.za),this.Ua=D()))}};c.start=function(){this.enabled=!0;this.h||(this.h=this.S.setTimeout(this.Sa,this.za),this.Ua=D())};c.stop=function(){this.enabled=!1;this.h&&(this.S.clearTimeout(this.h),this.h=null)};c.l=function(){Fb.K.l.call(this);this.stop();delete this.S};var Sc=function(b,a,d){if(y(b))d&&(b=z(b,d));else if(b&&
"function"==typeof b.handleEvent)b=z(b.handleEvent,b);else throw Error("Invalid listener argument");return 2147483647<a?-1:k.setTimeout(b,a||0)},Yb=function(){Z.call(this);this.P="google-analytics";this.m=window.localStorage;ja(window,"storage",z(this.$a,this),!1)};G(Yb,Z);Yb.prototype.get=function(b){var a=Bd(this,b),d=new W;Sc(function(){d.t(a)});return d};Yb.prototype.set=function(b,a){a!=Bd(this,b)&&(this.m.setItem(this.P+"."+b,a),this.dispatchEvent("a"));var d=new W;Sc(function(){d.t()});return d};
Yb.prototype.$a=function(b){b instanceof StorageEvent||"storage"!=b.type||(b=window.event);if(!("storageArea"in b))throw Error('"storageArea" property missing from event type: '+b.type);if(!("key"in b))throw Error('"key" property missing from event type: '+b.type);b.storageArea==this.m&&0==b.key.lastIndexOf(this.P,0)&&this.dispatchEvent("a")};var Bd=function(b,a){var d=b.m.getItem(b.P+"."+a);return null!=d?d:void 0},hb=function(){};hb.$b=function(){return hb.Kb?hb.Kb:hb.Kb=new hb};hb.prototype.send=
function(){return Vb()};var Na=function(b,a){this.Xa=[];var d=z(function(){this.Ba=new mc(a.Ta());r(this.Xa,function(b){this.Ba.V(b)},this);this.Xa=null;return this.Ba},this);this.r=new gb(b,d,hb.$b())};Na.prototype.Ta=function(){return this.r};Na.prototype.V=function(b){this.Ba?this.Ba.V(b):this.Xa.push(b)};var $d=function(b,a){this.e=b;this.oc=a};$d.prototype.create=function(){return new Na(this.e,this.oc)};var ib=function(b){T.call(this);this.Va=b;this.b={}};G(ib,T);var ae=[];ib.prototype.listen=
function(b,a,d,c){q(a)||(a&&(ae[0]=a.toString()),a=ae);for(var e=0;e<a.length;e++){var g=ja(b,a[e],d||this.handleEvent,c||!1,this.Va||this);if(!g)break;this.b[g.key]=g}return this};ib.prototype.cb=function(b,a,d,c){return tc(this,b,a,d,c)};var tc=function(b,a,d,c,e,g){if(q(d))for(var h=0;h<d.length;h++)tc(b,a,d[h],c,e,g);else{a=Oe(a,d,c||b.handleEvent,e,g||b.Va||b);if(!a)return b;b.b[a.key]=a}return b};ib.prototype.Wa=function(b,a,d,c,e){if(q(a))for(var g=0;g<a.length;g++)this.Wa(b,a[g],d,c,e);else d=
d||this.handleEvent,e=e||this.Va||this,d=hc(d),c=!!c,(a=qa(b)?b.aa(a,d,c,e):b?(b=Sb(b))?b.aa(a,d,c,e):null:null)&&(md(a),delete this.b[a.key]);return this};ib.prototype.removeAll=function(){cb(this.b,md);this.b={}};ib.prototype.l=function(){ib.K.l.call(this);this.removeAll()};ib.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var C=function(){Z.call(this);this.ua=new ib(this);da&&(kd?this.ua.listen(qe?document.body:window,["online","offline"],this.vb):(this.wb=
da?navigator.onLine:!0,this.h=new Fb(250),this.ua.listen(this.h,"tick",this.cc),this.h.start()))};G(C,Z);C.prototype.cc=function(){var b=da?navigator.onLine:!0;b!=this.wb&&(this.wb=b,this.vb())};C.prototype.vb=function(){this.dispatchEvent((da?navigator.onLine:1)?"online":"offline")};C.prototype.l=function(){C.K.l.call(this);this.ua.$();this.ua=null;this.h&&(this.h.$(),this.h=null)};var Tc=function(b,a){this.e=b;this.g=a};Tc.prototype.send=function(b,a){a.set(Ma,ub(this.e));return this.g.send(b,a)};
var uc=function(b){this.g=b};uc.prototype.send=function(b,a){Zb(a);Oa(a);return this.g.send(b,a)};var Zb=function(b){nb(b,function(d,c){a(d.maxLength)&&"text"==d.valueType&&0<d.maxLength&&c.length>d.maxLength&&b.set(d,c.substring(0,d.maxLength))})},Oa=function(b){nb(b,function(d,c){a(d.defaultValue)&&c==d.defaultValue&&b.remove(d)})},Td={status:"device-offline",Ca:void 0},se={status:"rate-limited",Ca:void 0},te={status:"sampled-out",Ca:void 0},ue={status:"sent",Ca:void 0},Cd=function(b,a){this.Zb=
b;this.g=a};Cd.prototype.send=function(b,a){var d;d=this.Zb;var c=d.rb(),e=Math.floor((c-d.qb)*d.Wb);0<e&&(d.da=Math.min(d.da+e,d.Xb),d.qb=c);1>d.da?d=!1:(--d.da,d=!0);return d||"item"==b||"transaction"==b?this.g.send(b,a):Vb(se)};var Xa=function(){this.da=60;this.Xb=500;this.Wb=5E-4;this.rb=function(){return(new Date).getTime()};this.qb=this.rb()},Ya=function(b,a){this.e=b;this.g=a};Ya.prototype.send=function(b,a){var d=a.get(Ma),d=parseInt(d.split("-")[1],16),c;"timing"!=b?c=Zd(this.e):((c=a.get(pc))&&
a.remove(pc),c=c||Zd(this.e));return d<655.36*c?this.g.send(b,a):Vb(te)};var $b=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,vc=Da,Uc=function(b,a){if(vc){vc=!1;var d=k.location;if(d){var c=d.href;if(c&&(c=(c=Uc(3,c))?decodeURI(c):c)&&c!=d.hostname)throw vc=!0,Error();}}return a.match($b)[b]||null},Dd=function(){};Dd.prototype.Gb=null;var ac=function(b){var a;(a=b.Gb)||(a={},Ed(b)&&(a[0]=!0,a[1]=!0),a=b.Gb=a);return a},Vc,Fd=function(){};
G(Fd,Dd);var Gd=function(b){return(b=Ed(b))?new ActiveXObject(b):new XMLHttpRequest},Ed=function(b){if(!b.Jb&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],d=0;d<a.length;d++){var c=a[d];try{return new ActiveXObject(c),b.Jb=c}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return b.Jb};Vc=new Fd;var Fa=function(b){Z.call(this);
this.headers=new ga;this.ja=b||null;this.G=!1;this.ga=this.a=null;this.fa=this.Ga="";this.J=this.Fa=this.ea=this.Ia=!1;this.ia=0;this.ha=null;this.eb="";this.Ha=this.Mb=!1};G(Fa,Z);var na=/^https?$/i,be=["POST","PUT"],Wc=[],Hd=function(b,a,d){var c=new Fa;Wc.push(c);a&&c.listen("complete",a);c.cb("ready",c.uc);c.send(b,"POST",d,void 0)};Fa.prototype.uc=function(){this.$();kb(Wc,this)};Fa.prototype.send=function(b,a,d,c){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+
this.Ga+"; newUri="+b);a=a?a.toUpperCase():"GET";this.Ga=b;this.fa="";this.Ia=!1;this.G=!0;this.a=this.ja?Gd(this.ja):Gd(Vc);this.ga=this.ja?ac(this.ja):ac(Vc);this.a.onreadystatechange=z(this.fb,this);try{this.Fa=!0,this.a.open(a,String(b),!0),this.Fa=!1}catch(e){this.ka(5,e);return}b=d||"";var g=this.headers.clone();c&&hd(c,function(b,a){g.set(a,b)});c=I(g.H());d=k.FormData&&b instanceof k.FormData;!(0<=ta(be,a))||c||d||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");g.forEach(function(b,
a){this.a.setRequestHeader(a,b)},this);this.eb&&(this.a.responseType=this.eb);"withCredentials"in this.a&&(this.a.withCredentials=this.Mb);try{Id(this),0<this.ia&&((this.Ha=ce(this.a))?(this.a.timeout=this.ia,this.a.ontimeout=z(this.gb,this)):this.ha=Sc(this.gb,this.ia,this)),this.ea=!0,this.a.send(b),this.ea=!1}catch(e){this.ka(5,e)}};var ce=function(b){return M&&H(9)&&n(b.timeout)&&a(b.ontimeout)},Pd=function(b){return"content-type"==b.toLowerCase()};Fa.prototype.gb=function(){"undefined"!=typeof l&&
this.a&&(this.fa="Timed out after "+this.ia+"ms, aborting",this.dispatchEvent("timeout"),this.abort(8))};Fa.prototype.ka=function(b,a){this.G=!1;this.a&&(this.J=!0,this.a.abort(),this.J=!1);this.fa=a;wc(this);xc(this)};var wc=function(b){b.Ia||(b.Ia=!0,b.dispatchEvent("complete"),b.dispatchEvent("error"))};Fa.prototype.abort=function(){this.a&&this.G&&(this.G=!1,this.J=!0,this.a.abort(),this.J=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xc(this))};Fa.prototype.l=function(){this.a&&
(this.G&&(this.G=!1,this.J=!0,this.a.abort(),this.J=!1),xc(this,!0));Fa.K.l.call(this)};Fa.prototype.fb=function(){this.ba||(this.Fa||this.ea||this.J?de(this):this.lc())};Fa.prototype.lc=function(){de(this)};var de=function(b){if(b.G&&"undefined"!=typeof l&&(!b.ga[1]||4!=bc(b)||2!=Xc(b)))if(b.ea&&4==bc(b))Sc(b.fb,0,b);else if(b.dispatchEvent("readystatechange"),4==bc(b)){b.G=!1;try{var a=Xc(b),d,c;a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!(d=
c)){var e;if(e=0===a){var g=Uc(1,String(b.Ga));if(!g&&self.location)var h=self.location.protocol,g=h.substr(0,h.length-1);e=!na.test(g?g.toLowerCase():"")}d=e}if(d)b.dispatchEvent("complete"),b.dispatchEvent("success");else{var r;try{r=2<bc(b)?b.a.statusText:""}catch(k){r=""}b.fa=r+" ["+Xc(b)+"]";wc(b)}}finally{xc(b)}}},xc=function(b,a){if(b.a){Id(b);var d=b.a,c=b.ga[0]?g:null;b.a=null;b.ga=null;a||b.dispatchEvent("ready");try{d.onreadystatechange=c}catch(e){}}},Id=function(b){b.a&&b.Ha&&(b.a.ontimeout=
null);n(b.ha)&&(k.clearTimeout(b.ha),b.ha=null)},bc=function(b){return b.a?b.a.readyState:0},Xc=function(b){try{return 2<bc(b)?b.a.status:-1}catch(a){return-1}},Yc=function(b,a,d){this.v=b||null;this.pc=!!d},Hb=function(b){if(!b.c&&(b.c=new ga,b.j=0,b.v))for(var a=b.v.split("&"),d=0;d<a.length;d++){var c=a[d].indexOf("="),e=null,g=null;0<=c?(e=a[d].substring(0,c),g=a[d].substring(c+1)):e=a[d];e=decodeURIComponent(e.replace(/\+/g," "));e=Gb(b,e);b.add(e,g?decodeURIComponent(g.replace(/\+/g," ")):"")}};
c=Yc.prototype;c.c=null;c.j=null;c.add=function(b,a){Hb(this);this.v=null;b=Gb(this,b);var d=this.c.get(b);d||this.c.set(b,d=[]);d.push(a);this.j++;return this};c.remove=function(b){Hb(this);b=Gb(this,b);return this.c.R(b)?(this.v=null,this.j-=this.c.get(b).length,this.c.remove(b)):!1};c.R=function(b){Hb(this);b=Gb(this,b);return this.c.R(b)};c.H=function(){Hb(this);for(var b=this.c.w(),a=this.c.H(),d=[],c=0;c<a.length;c++)for(var e=b[c],g=0;g<e.length;g++)d.push(a[c]);return d};c.w=function(b){Hb(this);
var a=[];if(e(b))this.R(b)&&(a=Bc(a,this.c.get(Gb(this,b))));else{b=this.c.w();for(var d=0;d<b.length;d++)a=Bc(a,b[d])}return a};c.set=function(b,a){Hb(this);this.v=null;b=Gb(this,b);this.R(b)&&(this.j-=this.c.get(b).length);this.c.set(b,[a]);this.j++;return this};c.get=function(b,a){var d=b?this.w(b):[];return 0<d.length?String(d[0]):a};c.toString=function(){if(this.v)return this.v;if(!this.c)return"";for(var b=[],a=this.c.H(),d=0;d<a.length;d++)for(var c=a[d],e=encodeURIComponent(String(c)),c=this.w(c),
g=0;g<c.length;g++){var h=e;""!==c[g]&&(h+="="+encodeURIComponent(String(c[g])));b.push(h)}return this.v=b.join("&")};c.clone=function(){var b=new Yc;b.v=this.v;this.c&&(b.c=this.c.clone(),b.j=this.j);return b};var Gb=function(b,a){var d=String(a);b.pc&&(d=d.toLowerCase());return d},Jd=function(b,a){this.ac=b;this.oa=a};Jd.prototype.send=function(b,a){if(da&&!navigator.onLine)return Ud();var d=new W,c=ee(b,a);c.length>this.oa?d.C({status:"payload-too-big",Ca:fc("Encoded hit length == %s, but should be <= %s.",
c.length,this.oa)}):Hd(this.ac,function(){d.t(ue)},c);return d};var ee=function(b,a){var d=new Yc;d.add(yb.name,b);nb(a,function(b,a){d.add(b.name,a.toString())});return d.toString()},Zc=function(b,a,d){this.e=b;this.Tb=a;this.oa=d};Zc.prototype.Ta=function(){if(!this.r){if(!kc(this.e.Y).A)throw Error("Cannot construct shared channel prior to settings being ready.");new C;var b=new uc(new Jd(this.Tb,this.oa)),a=new Xa;this.r=new Tc(this.e,new Ya(this.e,new Cd(a,b)))}return this.r};var B=new ga,Za=
function(){if(!p){var b="chrome-extension:"==k.location.protocol?new Xb:new Yb;p=new ma(b)}return p};u("goog.async.Deferred",W);u("goog.async.Deferred.prototype.addCallback",W.prototype.N);u("goog.events.EventTarget",Z);u("goog.events.EventTarget.prototype.listen",Z.prototype.listen);u("analytics.getService",function(b,a){var d=B.get(b,null);if(null===d){if("chrome-extension:"==k.location.protocol)d=chrome.runtime.getManifest().version;else{if(!e(a)||/^[\s\xa0]*$/.test(a))throw Error("Invalid version. Must be non-empty string.");
d=a}var c=Za();if(!lb){var g=Za();lb=new $d(g,new Zc(g,"https://www.google-analytics.com/collect",8192))}d=new Eb("ca1.6.0prerelease",b,d,c,lb);B.set(b,d)}return d});u("analytics.internal.GoogleAnalyticsService",Eb);u("analytics.internal.GoogleAnalyticsService.prototype.getTracker",Eb.prototype.Dc);u("analytics.internal.GoogleAnalyticsService.prototype.getConfig",Eb.prototype.Cc);u("analytics.internal.ServiceSettings",ma);u("analytics.internal.ServiceSettings.prototype.setTrackingPermitted",ma.prototype.Mc);
u("analytics.internal.ServiceSettings.prototype.isTrackingPermitted",ma.prototype.ya);u("analytics.internal.ServiceSettings.prototype.setSampleRate",ma.prototype.Lc);u("analytics.internal.ServiceTracker",za);u("analytics.internal.ServiceTracker.prototype.send",za.prototype.send);u("analytics.internal.ServiceTracker.prototype.sendAppView",za.prototype.Hc);u("analytics.internal.ServiceTracker.prototype.sendEvent",za.prototype.Ic);u("analytics.internal.ServiceTracker.prototype.sendSocial",za.prototype.Kc);
u("analytics.internal.ServiceTracker.prototype.sendException",za.prototype.Jc);u("analytics.internal.ServiceTracker.prototype.sendTiming",za.prototype.Eb);u("analytics.internal.ServiceTracker.prototype.startTiming",za.prototype.Nc);u("analytics.internal.ServiceTracker.Timing",rc);u("analytics.internal.ServiceTracker.Timing.prototype.send",rc.prototype.send);u("analytics.internal.ServiceTracker.prototype.forceSessionStart",za.prototype.Bc);u("analytics.internal.ServiceTracker.prototype.addFilter",
za.prototype.V);u("analytics.internal.FilterChannel.Hit",sb);u("analytics.internal.FilterChannel.Hit.prototype.getHitType",sb.prototype.Ib);u("analytics.internal.FilterChannel.Hit.prototype.getParameters",sb.prototype.W);u("analytics.internal.FilterChannel.Hit.prototype.cancel",sb.prototype.cancel);u("analytics.ParameterMap",V);u("analytics.ParameterMap.Entry",V.Entry);u("analytics.ParameterMap.prototype.set",V.prototype.set);u("analytics.ParameterMap.prototype.get",V.prototype.get);u("analytics.ParameterMap.prototype.remove",
V.prototype.remove);u("analytics.ParameterMap.prototype.toObject",V.prototype.Lb);u("analytics.HitTypes.APPVIEW","appview");u("analytics.HitTypes.EVENT","event");u("analytics.HitTypes.SOCIAL","social");u("analytics.HitTypes.TRANSACTION","transaction");u("analytics.HitTypes.ITEM","item");u("analytics.HitTypes.TIMING","timing");u("analytics.HitTypes.EXCEPTION","exception");cb(Gc,function(b){var a=b.id.replace(/[A-Z]/,"_$&").toUpperCase();u("analytics.Parameters."+a,b)});u("analytics.filters.EventLabelerBuilder",
la);u("analytics.filters.EventLabelerBuilder.prototype.appendToExistingLabel",la.prototype.xc);u("analytics.filters.EventLabelerBuilder.prototype.stripValue",la.prototype.Oc);u("analytics.filters.EventLabelerBuilder.prototype.powersOfTwo",la.prototype.Fc);u("analytics.filters.EventLabelerBuilder.prototype.rangeBounds",la.prototype.Gc);u("analytics.filters.EventLabelerBuilder.prototype.build",la.prototype.Da);u("analytics.filters.FilterBuilder",Qa);u("analytics.filters.FilterBuilder.builder",Ha);u("analytics.filters.FilterBuilder.prototype.when",
Qa.prototype.when);u("analytics.filters.FilterBuilder.prototype.whenHitType",Qa.prototype.Ab);u("analytics.filters.FilterBuilder.prototype.whenValue",Qa.prototype.Pc);u("analytics.filters.FilterBuilder.prototype.applyFilter",Qa.prototype.zb);u("analytics.filters.FilterBuilder.prototype.build",Qa.prototype.Da);u("analytics.EventBuilder",aa);u("analytics.EventBuilder.builder",function(){return id});u("analytics.EventBuilder.prototype.category",aa.prototype.yc);u("analytics.EventBuilder.prototype.action",
aa.prototype.action);u("analytics.EventBuilder.prototype.label",aa.prototype.label);u("analytics.EventBuilder.prototype.value",aa.prototype.value);u("analytics.EventBuilder.prototype.dimension",aa.prototype.zc);u("analytics.EventBuilder.prototype.metric",aa.prototype.Ec);u("analytics.EventBuilder.prototype.send",aa.prototype.send)})();define("third_party/googleAnalytics/google-analytics-bundle",function(){});
(function(){function c(a,d){return a.set(d[0],d[1]),a}function l(a,d){return a.add(d),a}function k(a,d,c){switch(c.length){case 0:return a.call(d);case 1:return a.call(d,c[0]);case 2:return a.call(d,c[0],c[1]);case 3:return a.call(d,c[0],c[1],c[2])}return a.apply(d,c)}function a(a,d,c,e){for(var g=-1,h=a.length;++g<h;){var r=a[g];d(e,r,c(r),a)}return e}function g(a,d){for(var c=-1,e=a.length;++c<e&&!1!==d(a[c],c,a););return a}function h(a,d){for(var c=-1,e=a.length;++c<e;)if(!d(a[c],c,a))return!1;
return!0}function q(a,d){for(var c=-1,e=a.length,g=-1,h=[];++c<e;){var r=a[c];d(r,c,a)&&(h[++g]=r)}return h}function v(a,d){return!!a.length&&-1<u(a,d,0)}function e(a,d,c){for(var e=-1,g=a.length;++e<g;)if(c(d,a[e]))return!0;return!1}function n(a,d){for(var c=-1,e=a.length,g=Array(e);++c<e;)g[c]=d(a[c],c,a);return g}function y(a,d){for(var c=-1,e=d.length,g=a.length;++c<e;)a[g+c]=d[c];return a}function x(a,d,c,e){var g=-1,h=a.length;for(e&&h&&(c=a[++g]);++g<h;)c=d(c,a[g],g,a);return c}function O(a,
d,c,e){var g=a.length;for(e&&g&&(c=a[--g]);g--;)c=d(c,a[g],g,a);return c}function F(a,d){for(var c=-1,e=a.length;++c<e;)if(d(a[c],c,a))return!0;return!1}function z(a,d,c){for(var e=-1,g=a.length;++e<g;){var h=a[e],r=d(h);if(null!=r&&(l===p?r===r:c(r,l)))var l=r,k=h}return k}function A(a,d,c,e){var g;return c(a,function(a,c,h){return d(a,c,h)?(g=e?c:a,!1):void 0}),g}function D(a,d,c){for(var e=a.length,g=c?e:-1;c?g--:++g<e;)if(d(a[g],g,a))return g;return-1}function u(a,d,c){if(d!==d)return Kb(a,c);
--c;for(var e=a.length;++c<e;)if(a[c]===d)return c;return-1}function G(a,d,c,e,g){return g(a,function(a,g,h){c=e?(e=!1,a):d(c,a,g,h)}),c}function R(a,d){var c=a.length;for(a.sort(d);c--;)a[c]=a[c].c;return a}function ba(a,d){for(var c,e=-1,g=a.length;++e<g;){var h=d(a[e]);h!==p&&(c=c===p?h:c+h)}return c}function ca(a,d){for(var c=-1,e=Array(a);++c<a;)e[c]=d(c);return e}function E(a,d){return n(d,function(d){return[d,a[d]]})}function ta(a){return function(d){return a(d)}}function r(a,d){return n(d,
function(d){return a[d]})}function U(a,d){for(var c=-1,e=a.length;++c<e&&-1<u(d,a[c],0););return c}function X(a,d){for(var c=a.length;c--&&-1<u(d,a[c],0););return c}function I(a){return a&&a.Object===Object?a:null}function kb(a,d){if(a!==d){var c=null===a,e=a===p,g=a===a,h=null===d,r=d===p,l=d===d;if(a>d&&!h||!g||c&&!r&&l||e&&l)return 1;if(d>a&&!c||!l||h&&!e&&g||r&&g)return-1}return 0}function Bc(a){return Ja[a]}function Cc(a){return gc[a]}function Dc(a){return"\\"+kd[a]}function Kb(a,d,c){var e=
a.length;for(d+=c?0:-1;c?d--:++d<e;){var g=a[d];if(g!==g)return d}return-1}function cb(a){var d=!1;if(null!=a&&"function"!=typeof a.toString)try{d=!!(a+"")}catch(c){}return d}function Ba(a,d){return a="number"==typeof a||ia.test(a)?+a:-1,-1<a&&0==a%1&&(null==d?9007199254740991:d)>a}function Lb(a){for(var d,c=[];!(d=a.next()).done;)c.push(d.value);return c}function dc(a){var d=-1,c=Array(a.size);return a.forEach(function(a,e){c[++d]=[e,a]}),c}function Ga(a,d){for(var c=-1,e=a.length,g=-1,h=[];++c<
e;){var r=a[c];(r===d||"__lodash_placeholder__"===r)&&(a[c]="__lodash_placeholder__",h[++g]=c)}return h}function wb(a){var d=-1,c=Array(a.size);return a.forEach(function(a){c[++d]=a}),c}function ga(a){if(!a||!xa.test(a))return a.length;for(var d=M.lastIndex=0;M.test(a);)d++;return d}function xb(a){return jd[a]}function db(I){function d(f){if(ha(f)&&!K(f)&&!(f instanceof J)){if(f instanceof ja)return f;if(ea.call(f,"__wrapped__"))return Fd(f)}return new ja(f)}function da(){}function ja(f,t){this.__wrapped__=
f;this.__actions__=[];this.__chain__=!!t;this.__index__=0;this.__values__=p}function J(f){this.__wrapped__=f;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=4294967295;this.__views__=[]}function ia(){}function Ja(f){var t=-1,b=f?f.length:0;for(this.clear();++t<b;){var a=f[t];this.set(a[0],a[1])}}function qa(f){var t=-1,b=f?f.length:0;for(this.__data__=new Ja;++t<b;)this.push(f[t])}function ra(f,t){var b=f.__data__;return $b(t)?(b=b.__data__,"__lodash_hash_undefined__"===
("string"==typeof t?b.string:b.hash)[t]):b.has(t)}function Ta(f){var t=-1,b=f?f.length:0;for(this.clear();++t<b;){var a=f[t];this.set(a[0],a[1])}}function eb(f,t){var b=Ka(f,t);return 0>b?!1:(b==f.length-1?f.pop():fe.call(f,b,1),!0)}function gc(f,t){var b=Ka(f,t);return 0>b?p:f[b][1]}function Ka(f,t){for(var b=f.length;b--;)if(Za(f[b][0],t))return b;return-1}function Sb(f,t,b){var a=Ka(f,t);0>a?f.push([t,b]):f[a][1]=b}function ic(f,t,b,a){return f===p||Za(f,$c[b])&&!ea.call(a,b)?t:f}function hc(f,
t,b){(b===p||Za(f[t],b))&&("number"!=typeof t||b!==p||t in f)||(f[t]=b)}function Z(f,t,b){var a=f[t];ea.call(f,t)&&Za(a,b)&&(b!==p||t in f)||(f[t]=b)}function Kc(f,t,b,a){return Ib(f,function(f,d,c){t(a,f,b(f),c)}),a}function nd(f,t){return f&&gb(t,sa(t),f)}function jc(f,t){for(var b=-1,a=null==f,d=t.length,c=Array(d);++b<d;)c[b]=a?p:Kd(f,t[b]);return c}function od(f){return fa(f)?f:[]}function Va(f){return"function"==typeof f?f:jb}function Ua(f){return K(f)?f:Vc(f)}function Tb(f,t,b){return f===
f&&(b!==p&&(f=f>b?b:f),t!==p&&(f=t>f?t:f)),f}function ya(f,t,b,a,d,c){var e;if(b&&(e=d?b(f,a,d,c):b(f)),e!==p)return e;if(!Y(f))return f;if(a=K(f)){if(e=se(f),!t)return ka(f,e)}else{var h=Oa(f),m="[object Function]"==h||"[object GeneratorFunction]"==h;if(Se(f))return Wd(f,t);if("[object Object]"==h||"[object Arguments]"==h||m&&!d){if(cb(f))return d?f:{};if(e=te(m?{}:f),!t)return Wb(f,nd(e,f))}else{if(!P[h])return d?f:{};e=ue(f,h,t)}}return c||(c=new Ta),(d=c.get(f))?d:(c.set(f,e),(a?g:La)(f,function(a,
d){Z(e,d,ya(a,t,b,d,f,c))}),a?e:Wb(f,e))}function Lc(f){var t=sa(f),b=t.length;return function(a){if(null==a)return!b;for(var d=b;d--;){var c=t[d],e=f[c],g=a[c];if(g===p&&!(c in Object(a))||!e(g))return!1}return!0}}function Ab(f){return Y(f)?Af(f):{}}function Rd(f,t,b){if("function"!=typeof f)throw new $a("Expected a function");return ge(function(){f.apply(p,b)},t)}function ob(f,t,b,a){var d=-1,c=v,g=!0,h=f.length,m=[],r=t.length;if(!h)return m;b&&(t=n(t,ta(b)));a?(c=e,g=!1):200<=t.length&&(c=ra,
g=!1,t=new qa(t));a:for(;++d<h;){var l=f[d],k=b?b(l):l;if(g&&k===k){for(var q=r;q--;)if(t[q]===k)continue a;m.push(l)}else c(t,k,a)||m.push(l)}return m}function Sd(f,t){var b=!0;return Ib(f,function(f,a,d){return b=!!t(f,a,d)}),b}function fb(f,t){var b=[];return Ib(f,function(f,a,d){t(f,a,d)&&b.push(f)}),b}function S(f,t,b,a){a||(a=[]);for(var d=-1,c=f.length;++d<c;){var e=f[d];0<t&&fa(e)&&(b||K(e)||m(e))?1<t?S(e,t-1,b,a):y(a,e):b||(a[a.length]=e)}return a}function jd(f,t){return null==f?f:we(f,t,
ab)}function La(f,t){return f&&we(f,t,sa)}function pb(f,t){return f&&Te(f,t,sa)}function Nc(f,t){return q(t,function(t){return Pa(f[t])})}function Mc(f,t){t=Ya(t,f)?[t+""]:Ua(t);for(var b=0,a=t.length;null!=f&&a>b;)f=f[t[b++]];return b&&b==a?f:p}function pd(f,t){return ea.call(f,t)||"object"==typeof f&&t in f&&null===he(f)}function kd(f,t){return t in Object(f)}function Bb(f,t,b){for(var a=b?e:v,d=f.length,c=d,g=Array(d),h=[];c--;){var m=f[c];c&&t&&(m=n(m,ta(t)));g[c]=b||!t&&120>m.length?p:new qa(c&&
m)}var m=f[0],r=-1,l=m.length,k=g[0];a:for(;++r<l;){var q=m[r],N=t?t(q):q;if(k?!ra(k,N):!a(h,N,b)){for(c=d;--c;){var u=g[c];if(u?!ra(u,N):!a(f[c],N,b))continue a}k&&k.push(N);h.push(q)}}return h}function W(f,t,b,a){return La(f,function(f,d,c){t(a,b(f),d,c)}),a}function Cb(f,t,b){return Ya(t,f)||(t=Ua(t),f=ac(f,t),t=na(t)),t=null==f?f:f[t],null==t?p:k(t,f,b)}function qb(f,t,b,a,d){if(f===t)return!0;if(null==f||null==t||!Y(f)&&!ha(t))return f!==f&&t!==t;var c=K(f),e=K(t),g="[object Array]",h="[object Array]";
c||(g=Oa(f),"[object Arguments]"==g?g="[object Object]":"[object Object]"!=g&&(c=ad(f)));e||(h=Oa(t),"[object Arguments]"==h?h="[object Object]":"[object Object]"!=h&&ad(t));var m="[object Object]"==g&&!cb(f),e="[object Object]"==h&&!cb(t),h=g==h;!h||c||m?2&a||(g=m&&ea.call(f,"__wrapped__"),e=e&&ea.call(t,"__wrapped__"),!g&&!e)?h?(d||(d=new Ta),f=(c?$d:ae)(f,t,qb,b,a,d)):f=!1:f=qb(g?f.value():f,e?t.value():t,b,a,d):f=ib(f,t,g,qb,b,a);return f}function rb(f,t,b,a){var d=b.length,c=d,e=!a;if(null==
f)return!c;for(f=Object(f);d--;){var g=b[d];if(e&&g[2]?g[1]!==f[g[0]]:!(g[0]in f))return!1}for(;++d<c;){var g=b[d],h=g[0],m=f[h],r=g[1];if(e&&g[2]){if(m===p&&!(h in f))return!1}else if(g=new Ta,h=a?a(m,r,h,f,t,g):p,h===p?!qb(r,m,a,3,g):!h)return!1}return!0}function kc(f){var t=typeof f;return"function"==t?f:null==f?jb:"object"==t?K(f)?Ud(f[0],f[1]):Vb(f):Ue(f)}function rd(f){f=null==f?f:Object(f);var t,b=[];for(t in f)b.push(t);return b}function qd(f,t){var b=-1,a=w(f)?Array(f.length):[];return Ib(f,
function(f,d,c){a[++b]=t(f,d,c)}),a}function Vb(f){var t=Tc(f);if(1==t.length&&t[0][2]){var b=t[0][0],a=t[0][1];return function(f){return null==f?!1:f[b]===a&&(a!==p||b in Object(f))}}return function(b){return b===f||rb(b,f,t)}}function Ud(f,b){return function(a){var d=Kd(a,f);return d===p&&d===b?Ve(a,f):qb(b,d,p,3)}}function Db(f,b,a,d,c){if(f!==b){var e=K(b)||ad(b)?p:ab(b);g(e||b,function(g,h){if(e&&(h=g,g=b[h]),Y(g)){c||(c=new Ta);var r=h,l=c,k=f[r],n=b[r],q=l.get(n);if(!q){var q=d?d(k,n,r+"",
f,b,l):p,N=q===p;N&&(q=n,K(n)||ad(n)?K(k)?q=k:fa(k)?q=ka(k):(N=!1,q=ya(n,!0)):pe(n)||m(n)?m(k)?q=We(k):!Y(k)||a&&Pa(k)?(N=!1,q=ya(n,!0)):q=k:N=!1);l.set(n,q);N&&Db(q,n,a,d,l)}hc(f,r,q)}else r=d?d(f[h],g,h+"",f,b,c):p,r===p&&(r=g),hc(f,h,r)})}}function Ub(f,b,a){var d=-1,c=C();return b=n(b.length?b:Array(1),function(f){return c(f)}),f=qd(f,function(f,a,c){return{a:n(b,function(b){return b(f)}),b:++d,c:f}}),R(f,function(f,b){var t;a:{t=-1;for(var d=f.a,c=b.a,e=d.length,g=a.length;++t<e;){var ve=kb(d[t],
c[t]);if(ve){if(t>=g){t=ve;break a}t=ve*("desc"==a[t]?-1:1);break a}}t=f.b-b.b}return t})}function sd(f,b){return f=Object(f),x(b,function(b,t){return t in f&&(b[t]=f[t]),b},{})}function lc(f,b){var a={};return jd(f,function(f,d){b(f,d)&&(a[d]=f)}),a}function mc(f){return function(b){return null==b?p:b[f]}}function sb(f){return function(b){return Mc(b,f)}}function nc(f,b,a){var d=-1,c=b.length,e=f;for(a&&(e=n(f,function(f){return a(f)}));++d<c;)for(var g=0,h=b[d],h=a?a(h):h;-1<(g=u(e,h,g));)e!==f&&
fe.call(e,g,1),fe.call(f,g,1);return f}function td(f,b){for(var a=f?b.length:0,d=a-1;a--;){var c=b[a];if(d==a||c!=e){var e=c;if(Ba(c))fe.call(f,c,1);else if(Ya(c,f))delete f[c];else{var c=Ua(c),g=ac(f,c);null!=g&&delete g[na(c)]}}}return f}function Oc(f,b){return f+ie(Xe()*(b-f+1))}function Pc(f,b,a,d){b=Ya(b,f)?[b+""]:Ua(b);for(var c=-1,e=b.length,g=e-1,h=f;null!=h&&++c<e;){var m=b[c];if(Y(h)){var r=a;if(c!=g){var l=h[m],r=d?d(l,m,h):p;r===p&&(r=null==l?Ba(b[c+1])?[]:{}:l)}Z(h,m,r)}h=h[m]}return f}
function Ma(f,b,a){var d=-1,c=f.length;0>b&&(b=-b>c?0:c+b);a=a>c?c:a;0>a&&(a+=c);c=b>a?0:a-b>>>0;b>>>=0;for(a=Array(c);++d<c;)a[d]=f[d+b];return a}function Vd(f,b){var a;return Ib(f,function(f,d,c){return a=b(f,d,c),!a}),!!a}function oc(f,b,a){var d=0,c=f?f.length:d;if("number"==typeof b&&b===b&&2147483647>=c){for(;c>d;){var e=d+c>>>1,g=f[e];(a?b>=g:b>g)&&null!==g?d=e+1:c=e}return c}return pc(f,b,jb,a)}function pc(f,b,a,d){b=a(b);for(var c=0,e=f?f.length:0,g=b!==b,h=null===b,m=b===p;e>c;){var r=ie((c+
e)/2),l=a(f[r]),k=l!==p,n=l===l;(g?n||d:h?n&&k&&(d||null!=l):m?n&&(d||k):null==l?0:d?b>=l:b>l)?c=r+1:e=r}return bb(e,4294967294)}function ud(f,b){for(var a=0,d=f.length,c=f[0],e=b?b(c):c,g=e,h=0,m=[c];++a<d;)c=f[a],e=b?b(c):c,Za(e,g)||(g=e,m[++h]=c);return m}function tb(f,b,a){var d=-1,c=v,g=f.length,h=!0,m=[],r=m;if(a)h=!1,c=e;else if(200>g)r=b?[]:m;else{if(c=b?null:Bf(f))return wb(c);h=!1;c=ra;r=new qa}a:for(;++d<g;){var l=f[d],k=b?b(l):l;if(h&&k===k){for(var n=r.length;n--;)if(r[n]===k)continue a;
b&&r.push(k);m.push(l)}else c(r,k,a)||(r!==m&&r.push(k),m.push(l))}return m}function qc(f,b,a,d){for(var c=f.length,e=d?c:-1;(d?e--:++e<c)&&b(f[e],e,f););return a?Ma(f,d?0:e,d?e+1:c):Ma(f,d?e+1:0,d?c:e)}function vd(f,b){var a=f;return a instanceof J&&(a=a.value()),x(b,function(f,b){return b.func.apply(b.thisArg,y([f],b.args))},a)}function wd(f,b,a){for(var d=-1,c=f.length;++d<c;)var e=e?y(ob(e,f[d],b,a),ob(f[d],e,b,a)):f[d];return e&&e.length?tb(e,b,a):[]}function xd(f,b,a){for(var d=-1,c=f.length,
e=b.length,g={};++d<c;)a(g,f[d],e>d?b[d]:p);return g}function Wd(f,b){if(b)return f.slice();var a=new f.constructor(f.length);return f.copy(a),a}function za(f){var b=new f.constructor(f.byteLength);return(new je(b)).set(new je(f)),b}function rc(f,b,a,d){var c=-1,e=f.length,g=a.length,h=-1,m=b.length,r=oa(e-g,0),l=Array(m+r);for(d=!d;++h<m;)l[h]=b[h];for(;++c<g;)(d||e>c)&&(l[a[c]]=f[c]);for(;r--;)l[h++]=f[c++];return l}function Eb(f,b,a,d){var c=-1,e=f.length,g=-1,h=a.length,m=-1,r=b.length,l=oa(e-
h,0),k=Array(l+r);for(d=!d;++c<l;)k[c]=f[c];for(l=c;++m<r;)k[l+m]=b[m];for(;++g<h;)(d||e>c)&&(k[l+a[g]]=f[c++]);return k}function ka(f,b){var a=-1,d=f.length;for(b||(b=Array(d));++a<d;)b[a]=f[a];return b}function gb(f,b,a){return Qc(f,b,a)}function Qc(f,b,a,d){a||(a={});for(var c=-1,e=b.length;++c<e;){var g=b[c],h=d?d(a[g],f[g],g,a,f):f[g];Z(a,g,h)}return a}function Wb(f,b){return gb(f,Cf(f),b)}function Rc(f,b){return function(d,c){var e=K(d)?a:Kc,g=b?b():{};return e(d,f,C(c),g)}}function ma(f){return B(function(b,
a){var d=-1,c=a.length,e=1<c?a[c-1]:p,g=2<c?a[2]:p,e="function"==typeof e?(c--,e):p;g&&Xa(a[0],a[1],g)&&(e=3>c?p:e,c=1);for(b=Object(b);++d<c;)(g=a[d])&&f(b,g,d,e);return b})}function Xd(f,b){return function(a,d){if(null==a)return a;if(!w(a))return f(a,d);for(var c=a.length,e=b?c:-1,g=Object(a);(b?e--:++e<c)&&!1!==d(g[e],e,g););return a}}function yd(f){return function(b,a,d){var c=-1,e=Object(b);d=d(b);for(var g=d.length;g--;){var h=d[f?g:++c];if(!1===a(e[h],h,e))break}return b}}function ld(f,b,a){function d(){return(this&&
this!==Ea&&this instanceof d?e:f).apply(c?a:this,arguments)}var c=1&b,e=sc(f);return d}function Yd(f){return function(b){b=Q(b);var a=xa.test(b)?b.match(M):p,d=a?a[0]:b.charAt(0);return b=a?a.slice(1).join(""):b.slice(1),d[f]()+b}}function ub(f){return function(b){return x(Ye(Ze(b)),f,"")}}function sc(f){return function(){var b=arguments;switch(b.length){case 0:return new f;case 1:return new f(b[0]);case 2:return new f(b[0],b[1]);case 3:return new f(b[0],b[1],b[2]);case 4:return new f(b[0],b[1],b[2],
b[3]);case 5:return new f(b[0],b[1],b[2],b[3],b[4]);case 6:return new f(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new f(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var a=Ab(f.prototype),b=f.apply(a,b);return Y(b)?b:a}}function Zd(f,b,a){function d(){for(var e=arguments.length,g=Array(e),h=e,m=Zb(d);h--;)g[h]=arguments[h];return h=3>e&&g[0]!==m&&g[e-1]!==m?[]:Ga(g,m),e-=h.length,a>e?Bd(f,b,Wa,d.placeholder,p,g,h,p,p,a-e):k(this&&this!==Ea&&this instanceof d?c:f,this,g)}var c=sc(f);return d}function zd(f){return B(function(b){b=
S(b,1);var a=b.length,d=a,c=ja.prototype.thru;for(f&&b.reverse();d--;){var e=b[d];if("function"!=typeof e)throw new $a("Expected a function");if(c&&!g&&"wrapper"==tc(e))var g=new ja([],!0)}for(d=g?d:a;++d<a;)var e=b[d],c=tc(e),h="wrapper"==c?xe(e):p,g=h&&vc(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?g[tc(h[0])].apply(g,h[3]):1==e.length&&vc(e)?g[c]():g.thru(e);return function(){var f=arguments,d=f[0];if(g&&1==f.length&&K(d)&&200<=d.length)return g.plant(d).value();for(var c=0,f=a?b[c].apply(this,f):
d;++c<a;)f=b[c].call(this,f);return f}})}function Wa(f,b,a,d,c,e,g,h,m,r){function l(){for(var X=arguments.length,y=X,x=Array(X);y--;)x[y]=arguments[y];if(N){var U,I=Zb(l),y=x.length;for(U=0;y--;)x[y]===I&&U++}if(d&&(x=rc(x,d,c,N)),e&&(x=Eb(x,e,g,N)),X-=U,N&&r>X)return I=Ga(x,I),Bd(f,b,Wa,l.placeholder,a,x,I,h,m,r-X);if(I=n?a:this,y=q?I[f]:f,X=x.length,h){U=x.length;for(var H=bb(h.length,U),G=ka(x);H--;){var R=h[H];x[H]=Ba(R,U)?G[R]:p}}else v&&1<X&&x.reverse();return k&&X>m&&(x.length=m),this&&this!==
Ea&&this instanceof l&&(y=u||sc(y)),y.apply(I,x)}var k=128&b,n=1&b,q=2&b,N=24&b,v=512&b,u=q?p:sc(f);return l}function Xb(f,b){return function(a,d){return W(a,f,b(d),{})}}function Ad(f){return B(function(b){return b=n(S(b,1),C()),B(function(a){var d=this;return f(b,function(f){return k(f,d,a)})})})}function Fb(f,b,a){return b=L(b),f=ga(f),b&&b>f?(b-=f,a=a===p?" ":a+"",f=$e(a,ke(b/ga(a))),xa.test(a)?f.match(M).slice(0,b).join(""):f.slice(0,b)):""}function Sc(f,b,a,d){function c(){for(var b=-1,t=arguments.length,
h=-1,m=d.length,r=Array(m+t),l=this&&this!==Ea&&this instanceof c?g:f;++h<m;)r[h]=d[h];for(;t--;)r[h++]=arguments[++b];return k(l,e?a:this,r)}var e=1&b,g=sc(f);return c}function Yb(f){return function(b,a,d){d&&"number"!=typeof d&&Xa(b,a,d)&&(a=d=p);b=pa(b);b=b===b?b:0;a===p?(a=b,b=0):a=pa(a)||0;d=d===p?a>b?1:-1:pa(d)||0;var c=-1;a=oa(ke((a-b)/(d||1)),0);for(var e=Array(a);a--;)e[f?a:++c]=b,b+=d;return e}}function Bd(f,b,a,d,c,e,g,h,m,r){var l=8&b;h=h?ka(h):p;var k=l?g:p;g=l?p:g;var n=l?e:p;return e=
l?p:e,b=(b|(l?32:64))&~(l?64:32),4&b||(b&=-4),b=[f,b,c,n,k,e,g,h,m,r],a=a.apply(p,b),vc(f)&&af(a,b),a.placeholder=d,a}function hb(f){var b=bd[f];return function(f,a){if(f=pa(f),a=L(a)){var d=(Q(f)+"e").split("e"),d=b(d[0]+"e"+(+d[1]+a)),d=(Q(d)+"e").split("e");return+(d[0]+"e"+(+d[1]-a))}return b(f)}}function Na(f,b,a,d,c,e,g,h){var m=2&b;if(!m&&"function"!=typeof f)throw new $a("Expected a function");var r=d?d.length:0;if(r||(b&=-97,d=c=p),g=g===p?g:oa(L(g),0),h=h===p?h:L(h),r-=c?c.length:0,64&b){var l=
d,k=c;d=c=p}var n=m?p:xe(f);return e=[f,b,a,d,c,l,k,e,g,h],n&&(a=e[1],f=n[1],b=a|f,d=128==f&&8==a||128==f&&256==a&&n[8]>=e[7].length||384==f&&n[8]>=n[7].length&&8==a,131>b||d)&&(1&f&&(e[2]=n[2],b|=1&a?0:4),(a=n[3])&&(d=e[3],e[3]=d?rc(d,a,n[4]):ka(a),e[4]=d?Ga(e[3],"__lodash_placeholder__"):ka(n[4])),(a=n[5])&&(d=e[5],e[5]=d?Eb(d,a,n[6]):ka(a),e[6]=d?Ga(e[5],"__lodash_placeholder__"):ka(n[6])),(a=n[7])&&(e[7]=ka(a)),128&f&&(e[8]=null==e[8]?n[8]:bb(e[8],n[8])),null==e[9]&&(e[9]=n[9]),e[0]=n[0],e[1]=
b),f=e[0],b=e[1],a=e[2],d=e[3],c=e[4],h=e[9]=null==e[9]?m?0:f.length:oa(e[9]-r,0),!h&&24&b&&(b&=-25),m=b&&1!=b?8==b||16==b?Zd(f,b,h):32!=b&&33!=b||c.length?Wa.apply(p,e):Sc(f,b,a,d):ld(f,b,a),(n?bf:af)(m,e)}function $d(f,b,a,d,c,e){var g=-1,h=2&c,m=1&c,r=f.length,l=b.length;if(!(r==l||h&&l>r))return!1;if(l=e.get(f))return l==b;l=!0;for(e.set(f,b);++g<r;){var k=f[g],n=b[g];if(d)var q=h?d(n,k,g,b,f,e):d(k,n,g,f,b,e);if(q!==p){if(q)continue;l=!1;break}if(m){if(!F(b,function(f){return k===f||a(k,f,d,
c,e)})){l=!1;break}}else if(k!==n&&!a(k,n,d,c,e)){l=!1;break}}return e["delete"](f),l}function ib(f,b,a,d,c,e){switch(a){case "[object ArrayBuffer]":if(f.byteLength!=b.byteLength||!d(new je(f),new je(b)))break;return!0;case "[object Boolean]":case "[object Date]":return+f==+b;case "[object Error]":return f.name==b.name&&f.message==b.message;case "[object Number]":return f!=+f?b!=+b:f==+b;case "[object RegExp]":case "[object String]":return f==b+"";case "[object Map]":var g=dc;case "[object Set]":return g||
(g=wb),(2&e||f.size==b.size)&&d(g(f),g(b),c,1|e);case "[object Symbol]":return!!Jb&&ye.call(f)==ye.call(b)}return!1}function ae(f,b,a,d,c,e){var g=2&c,h=sa(f),m=h.length,r=sa(b).length;if(m!=r&&!g)return!1;for(var l=m;l--;){var k=h[l];if(!(g?k in b:pd(b,k)))return!1}if(r=e.get(f))return r==b;r=!0;e.set(f,b);for(var n=g;++l<m;){var k=h[l],q=f[k],N=b[k];if(d)var v=g?d(N,q,k,b,f,e):d(q,N,k,f,b,e);if(v===p?q!==N&&!a(q,N,d,c,e):!v){r=!1;break}n||(n="constructor"==k)}return r&&!n&&(a=f.constructor,d=b.constructor,
a!=d&&"constructor"in f&&"constructor"in b&&!("function"==typeof a&&a instanceof a&&"function"==typeof d&&d instanceof d)&&(r=!1)),e["delete"](f),r}function tc(f){for(var b=f.name+"",a=Ld[b],d=ea.call(Ld,b)?a.length:0;d--;){var c=a[d],e=c.func;if(null==e||e==f)return c.name}return b}function C(){var f=d.iteratee||ze,f=f===ze?kc:f;return arguments.length?f(arguments[0],arguments[1]):f}function Tc(f){f=cf(f);for(var b=f.length;b--;){var a,d=f[b];a=f[b][1];a=a===a&&!Y(a);d[2]=a}return f}function uc(f,
b){var a=null==f?p:f[b];return Le(a)?a:p}function Zb(f){return(ea.call(d,"placeholder")?d:f).placeholder}function Oa(f){return Aa.call(f)}function Td(f,b,a){if(null==f)return!1;var d=a(f,b);return d||Ya(b)||(b=Ua(b),f=ac(f,b),null!=f&&(b=na(b),d=a(f,b))),a=f?f.length:p,d||!!a&&ed(a)&&Ba(b,a)&&(K(f)||yc(f)||m(f))}function se(f){var b=f.length,a=f.constructor(b);return b&&"string"==typeof f[0]&&ea.call(f,"index")&&(a.index=f.index,a.input=f.input),a}function te(f){return Pa(f.constructor)&&!Uc(f)?Ab(he(f)):
{}}function ue(f,b,a){var d=f.constructor;switch(b){case "[object ArrayBuffer]":return za(f);case "[object Boolean]":case "[object Date]":return new d(+f);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return b=f.buffer,a=a?za(b):b,new f.constructor(a,f.byteOffset,f.length);case "[object Map]":return a=
f.constructor,x(dc(f),c,new a);case "[object Number]":case "[object String]":return new d(f);case "[object RegExp]":return a=new f.constructor(f.source,nb.exec(f)),a.lastIndex=f.lastIndex,a;case "[object Set]":return a=f.constructor,x(wb(f),l,new a);case "[object Symbol]":return Jb?Object(ye.call(f)):{}}}function Cd(f){var b=f?f.length:p;return ed(b)&&(K(f)||yc(f)||m(f))?ca(b,String):null}function Xa(f,b,a){if(!Y(a))return!1;var d=typeof b;return("number"==d?w(a)&&Ba(b,a.length):"string"==d&&b in
a)?Za(a[b],f):!1}function Ya(f,b){return"number"==typeof f?!0:!K(f)&&(Qa.test(f)||!fd.test(f)||null!=b&&f in Object(b))}function $b(f){var b=typeof f;return"number"==b||"boolean"==b||"string"==b&&"__proto__"!=f||null==f}function vc(f){var b=tc(f),a=d[b];return"function"==typeof a&&b in J.prototype?f===a?!0:(b=xe(a),!!b&&f===b[0]):!1}function Uc(f){var b=f&&f.constructor,b=Pa(b)&&b.prototype||$c;return f===b}function Dd(f,b,a,d,c,e){return Y(f)&&Y(b)&&(e.set(b,f),Db(f,b,p,Dd,e)),f}function ac(f,b){return 1==
b.length?f:Kd(f,Ma(b,0,-1))}function Vc(f){var b=[];return Q(f).replace(Ha,function(f,a,d,c){b.push(d?c.replace(hd,"$1"):a||f)}),b}function Fd(f){if(f instanceof J)return f.clone();var b=new ja(f.__wrapped__,f.__chain__);return b.__actions__=ka(f.__actions__),b.__index__=f.__index__,b.__values__=f.__values__,b}function Gd(f,b,a){var d=f?f.length:0;return d?(b=a||b===p?1:L(b),Ma(f,0>b?0:b,d)):[]}function Ed(f,b,a){var d=f?f.length:0;return d?(b=a||b===p?1:L(b),b=d-b,Ma(f,0,0>b?0:b)):[]}function Fa(f){return f?
f[0]:p}function na(f){var b=f?f.length:0;return b?f[b-1]:p}function be(f,b){return f&&f.length&&b&&b.length?nc(f,b):f}function Wc(f){return f?Df.call(f):f}function Hd(f){if(!f||!f.length)return[];var b=0;return f=q(f,function(f){return fa(f)?(b=oa(f.length,b),!0):void 0}),ca(b,function(b){return n(f,mc(b))})}function ce(f,b){if(!f||!f.length)return[];var a=Hd(f);return null==b?a:n(a,function(f){return k(b,p,f)})}function Pd(f){return f=d(f),f.__chain__=!0,f}function wc(f,b){return b(f)}function de(){return this}
function xc(f,b){return"function"==typeof b&&K(f)?g(f,b):Ib(f,Va(b))}function Id(f,b){var a;if("function"==typeof b&&K(f)){for(a=f.length;a--&&!1!==b(f[a],a,f););a=f}else a=Ae(f,Va(b));return a}function bc(f,b){return(K(f)?n:qd)(f,C(b,3))}function Xc(f,b){var a=-1,d=Be(f),c=d.length,e=c-1;for(b=Tb(L(b),0,c);++a<b;){var c=Oc(a,e),g=d[c];d[c]=d[a];d[a]=g}return d.length=b,d}function Yc(f,b,a){return b=a?p:b,b=f&&null==b?f.length:b,Na(f,128,p,p,p,p,b)}function Hb(f,b){var a;if("function"!=typeof b)throw new $a("Expected a function");
return f=L(f),function(){return 0<--f&&(a=b.apply(this,arguments)),1>=f&&(b=p),a}}function Gb(f,b,a){return b=a?p:b,f=Na(f,8,p,p,p,p,p,b),f.placeholder=Gb.placeholder,f}function Jd(f,b,a){return b=a?p:b,f=Na(f,16,p,p,p,p,p,b),f.placeholder=Jd.placeholder,f}function ee(f,b,a){function d(){q&&Md(q);r&&Md(r);v=0;m=r=n=q=N=p}function c(b,a){a&&Md(a);r=q=N=p;b&&(v=Nd(),l=f.apply(n,m),q||r||(m=n=p))}function e(){var f=b-(Nd()-k);0>=f||f>b?c(N,r):q=ge(e,f)}function g(){c(u,q)}function h(){if(m=arguments,
k=Nd(),n=this,N=u&&(q||!X),!1===y)var a=X&&!q;else{v||r||X||(v=k);var d=y-(k-v),c=(0>=d||d>y)&&(X||r);c?(r&&(r=Md(r)),v=k,l=f.apply(n,m)):r||(r=ge(g,d))}return c&&q?q=Md(q):q||b===y||(q=ge(e,b)),a&&(c=!0,l=f.apply(n,m)),!c||q||r||(m=n=p),l}var m,r,l,k,n,q,N,v=0,X=!1,y=!1,u=!0;if("function"!=typeof f)throw new $a("Expected a function");return b=pa(b)||0,Y(a)&&(X=!!a.leading,y="maxWait"in a&&oa(pa(a.maxWait)||0,b),u="trailing"in a?!!a.trailing:u),h.cancel=d,h.flush=function(){return(q&&N||r&&u)&&(l=
f.apply(n,m)),d(),l},h}function Zc(f,b){if("function"!=typeof f||b&&"function"!=typeof b)throw new $a("Expected a function");var a=function(){var d=arguments,c=b?b.apply(this,d):d[0],e=a.cache;return e.has(c)?e.get(c):(d=f.apply(this,d),a.cache=e.set(c,d),d)};return a.cache=new Zc.Cache,a}function B(f,b){if("function"!=typeof f)throw new $a("Expected a function");return b=oa(b===p?f.length-1:L(b),0),function(){for(var a=arguments,d=-1,c=oa(a.length-b,0),e=Array(c);++d<c;)e[d]=a[b+d];switch(b){case 0:return f.call(this,
e);case 1:return f.call(this,a[0],e);case 2:return f.call(this,a[0],a[1],e)}c=Array(b+1);for(d=-1;++d<b;)c[d]=a[d];return c[b]=e,k(f,this,c)}}function Za(f,b){return f===b||f!==f&&b!==b}function b(f,b){return f>b}function m(f){return fa(f)&&ea.call(f,"callee")&&(!df.call(f,"callee")||"[object Arguments]"==Aa.call(f))}function w(f){return null!=f&&!("function"==typeof f&&Pa(f))&&ed(Ef(f))}function fa(f){return ha(f)&&w(f)}function oe(f){return ha(f)?"[object Error]"==Aa.call(f)||"string"==typeof f.message&&
"string"==typeof f.name:!1}function Pa(f){return f=Y(f)?Aa.call(f):"","[object Function]"==f||"[object GeneratorFunction]"==f}function Ke(f){return"number"==typeof f&&f==L(f)}function ed(f){return"number"==typeof f&&-1<f&&0==f%1&&9007199254740991>=f}function Y(f){var b=typeof f;return!!f&&("object"==b||"function"==b)}function ha(f){return!!f&&"object"==typeof f}function Le(f){return null==f?!1:Pa(f)?ef.test(cc.call(f)):ha(f)&&(cb(f)?ef:Ia).test(f)}function Me(f){return"number"==typeof f||ha(f)&&"[object Number]"==
Aa.call(f)}function pe(f){return!ha(f)||"[object Object]"!=Aa.call(f)||cb(f)?!1:(f=he(f),null===f?!0:(f=f.constructor,"function"==typeof f&&f instanceof f&&cc.call(f)==Ff))}function ff(f){return Y(f)&&"[object RegExp]"==Aa.call(f)}function yc(f){return"string"==typeof f||!K(f)&&ha(f)&&"[object String]"==Aa.call(f)}function gf(f){return"symbol"==typeof f||ha(f)&&"[object Symbol]"==Aa.call(f)}function ad(f){return ha(f)&&ed(f.length)&&!!H[Aa.call(f)]}function Ce(f,b){return b>f}function Be(f){if(!f)return[];
if(w(f))return yc(f)?f.match(M):ka(f);if(zc&&f[zc])return Lb(f[zc]());var b=Oa(f);return("[object Map]"==b?dc:"[object Set]"==b?wb:le)(f)}function L(f){if(!f)return 0===f?f:0;if(f=pa(f),f===lb||f===-lb)return 1.7976931348623157E308*(0>f?-1:1);var b=f%1;return f===f?b?f-b:f:0}function hf(f){return f?Tb(L(f),0,4294967295):0}function pa(f){if(Y(f)&&(f=Pa(f.valueOf)?f.valueOf():f,f=Y(f)?f+"":f),"string"!=typeof f)return 0===f?f:+f;f=f.replace(fc,"");var b=T.test(f);return b||zb.test(f)?Rb(f.slice(2),
b?2:8):id.test(f)?yb:+f}function We(f){return gb(f,ab(f))}function Q(f){if("string"==typeof f)return f;if(null==f)return"";if(gf(f))return Jb?Gf.call(f):"";var b=f+"";return"0"==b&&1/f==-lb?"-0":b}function Kd(f,b,a){return f=null==f?p:Mc(f,b),f===p?a:f}function jf(f,b){return Td(f,b,pd)}function Ve(f,b){return Td(f,b,kd)}function sa(f){var b=Uc(f);if(!b&&!w(f))return Hf(Object(f));var a,d=Cd(f),c=!!d,d=d||[],e=d.length;for(a in f)!pd(f,a)||c&&("length"==a||Ba(a,e))||b&&"constructor"==a||d.push(a);
return d}function ab(f){for(var b=-1,a=Uc(f),d=rd(f),c=d.length,e=Cd(f),g=!!e,e=e||[],h=e.length;++b<c;){var r=d[b];g&&("length"==r||Ba(r,h))||"constructor"==r&&(a||!ea.call(f,r))||e.push(r)}return e}function cf(f){return E(f,sa(f))}function le(f){return f?r(f,sa(f)):[]}function De(f){return kf(Q(f).toLowerCase())}function Ze(f){return(f=Q(f))&&f.replace(Ob,Bc).replace(wa,"")}function $e(f,b){f=Q(f);b=L(b);var a="";if(!f||1>b||9007199254740991<b)return a;do b%2&&(a+=f),b=ie(b/2),f+=f;while(b);return a}
function Ye(b,a,d){return b=Q(b),a=d?p:a,a===p&&(a=Qb.test(b)?Pb:Da),b.match(a)||[]}function Ee(b){return function(){return b}}function jb(b){return b}function ze(b){return kc("function"==typeof b?b:ya(b,!0))}function Fe(b,a,d){var c=sa(a),e=Nc(a,c);null!=d||Y(a)&&(e.length||!c.length)||(d=a,a=b,b=this,e=Nc(a,sa(a)));var h=Y(d)&&"chain"in d?d.chain:!0,r=Pa(b);return g(e,function(d){var c=a[d];b[d]=c;r&&(b.prototype[d]=function(){var a=this.__chain__;if(h||a){var d=b(this.__wrapped__);return(d.__actions__=
ka(this.__actions__)).push({func:c,args:arguments,thisArg:b}),d.__chain__=a,d}return c.apply(b,y([this.value()],arguments))})}),b}function Ge(){}function Ue(b){return Ya(b)?mc(b):sb(b)}function lf(b){return b&&b.length?ba(b,jb):0}I=I?Sa.defaults({},I,Sa.pick(Ea,N)):Ea;var If=I.Date,Jf=I.Error,bd=I.Math,He=I.RegExp,$a=I.TypeError,me=I.Array.prototype,$c=I.Object.prototype,cc=I.Function.prototype.toString,ea=$c.hasOwnProperty,Kf=0,Ff=cc.call(Object),Aa=$c.toString,Lf=Ea._,ef=He("^"+cc.call(ea).replace(la,
"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mf=Qd?I.Buffer:p,nf=I.Reflect,Jb=I.Symbol,je=I.Uint8Array,Md=I.clearTimeout,of=nf?nf.enumerate:p,he=Object.getPrototypeOf,Mf=Object.getOwnPropertySymbols,zc="symbol"==typeof(zc=Jb&&Jb.iterator)?zc:p,Af=Object.create,df=$c.propertyIsEnumerable,ge=I.setTimeout,fe=me.splice,ke=bd.ceil,ie=bd.floor,Nf=I.isFinite,Of=me.join,Hf=Object.keys,oa=bd.max,bb=bd.min,Pf=I.parseInt,Xe=bd.random,Df=me.reverse,vb=uc(I,"Map"),Ac=
uc(I,"Set"),cd=uc(I,"WeakMap"),dd=uc(Object,"create"),ne=cd&&new cd,Qf=vb?cc.call(vb):"",Rf=Ac?cc.call(Ac):"",Sf=cd?cc.call(cd):"",pf=Jb?Jb.prototype:p,ye=Jb?pf.valueOf:p,Gf=Jb?pf.toString:p,Ld={};d.templateSettings={escape:Hc,evaluate:Ic,interpolate:Jc,variable:"",imports:{_:d}};var Ib=Xd(La),Ae=Xd(pb,!0),we=yd(),Te=yd(!0);of&&!df.call({valueOf:1},"valueOf")&&(rd=function(b){return Lb(of(b))});var bf=ne?function(b,a){return ne.set(b,a),b}:jb,Bf=Ac&&2===(new Ac([1,2])).size?function(b){return new Ac(b)}:
Ge,xe=ne?function(b){return ne.get(b)}:Ge,Ef=mc("length"),Cf=Mf||function(){return[]};(vb&&"[object Map]"!=Oa(new vb)||Ac&&"[object Set]"!=Oa(new Ac)||cd&&"[object WeakMap]"!=Oa(new cd))&&(Oa=function(b){var a=Aa.call(b);if(b="[object Object]"==a?b.constructor:null,b="function"==typeof b?cc.call(b):"")switch(b){case Qf:return"[object Map]";case Rf:return"[object Set]";case Sf:return"[object WeakMap]"}return a});var af=function(){var b=0,a=0;return function(d,c){var e=Nd(),g=16-(e-a);if(a=e,0<g){if(150<=
++b)return d}else b=0;return bf(d,c)}}(),Tf=B(function(b,a){K(b)||(b=null==b?[]:[Object(b)]);a=S(a,1);for(var d=b,c=a,e=-1,g=d.length,h=-1,r=c.length,m=Array(g+r);++e<g;)m[e]=d[e];for(;++h<r;)m[e++]=c[h];return m}),Uf=B(function(b,a){return fa(b)?ob(b,S(a,1,!0)):[]}),Vf=B(function(b,a){var d=na(a);return fa(d)&&(d=p),fa(b)?ob(b,S(a,1,!0),C(d)):[]}),Wf=B(function(b,a){var d=na(a);return fa(d)&&(d=p),fa(b)?ob(b,S(a,1,!0),p,d):[]}),Xf=B(function(b){var a=n(b,od);return a.length&&a[0]===b[0]?Bb(a):[]}),
Yf=B(function(b){var a=na(b),d=n(b,od);return a===na(d)?a=p:d.pop(),d.length&&d[0]===b[0]?Bb(d,C(a)):[]}),Zf=B(function(b){var a=na(b),d=n(b,od);return a===na(d)?a=p:d.pop(),d.length&&d[0]===b[0]?Bb(d,p,a):[]}),$f=B(be),ag=B(function(b,a){a=n(S(a,1),String);var d=jc(b,a);return td(b,a.sort(kb)),d}),bg=B(function(b){return tb(S(b,1,!0))}),cg=B(function(b){var a=na(b);return fa(a)&&(a=p),tb(S(b,1,!0),C(a))}),dg=B(function(b){var a=na(b);return fa(a)&&(a=p),tb(S(b,1,!0),p,a)}),eg=B(function(b,a){return fa(b)?
ob(b,a):[]}),fg=B(function(b){return wd(q(b,fa))}),gg=B(function(b){var a=na(b);return fa(a)&&(a=p),wd(q(b,fa),C(a))}),hg=B(function(b){var a=na(b);return fa(a)&&(a=p),wd(q(b,fa),p,a)}),ig=B(Hd),jg=B(function(b){var a=b.length,a=1<a?b[a-1]:p,a="function"==typeof a?(b.pop(),a):p;return ce(b,a)}),kg=B(function(b){b=S(b,1);var a=b.length,d=a?b[0]:0,c=this.__wrapped__,e=function(a){return jc(a,b)};return 1>=a&&!this.__actions__.length&&c instanceof J&&Ba(d)?(c=c.slice(d,+d+(a?1:0)),c.__actions__.push({func:wc,
args:[e],thisArg:p}),(new ja(c,this.__chain__)).thru(function(b){return a&&!b.length&&b.push(p),b})):this.thru(e)}),lg=Rc(function(b,a,d){ea.call(b,d)?++b[d]:b[d]=1}),mg=Rc(function(b,a,d){ea.call(b,d)?b[d].push(a):b[d]=[a]}),ng=B(function(b,a,d){var c=-1,e="function"==typeof a,g=Ya(a),h=w(b)?Array(b.length):[];return Ib(b,function(b){var f=e?a:g&&null!=b?b[a]:p;h[++c]=f?k(f,b,d):Cb(b,a,d)}),h}),og=Rc(function(b,a,d){b[d]=a}),pg=Rc(function(b,a,d){b[d?0:1].push(a)},function(){return[[],[]]}),qg=B(function(b,
a){if(null==b)return[];var d=a.length;return 1<d&&Xa(b,a[0],a[1])?a=[]:2<d&&Xa(a[0],a[1],a[2])&&(a.length=1),Ub(b,S(a,1),[])}),Nd=If.now,Ie=B(function(b,a,d){var c=1;if(d.length)var e=Ga(d,Zb(Ie)),c=32|c;return Na(b,c,a,d,e)}),qf=B(function(b,a,d){var c=3;if(d.length)var e=Ga(d,Zb(qf)),c=32|c;return Na(a,c,b,d,e)}),rg=B(function(b,a){return Rd(b,1,a)}),sg=B(function(b,a,d){return Rd(b,pa(a)||0,d)}),tg=B(function(b,a){a=n(S(a,1),C());var d=a.length;return B(function(c){for(var e=-1,g=bb(c.length,d);++e<
g;)c[e]=a[e].call(this,c[e]);return k(b,this,c)})}),Je=B(function(b,a){var d=Ga(a,Zb(Je));return Na(b,32,p,a,d)}),rf=B(function(b,a){var d=Ga(a,Zb(rf));return Na(b,64,p,a,d)}),ug=B(function(b,a){return Na(b,256,p,p,p,S(a,1))}),K=Array.isArray,Se=mf?function(b){return b instanceof mf}:Ee(!1),vg=ma(function(b,a){gb(a,sa(a),b)}),sf=ma(function(b,a){gb(a,ab(a),b)}),Od=ma(function(b,a,d,c){Qc(a,ab(a),b,c)}),wg=ma(function(b,a,d,c){Qc(a,sa(a),b,c)}),xg=B(function(b,a){return jc(b,S(a,1))}),yg=B(function(b){return b.push(p,
ic),k(Od,p,b)}),zg=B(function(b){return b.push(p,Dd),k(tf,p,b)}),Ag=Xb(function(b,a,d){b[a]=d},Ee(jb)),Bg=Xb(function(b,a,d){ea.call(b,a)?b[a].push(d):b[a]=[d]},C),Cg=B(Cb),Dg=ma(function(b,a,d){Db(b,a,d)}),tf=ma(function(b,a,d,c){Db(b,a,d,c)}),Eg=B(function(b,a){return null==b?{}:(a=n(S(a,1),String),sd(b,ob(ab(b),a)))}),Fg=B(function(b,a){return null==b?{}:sd(b,S(a,1))}),Gg=ub(function(b,a,d){return a=a.toLowerCase(),b+(d?De(a):a)}),Hg=ub(function(b,a,d){return b+(d?"-":"")+a.toLowerCase()}),Ig=
ub(function(b,a,d){return b+(d?" ":"")+a.toLowerCase()}),Jg=Yd("toLowerCase"),kf=Yd("toUpperCase"),Kg=ub(function(b,a,d){return b+(d?"_":"")+a.toLowerCase()}),Lg=ub(function(b,a,d){return b+(d?" ":"")+De(a)}),Mg=ub(function(b,a,d){return b+(d?" ":"")+a.toUpperCase()}),uf=B(function(b,a){try{return k(b,p,a)}catch(d){return oe(d)?d:new Jf(d)}}),Ng=B(function(b,a){return g(S(a,1),function(a){b[a]=Ie(b[a],b)}),b}),Og=zd(),Pg=zd(!0),Qg=B(function(b,a){return function(d){return Cb(d,b,a)}}),Rg=B(function(b,
a){return function(d){return Cb(b,d,a)}}),Sg=Ad(n),Tg=Ad(h),Ug=Ad(F),Vg=Yb(),Wg=Yb(!0),Xg=hb("ceil"),Yg=hb("floor"),Zg=hb("round");return d.prototype=da.prototype,ja.prototype=Ab(da.prototype),ja.prototype.constructor=ja,J.prototype=Ab(da.prototype),J.prototype.constructor=J,ia.prototype=dd?dd(null):$c,Ja.prototype.clear=function(){this.__data__={hash:new ia,map:vb?new vb:[],string:new ia}},Ja.prototype["delete"]=function(b){var a=this.__data__;return $b(b)?(a="string"==typeof b?a.string:a.hash,(dd?
a[b]!==p:ea.call(a,b))&&delete a[b]):vb?a.map["delete"](b):eb(a.map,b)},Ja.prototype.get=function(b){var a=this.__data__;return $b(b)?(a="string"==typeof b?a.string:a.hash,dd?(b=a[b],b="__lodash_hash_undefined__"===b?p:b):b=ea.call(a,b)?a[b]:p,b):vb?a.map.get(b):gc(a.map,b)},Ja.prototype.has=function(b){var a=this.__data__;return $b(b)?(a="string"==typeof b?a.string:a.hash,b=dd?a[b]!==p:ea.call(a,b)):b=vb?a.map.has(b):-1<Ka(a.map,b),b},Ja.prototype.set=function(b,a){var d=this.__data__;return $b(b)?
("string"==typeof b?d.string:d.hash)[b]=dd&&a===p?"__lodash_hash_undefined__":a:vb?d.map.set(b,a):Sb(d.map,b,a),this},qa.prototype.push=function(b){var a=this.__data__;$b(b)?(a=a.__data__,("string"==typeof b?a.string:a.hash)[b]="__lodash_hash_undefined__"):a.set(b,"__lodash_hash_undefined__")},Ta.prototype.clear=function(){this.__data__={array:[],map:null}},Ta.prototype["delete"]=function(b){var a=this.__data__,d=a.array;return d?eb(d,b):a.map["delete"](b)},Ta.prototype.get=function(b){var a=this.__data__,
d=a.array;return d?gc(d,b):a.map.get(b)},Ta.prototype.has=function(b){var a=this.__data__,d=a.array;return d?-1<Ka(d,b):a.map.has(b)},Ta.prototype.set=function(b,a){var d=this.__data__,c=d.array;return c&&(199>c.length?Sb(c,b,a):(d.array=null,d.map=new Ja(c))),(d=d.map)&&d.set(b,a),this},Zc.Cache=Ja,d.after=function(b,a){if("function"!=typeof a)throw new $a("Expected a function");return b=L(b),function(){return 1>--b?a.apply(this,arguments):void 0}},d.ary=Yc,d.assign=vg,d.assignIn=sf,d.assignInWith=
Od,d.assignWith=wg,d.at=xg,d.before=Hb,d.bind=Ie,d.bindAll=Ng,d.bindKey=qf,d.castArray=function(){if(!arguments.length)return[];var b=arguments[0];return K(b)?b:[b]},d.chain=Pd,d.chunk=function(b,a){a=oa(L(a),0);var d=b?b.length:0;if(!d||1>a)return[];for(var c=0,e=-1,g=Array(ke(d/a));d>c;)g[++e]=Ma(b,c,c+=a);return g},d.compact=function(b){for(var a=-1,d=b?b.length:0,c=-1,e=[];++a<d;){var g=b[a];g&&(e[++c]=g)}return e},d.concat=Tf,d.cond=function(b){var a=b?b.length:0,d=C();return b=a?n(b,function(b){if("function"!=
typeof b[1])throw new $a("Expected a function");return[d(b[0]),b[1]]}):[],B(function(d){for(var c=-1;++c<a;){var e=b[c];if(k(e[0],this,d))return k(e[1],this,d)}})},d.conforms=function(b){return Lc(ya(b,!0))},d.constant=Ee,d.countBy=lg,d.create=function(b,a){var d=Ab(b);return a?nd(d,a):d},d.curry=Gb,d.curryRight=Jd,d.debounce=ee,d.defaults=yg,d.defaultsDeep=zg,d.defer=rg,d.delay=sg,d.difference=Uf,d.differenceBy=Vf,d.differenceWith=Wf,d.drop=Gd,d.dropRight=Ed,d.dropRightWhile=function(b,a){return b&&
b.length?qc(b,C(a,3),!0,!0):[]},d.dropWhile=function(b,a){return b&&b.length?qc(b,C(a,3),!0):[]},d.fill=function(b,a,d,c){var e=b?b.length:0;if(!e)return[];d&&"number"!=typeof d&&Xa(b,a,d)&&(d=0,c=e);e=b.length;d=L(d);0>d&&(d=-d>e?0:e+d);c=c===p||c>e?e:L(c);0>c&&(c+=e);for(c=d>c?0:hf(c);c>d;)b[d++]=a;return b},d.filter=function(b,a){return(K(b)?q:fb)(b,C(a,3))},d.flatMap=function(b,a){return S(bc(b,a),1)},d.flatten=function(b){return b&&b.length?S(b,1):[]},d.flattenDeep=function(b){return b&&b.length?
S(b,lb):[]},d.flattenDepth=function(b,a){return b&&b.length?(a=a===p?1:L(a),S(b,a)):[]},d.flip=function(b){return Na(b,512)},d.flow=Og,d.flowRight=Pg,d.fromPairs=function(b){for(var a=-1,d=b?b.length:0,c={};++a<d;){var e=b[a];c[e[0]]=e[1]}return c},d.functions=function(b){return null==b?[]:Nc(b,sa(b))},d.functionsIn=function(b){return null==b?[]:Nc(b,ab(b))},d.groupBy=mg,d.initial=function(b){return Ed(b,1)},d.intersection=Xf,d.intersectionBy=Yf,d.intersectionWith=Zf,d.invert=Ag,d.invertBy=Bg,d.invokeMap=
ng,d.iteratee=ze,d.keyBy=og,d.keys=sa,d.keysIn=ab,d.map=bc,d.mapKeys=function(b,a){var d={};return a=C(a,3),La(b,function(b,f,c){d[a(b,f,c)]=b}),d},d.mapValues=function(b,a){var d={};return a=C(a,3),La(b,function(b,f,c){d[f]=a(b,f,c)}),d},d.matches=function(b){return Vb(ya(b,!0))},d.matchesProperty=function(b,a){return Ud(b,ya(a,!0))},d.memoize=Zc,d.merge=Dg,d.mergeWith=tf,d.method=Qg,d.methodOf=Rg,d.mixin=Fe,d.negate=function(b){if("function"!=typeof b)throw new $a("Expected a function");return function(){return!b.apply(this,
arguments)}},d.nthArg=function(b){return b=L(b),function(){return arguments[b]}},d.omit=Eg,d.omitBy=function(b,a){return a=C(a),lc(b,function(b,f){return!a(b,f)})},d.once=function(b){return Hb(2,b)},d.orderBy=function(b,a,d,c){return null==b?[]:(K(a)||(a=null==a?[]:[a]),d=c?p:d,K(d)||(d=null==d?[]:[d]),Ub(b,a,d))},d.over=Sg,d.overArgs=tg,d.overEvery=Tg,d.overSome=Ug,d.partial=Je,d.partialRight=rf,d.partition=pg,d.pick=Fg,d.pickBy=function(b,a){return null==b?{}:lc(b,C(a))},d.property=Ue,d.propertyOf=
function(b){return function(a){return null==b?p:Mc(b,a)}},d.pull=$f,d.pullAll=be,d.pullAllBy=function(b,a,d){return b&&b.length&&a&&a.length?nc(b,a,C(d)):b},d.pullAt=ag,d.range=Vg,d.rangeRight=Wg,d.rearg=ug,d.reject=function(b,a){var d=K(b)?q:fb;return a=C(a,3),d(b,function(b,f,d){return!a(b,f,d)})},d.remove=function(b,a){var d=[];if(!b||!b.length)return d;var c=-1,e=[],g=b.length;for(a=C(a,3);++c<g;){var h=b[c];a(h,c,b)&&(d.push(h),e.push(c))}return td(b,e),d},d.rest=B,d.reverse=Wc,d.sampleSize=
Xc,d.set=function(b,a,d){return null==b?b:Pc(b,a,d)},d.setWith=function(b,a,d,c){return c="function"==typeof c?c:p,null==b?b:Pc(b,a,d,c)},d.shuffle=function(b){return Xc(b,4294967295)},d.slice=function(b,a,d){var c=b?b.length:0;return c?(d&&"number"!=typeof d&&Xa(b,a,d)?(a=0,d=c):(a=null==a?0:L(a),d=d===p?c:L(d)),Ma(b,a,d)):[]},d.sortBy=qg,d.sortedUniq=function(b){return b&&b.length?ud(b):[]},d.sortedUniqBy=function(b,a){return b&&b.length?ud(b,C(a)):[]},d.split=function(b,a,d){return Q(b).split(a,
d)},d.spread=function(b,a){if("function"!=typeof b)throw new $a("Expected a function");return a=a===p?0:oa(L(a),0),B(function(d){var c=d[a];return d=d.slice(0,a),c&&y(d,c),k(b,this,d)})},d.tail=function(b){return Gd(b,1)},d.take=function(b,a,d){return b&&b.length?(a=d||a===p?1:L(a),Ma(b,0,0>a?0:a)):[]},d.takeRight=function(b,a,d){var c=b?b.length:0;return c?(a=d||a===p?1:L(a),a=c-a,Ma(b,0>a?0:a,c)):[]},d.takeRightWhile=function(b,a){return b&&b.length?qc(b,C(a,3),!1,!0):[]},d.takeWhile=function(b,
a){return b&&b.length?qc(b,C(a,3)):[]},d.tap=function(b,a){return a(b),b},d.throttle=function(b,a,d){var c=!0,e=!0;if("function"!=typeof b)throw new $a("Expected a function");return Y(d)&&(c="leading"in d?!!d.leading:c,e="trailing"in d?!!d.trailing:e),ee(b,a,{leading:c,maxWait:a,trailing:e})},d.thru=wc,d.toArray=Be,d.toPairs=cf,d.toPairsIn=function(b){return E(b,ab(b))},d.toPath=function(b){return K(b)?n(b,String):Vc(b)},d.toPlainObject=We,d.transform=function(b,a,d){var c=K(b)||ad(b);if(a=C(a,4),
null==d)if(c||Y(b)){var e=b.constructor;d=c?K(b)?new e:[]:Pa(e)?Ab(he(b)):{}}else d={};return(c?g:La)(b,function(b,f,c){return a(d,b,f,c)}),d},d.unary=function(b){return Yc(b,1)},d.union=bg,d.unionBy=cg,d.unionWith=dg,d.uniq=function(b){return b&&b.length?tb(b):[]},d.uniqBy=function(b,a){return b&&b.length?tb(b,C(a)):[]},d.uniqWith=function(b,a){return b&&b.length?tb(b,p,a):[]},d.unset=function(b,a){var d;if(null==b)d=!0;else{d=b;var c=a,c=Ya(c,d)?[c+""]:Ua(c);d=ac(d,c);c=na(c);d=null!=d&&jf(d,c)?
delete d[c]:!0}return d},d.unzip=Hd,d.unzipWith=ce,d.values=le,d.valuesIn=function(b){return null==b?[]:r(b,ab(b))},d.without=eg,d.words=Ye,d.wrap=function(b,a){return a=null==a?jb:a,Je(a,b)},d.xor=fg,d.xorBy=gg,d.xorWith=hg,d.zip=ig,d.zipObject=function(b,a){return xd(b||[],a||[],Z)},d.zipObjectDeep=function(b,a){return xd(b||[],a||[],Pc)},d.zipWith=jg,d.extend=sf,d.extendWith=Od,Fe(d,d),d.add=function(b,a){var d;return b===p&&a===p?0:(b!==p&&(d=b),a!==p&&(d=d===p?a:d+a),d)},d.attempt=uf,d.camelCase=
Gg,d.capitalize=De,d.ceil=Xg,d.clamp=function(b,a,d){return d===p&&(d=a,a=p),d!==p&&(d=pa(d),d=d===d?d:0),a!==p&&(a=pa(a),a=a===a?a:0),Tb(pa(b),a,d)},d.clone=function(b){return ya(b)},d.cloneDeep=function(b){return ya(b,!0)},d.cloneDeepWith=function(b,a){return ya(b,!0,a)},d.cloneWith=function(b,a){return ya(b,!1,a)},d.deburr=Ze,d.endsWith=function(b,a,d){b=Q(b);a="string"==typeof a?a:a+"";var c=b.length;return d=d===p?c:Tb(L(d),0,c),d-=a.length,0<=d&&b.indexOf(a,d)==d},d.eq=Za,d.escape=function(b){return(b=
Q(b))&&Gc.test(b)?b.replace(mb,Cc):b},d.escapeRegExp=function(b){return(b=Q(b))&&Ca.test(b)?b.replace(la,"\\$&"):b},d.every=function(b,a,d){var c=K(b)?h:Sd;return d&&Xa(b,a,d)&&(a=p),c(b,C(a,3))},d.find=function(b,a){if(a=C(a,3),K(b)){var d=D(b,a);return-1<d?b[d]:p}return A(b,a,Ib)},d.findIndex=function(b,a){return b&&b.length?D(b,C(a,3)):-1},d.findKey=function(b,a){return A(b,C(a,3),La,!0)},d.findLast=function(b,a){if(a=C(a,3),K(b)){var d=D(b,a,!0);return-1<d?b[d]:p}return A(b,a,Ae)},d.findLastIndex=
function(b,a){return b&&b.length?D(b,C(a,3),!0):-1},d.findLastKey=function(b,a){return A(b,C(a,3),pb,!0)},d.floor=Yg,d.forEach=xc,d.forEachRight=Id,d.forIn=function(b,a){return null==b?b:we(b,Va(a),ab)},d.forInRight=function(b,a){return null==b?b:Te(b,Va(a),ab)},d.forOwn=function(b,a){return b&&La(b,Va(a))},d.forOwnRight=function(b,a){return b&&pb(b,Va(a))},d.get=Kd,d.gt=b,d.gte=function(b,a){return b>=a},d.has=jf,d.hasIn=Ve,d.head=Fa,d.identity=jb,d.includes=function(b,a,d,c){return b=w(b)?b:le(b),
d=d&&!c?L(d):0,c=b.length,0>d&&(d=oa(c+d,0)),yc(b)?c>=d&&-1<b.indexOf(a,d):!!c&&-1<u(b,a,d)},d.indexOf=function(b,a,d){var c=b?b.length:0;return c?(d=L(d),0>d&&(d=oa(c+d,0)),u(b,a,d)):-1},d.inRange=function(b,a,d){return a=pa(a)||0,d===p?(d=a,a=0):d=pa(d)||0,b=pa(b),b>=bb(a,d)&&b<oa(a,d)},d.invoke=Cg,d.isArguments=m,d.isArray=K,d.isArrayBuffer=function(b){return ha(b)&&"[object ArrayBuffer]"==Aa.call(b)},d.isArrayLike=w,d.isArrayLikeObject=fa,d.isBoolean=function(b){return!0===b||!1===b||ha(b)&&"[object Boolean]"==
Aa.call(b)},d.isBuffer=Se,d.isDate=function(b){return ha(b)&&"[object Date]"==Aa.call(b)},d.isElement=function(b){return!!b&&1===b.nodeType&&ha(b)&&!pe(b)},d.isEmpty=function(b){if(w(b)&&(K(b)||yc(b)||Pa(b.splice)||m(b)))return!b.length;for(var a in b)if(ea.call(b,a))return!1;return!0},d.isEqual=function(b,a){return qb(b,a)},d.isEqualWith=function(b,a,d){var c=(d="function"==typeof d?d:p)?d(b,a):p;return c===p?qb(b,a,d):!!c},d.isError=oe,d.isFinite=function(b){return"number"==typeof b&&Nf(b)},d.isFunction=
Pa,d.isInteger=Ke,d.isLength=ed,d.isMap=function(b){return ha(b)&&"[object Map]"==Oa(b)},d.isMatch=function(b,a){return b===a||rb(b,a,Tc(a))},d.isMatchWith=function(b,a,d){return d="function"==typeof d?d:p,rb(b,a,Tc(a),d)},d.isNaN=function(b){return Me(b)&&b!=+b},d.isNative=Le,d.isNil=function(b){return null==b},d.isNull=function(b){return null===b},d.isNumber=Me,d.isObject=Y,d.isObjectLike=ha,d.isPlainObject=pe,d.isRegExp=ff,d.isSafeInteger=function(b){return Ke(b)&&-9007199254740991<=b&&9007199254740991>=
b},d.isSet=function(b){return ha(b)&&"[object Set]"==Oa(b)},d.isString=yc,d.isSymbol=gf,d.isTypedArray=ad,d.isUndefined=function(b){return b===p},d.isWeakMap=function(b){return ha(b)&&"[object WeakMap]"==Oa(b)},d.isWeakSet=function(b){return ha(b)&&"[object WeakSet]"==Aa.call(b)},d.join=function(b,a){return b?Of.call(b,a):""},d.kebabCase=Hg,d.last=na,d.lastIndexOf=function(b,a,d){var c=b?b.length:0;if(!c)return-1;var e=c;if(d!==p&&(e=L(d),e=(0>e?oa(c+e,0):bb(e,c-1))+1),a!==a)return Kb(b,e,!0);for(;e--;)if(b[e]===
a)return e;return-1},d.lowerCase=Ig,d.lowerFirst=Jg,d.lt=Ce,d.lte=function(b,a){return a>=b},d.max=function(a){return a&&a.length?z(a,jb,b):p},d.maxBy=function(a,d){return a&&a.length?z(a,C(d),b):p},d.mean=function(b){return lf(b)/(b?b.length:0)},d.min=function(b){return b&&b.length?z(b,jb,Ce):p},d.minBy=function(b,a){return b&&b.length?z(b,C(a),Ce):p},d.noConflict=function(){return Ea._===this&&(Ea._=Lf),this},d.noop=Ge,d.now=Nd,d.pad=function(b,a,d){b=Q(b);a=L(a);var c=ga(b);return a&&a>c?(c=(a-
c)/2,a=ie(c),c=ke(c),Fb("",a,d)+b+Fb("",c,d)):b},d.padEnd=function(b,a,d){return b=Q(b),b+Fb(b,a,d)},d.padStart=function(b,a,d){return b=Q(b),Fb(b,a,d)+b},d.parseInt=function(b,a,d){return d||null==a?a=0:a&&(a=+a),b=Q(b).replace(fc,""),Pf(b,a||(aa.test(b)?16:10))},d.random=function(b,a,d){if(d&&"boolean"!=typeof d&&Xa(b,a,d)&&(a=d=p),d===p&&("boolean"==typeof a?(d=a,a=p):"boolean"==typeof b&&(d=b,b=p)),b===p&&a===p?(b=0,a=1):(b=pa(b)||0,a===p?(a=b,b=0):a=pa(a)||0),b>a){var c=b;b=a;a=c}return d||b%
1||a%1?(d=Xe(),bb(b+d*(a-b+qe("1e-"+((d+"").length-1))),a)):Oc(b,a)},d.reduce=function(b,a,d){var c=K(b)?x:G,e=3>arguments.length;return c(b,C(a,4),d,e,Ib)},d.reduceRight=function(b,a,d){var c=K(b)?O:G,e=3>arguments.length;return c(b,C(a,4),d,e,Ae)},d.repeat=$e,d.replace=function(){var b=arguments,a=Q(b[0]);return 3>b.length?a:a.replace(b[1],b[2])},d.result=function(b,a,d){if(Ya(a,b))c=null==b?p:b[a];else{a=Ua(a);var c=Kd(b,a);b=ac(b,a)}return c===p&&(c=d),Pa(c)?c.call(b):c},d.round=Zg,d.runInContext=
db,d.sample=function(b){b=w(b)?b:le(b);var a=b.length;return 0<a?b[Oc(0,a-1)]:p},d.size=function(b){if(null==b)return 0;if(w(b)){var a=b.length;return a&&yc(b)?ga(b):a}return sa(b).length},d.snakeCase=Kg,d.some=function(b,a,d){var c=K(b)?F:Vd;return d&&Xa(b,a,d)&&(a=p),c(b,C(a,3))},d.sortedIndex=function(b,a){return oc(b,a)},d.sortedIndexBy=function(b,a,d){return pc(b,a,C(d))},d.sortedIndexOf=function(b,a){var d=b?b.length:0;if(d){var c=oc(b,a);if(d>c&&Za(b[c],a))return c}return-1},d.sortedLastIndex=
function(b,a){return oc(b,a,!0)},d.sortedLastIndexBy=function(b,a,d){return pc(b,a,C(d),!0)},d.sortedLastIndexOf=function(b,a){if(b&&b.length){var d=oc(b,a,!0)-1;if(Za(b[d],a))return d}return-1},d.startCase=Lg,d.startsWith=function(b,a,d){return b=Q(b),d=Tb(L(d),0,b.length),b.lastIndexOf(a,d)==d},d.subtract=function(b,a){var d;return b===p&&a===p?0:(b!==p&&(d=b),a!==p&&(d=d===p?a:d-a),d)},d.sum=lf,d.sumBy=function(b,a){return b&&b.length?ba(b,C(a)):0},d.template=function(b,a,c){var e=d.templateSettings;
c&&Xa(b,a,c)&&(a=p);b=Q(b);a=Od({},a,e,ic);c=Od({},a.imports,e.imports,ic);var g,h,m=sa(c),l=r(c,m),k=0;c=a.interpolate||ua;var n="__p+='";c=He((a.escape||ua).source+"|"+c.source+"|"+(c===Jc?V:ua).source+"|"+(a.evaluate||ua).source+"|$","g");var q="sourceURL"in a?"//# sourceURL="+a.sourceURL+"\n":"";if(b.replace(c,function(a,d,c,e,r,m){return c||(c=e),n+=b.slice(k,m).replace(va,Dc),d&&(g=!0,n+="'+__e("+d+")+'"),r&&(h=!0,n+="';"+r+";\n__p+='"),c&&(n+="'+((__t=("+c+"))==null?'':__t)+'"),k=m+a.length,
a}),n+="';",(a=a.variable)||(n="with(obj){"+n+"}"),n=(h?n.replace(Ec,""):n).replace(ec,"$1").replace(Fc,"$1;"),n="function("+(a||"obj")+"){"+(a?"":"obj||(obj={});")+"var __t,__p=''"+(g?",__e=_.escape":"")+(h?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+n+"return __p}",a=uf(function(){return Function(m,q+"return "+n).apply(p,l)}),a.source=n,oe(a))throw a;return a},d.times=function(b,a){if(b=L(b),1>b||9007199254740991<b)return[];var d=4294967295,c=bb(b,4294967295);
a=Va(a);b-=4294967295;for(c=ca(c,a);++d<b;)a(d);return c},d.toInteger=L,d.toLength=hf,d.toLower=function(b){return Q(b).toLowerCase()},d.toNumber=pa,d.toSafeInteger=function(b){return Tb(L(b),-9007199254740991,9007199254740991)},d.toString=Q,d.toUpper=function(b){return Q(b).toUpperCase()},d.trim=function(b,a,d){return(b=Q(b))?d||a===p?b.replace(fc,""):(a+="")?(b=b.match(M),a=a.match(M),b.slice(U(b,a),X(b,a)+1).join("")):b:b},d.trimEnd=function(b,a,d){return(b=Q(b))?d||a===p?b.replace(gd,""):(a+=
"")?(b=b.match(M),b.slice(0,X(b,a.match(M))+1).join("")):b:b},d.trimStart=function(b,a,d){return(b=Q(b))?d||a===p?b.replace(Ra,""):(a+="")?(b=b.match(M),b.slice(U(b,a.match(M))).join("")):b:b},d.truncate=function(b,a){var d=30,c="...";if(Y(a))var e="separator"in a?a.separator:e,d="length"in a?L(a.length):d,c="omission"in a?Q(a.omission):c;b=Q(b);var g=b.length;if(xa.test(b))var h=b.match(M),g=h.length;if(d>=g)return b;if(g=d-ga(c),1>g)return c;if(d=h?h.slice(0,g).join(""):b.slice(0,g),e===p)return d+
c;if(h&&(g+=d.length-g),ff(e)){if(b.slice(g).search(e)){var r=d;e.global||(e=He(e.source,Q(nb.exec(e))+"g"));for(e.lastIndex=0;h=e.exec(r);)var m=h.index;d=d.slice(0,m===p?g:m)}}else b.indexOf(e,g)!=g&&(e=d.lastIndexOf(e),-1<e&&(d=d.slice(0,e)));return d+c},d.unescape=function(b){return(b=Q(b))&&Nb.test(b)?b.replace(Mb,xb):b},d.uniqueId=function(b){var a=++Kf;return Q(b)+a},d.upperCase=Mg,d.upperFirst=kf,d.each=xc,d.eachRight=Id,d.first=Fa,Fe(d,function(){var b={};return La(d,function(a,c){ea.call(d.prototype,
c)||(b[c]=a)}),b}(),{chain:!1}),d.VERSION="4.5.1",g("bind bindKey curry curryRight partial partialRight".split(" "),function(b){d[b].placeholder=d}),g(["drop","take"],function(b,a){J.prototype[b]=function(d){var c=this.__filtered__;if(c&&!a)return new J(this);d=d===p?1:oa(L(d),0);var e=this.clone();return c?e.__takeCount__=bb(d,e.__takeCount__):e.__views__.push({size:bb(d,4294967295),type:b+(0>e.__dir__?"Right":"")}),e};J.prototype[b+"Right"]=function(a){return this.reverse()[b](a).reverse()}}),g(["filter",
"map","takeWhile"],function(b,a){var d=a+1,c=1==d||3==d;J.prototype[b]=function(b){var a=this.clone();return a.__iteratees__.push({iteratee:C(b,3),type:d}),a.__filtered__=a.__filtered__||c,a}}),g(["head","last"],function(b,a){var d="take"+(a?"Right":"");J.prototype[b]=function(){return this[d](1).value()[0]}}),g(["initial","tail"],function(b,a){var d="drop"+(a?"":"Right");J.prototype[b]=function(){return this.__filtered__?new J(this):this[d](1)}}),J.prototype.compact=function(){return this.filter(jb)},
J.prototype.find=function(b){return this.filter(b).head()},J.prototype.findLast=function(b){return this.reverse().find(b)},J.prototype.invokeMap=B(function(b,a){return"function"==typeof b?new J(this):this.map(function(d){return Cb(d,b,a)})}),J.prototype.reject=function(b){return b=C(b,3),this.filter(function(a){return!b(a)})},J.prototype.slice=function(b,a){b=L(b);var d=this;return d.__filtered__&&(0<b||0>a)?new J(d):(0>b?d=d.takeRight(-b):b&&(d=d.drop(b)),a!==p&&(a=L(a),d=0>a?d.dropRight(-a):d.take(a-
b)),d)},J.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},J.prototype.toArray=function(){return this.take(4294967295)},La(J.prototype,function(b,a){var c=/^(?:filter|find|map|reject)|While$/.test(a),e=/^(?:head|last)$/.test(a),g=d[e?"take"+("last"==a?"Right":""):a],h=e||/^find/.test(a);g&&(d.prototype[a]=function(){var a=this.__wrapped__,r=e?[1]:arguments,m=a instanceof J,l=r[0],k=m||K(a),n=function(b){return b=g.apply(d,y([b],r)),e&&q?b[0]:b};k&&c&&"function"==
typeof l&&1!=l.length&&(m=k=!1);var q=this.__chain__,N=!!this.__actions__.length,l=h&&!q,m=m&&!N;return!h&&k?(a=m?a:new J(this),a=b.apply(a,r),a.__actions__.push({func:wc,args:[n],thisArg:p}),new ja(a,q)):l&&m?b.apply(this,r):(a=this.thru(n),l?e?a.value()[0]:a.value():a)})}),g("pop push shift sort splice unshift".split(" "),function(b){var a=me[b],c=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",e=/^(?:pop|shift)$/.test(b);d.prototype[b]=function(){var b=arguments;return e&&!this.__chain__?a.apply(this.value(),
b):this[c](function(d){return a.apply(d,b)})}}),La(J.prototype,function(b,a){var c=d[a];if(c){var e=c.name+"";(Ld[e]||(Ld[e]=[])).push({name:a,func:c})}}),Ld[Wa(p,2).name]=[{name:"wrapper",func:p}],J.prototype.clone=function(){var b=new J(this.__wrapped__);return b.__actions__=ka(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=ka(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=ka(this.__views__),b},J.prototype.reverse=function(){if(this.__filtered__){var b=
new J(this);b.__dir__=-1;b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b},J.prototype.value=function(){var b,a=this.__wrapped__.value(),d=this.__dir__,c=K(a),e=0>d,g=c?a.length:0;b=0;for(var h=g,r=this.__views__,m=-1,l=r.length;++m<l;){var k=r[m],n=k.size;switch(k.type){case "drop":b+=n;break;case "dropRight":h-=n;break;case "take":h=bb(h,b+n);break;case "takeRight":b=oa(b,h-n)}}if(b={start:b,end:h},h=b.start,r=b.end,b=r-h,e=e?r:h-1,h=this.__iteratees__,r=h.length,m=0,l=bb(b,this.__takeCount__),
!c||200>g||g==b&&l==b)return vd(a,this.__actions__);c=[];a:for(;b--&&l>m;){e+=d;g=-1;for(k=a[e];++g<r;){var q=h[g],n=q.type,q=(0,q.iteratee)(k);if(2==n)k=q;else if(!q){if(1==n)continue a;break a}}c[m++]=k}return c},d.prototype.at=kg,d.prototype.chain=function(){return Pd(this)},d.prototype.commit=function(){return new ja(this.value(),this.__chain__)},d.prototype.flatMap=function(b){return this.map(b).flatten()},d.prototype.next=function(){this.__values__===p&&(this.__values__=Be(this.value()));var b=
this.__index__>=this.__values__.length,a=b?p:this.__values__[this.__index__++];return{done:b,value:a}},d.prototype.plant=function(b){for(var a,d=this;d instanceof da;){var c=Fd(d);c.__index__=0;c.__values__=p;a?e.__wrapped__=c:a=c;var e=c,d=d.__wrapped__}return e.__wrapped__=b,a},d.prototype.reverse=function(){var b=this.__wrapped__;return b instanceof J?(this.__actions__.length&&(b=new J(this)),b=b.reverse(),b.__actions__.push({func:wc,args:[Wc],thisArg:p}),new ja(b,this.__chain__)):this.thru(Wc)},
d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=function(){return vd(this.__wrapped__,this.__actions__)},zc&&(d.prototype[zc]=de),d}var p,lb=1/0,yb=NaN,Ec=/\b__p\+='';/g,ec=/\b(__p\+=)''\+/g,Fc=/(__e\(.*?\)|\b__t\))\+'';/g,Mb=/&(?:amp|lt|gt|quot|#39|#96);/g,mb=/[&<>"'`]/g,Nb=RegExp(Mb.source),Gc=RegExp(mb.source),Hc=/<%-([\s\S]+?)%>/g,Ic=/<%([\s\S]+?)%>/g,Jc=/<%=([\s\S]+?)%>/g,fd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qa=/^\w*$/,Ha=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,
la=/[\\^$.*+?()[\]{}|]/g,Ca=RegExp(la.source),fc=/^\s+|\s+$/g,Ra=/^\s+/,gd=/\s+$/,hd=/\\(\\)?/g,V=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nb=/\w*$/,aa=/^0x/i,id=/^[-+]0x[0-9a-f]+$/i,T=/^0b[01]+$/i,Ia=/^\[object .+?Constructor\]$/,zb=/^0o[0-7]+$/i,ia=/^(?:0|[1-9]\d*)$/,Ob=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,ua=/($^)/,va=/['\n\r\u2028\u2029\\]/g,wa=/[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]/g,M=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,
xa=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ufe0e\ufe0f]/,Da=/[a-zA-Z0-9]+/g,Pb=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+|[A-Z\xc0-\xd6\xd8-\xde]+|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,
Qb=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,N="Array Buffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),H={};H["[object Float32Array]"]=H["[object Float64Array]"]=H["[object Int8Array]"]=H["[object Int16Array]"]=H["[object Int32Array]"]=H["[object Uint8Array]"]=H["[object Uint8ClampedArray]"]=
H["[object Uint16Array]"]=H["[object Uint32Array]"]=!0;H["[object Arguments]"]=H["[object Array]"]=H["[object ArrayBuffer]"]=H["[object Boolean]"]=H["[object Date]"]=H["[object Error]"]=H["[object Function]"]=H["[object Map]"]=H["[object Number]"]=H["[object Object]"]=H["[object RegExp]"]=H["[object Set]"]=H["[object String]"]=H["[object WeakMap]"]=!1;var P={};P["[object Arguments]"]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=
P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P["[object Object]"]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0;P["[object Error]"]=P["[object Function]"]=P["[object WeakMap]"]=!1;var Ja={"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A",
"\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o",
"\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss"},gc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},jd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},da={"function":!0,object:!0},kd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qe=parseFloat,Rb=parseInt,
eb=da[typeof exports]&&exports&&!exports.nodeType?exports:p,qa=da[typeof module]&&module&&!module.nodeType?module:p,Qd=qa&&qa.exports===eb?eb:p,ld=I(eb&&qa&&"object"==typeof global&&global),Ka=I(da[typeof self]&&self),ra=I(da[typeof window]&&window),da=I(da[typeof this]&&this),Ea=ld||ra!==(da&&da.window)&&ra||Ka||da||Function("return this")(),Sa=db();(ra||Ka||{})._=Sa;"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("third_party/lo-dash/lo-dash.min",[],function(){return Sa}):
eb&&qa?(Qd&&((qa.exports=Sa)._=Sa),eb._=Sa):Ea._=Sa}).call(this);
define("qowtRoot/utils/typeUtils",[],function(){function c(a,c,h){if(h.types.every(function(a){var c=k[a];if(!c)throw Error("Bad config to checkArgTypes: unknown type: "+a);return!c(h.value)})){var l=1===h.types.length?h.types[0]:"["+h.types.join(",")+"]";throw Error("Argument "+c+" passed to function "+a+" was supposed to be of type "+l+" but had value "+h.value);}}var l={checkArgTypes:function(a,g){for(var h in g){var l={value:g[h][0],types:g[h].slice(1)};c(a,h,l)}},isObject:function(a){return"object"===
typeof a&&null!==a},isPromise:function(a){return a instanceof Promise},isPromiseLike:function(a){return!(!a||!l.isFunction(a.then))},isList:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isNumber:function(a){return"number"===typeof a&&!isNaN(a)},isInteger:function(a){return"number"===typeof a&&parseInt(a,10)===a},isFunction:function(a){return"function"===typeof a},isString:function(a){return"[object String]"===Object.prototype.toString.call(a)},isRegex:function(a){return"[object RegExp]"===
Object.prototype.toString.call(a)},isNode:function(a){return a instanceof Node},isNull:function(a){return null===a},isUndefined:function(a){return void 0===a},isBoolean:function(a){return"boolean"===typeof a},getType:function(a){var c;Object.keys(k).forEach(function(h){k[h](a)&&(c=h)});return c},isArgumentsObjectOrList:function(a){return a instanceof Object&&a.hasOwnProperty("length")},extend:function(a,c){for(var h in c)c.hasOwnProperty(h)&&(a[h]=c[h])},createNewType:function(a){var c=function(){},
h={isOfType:function(a){return void 0!==a&&null!==a&&a.constructor===c},markAsType:function(a){Object.defineProperty(a,"constructor",{value:c,configurable:!1,writable:!1,enumerable:!1});return a}};if(a){if(k[a])throw Error("Already registered type "+a);k[a]=h.isOfType}return h}},k={string:l.isString,object:l.isObject,promise:l.isPromise,promiseLike:l.isPromiseLike,node:l.isNode,regex:l.isRegex,"function":l.isFunction,number:l.isNumber,list:l.isList,boolean:l.isBoolean,"null":l.isNull,undefined:l.isUndefined};
return l});
define("qowtRoot/configs/common",[],function(){var c={SUPPORTED_IMAGE_FORMATS:{jpg:!0,jpeg:!0,gif:!0,png:!0,pic:!1,pict:!1,bmp:!0,tif:!0,tiff:!0},ZOOM:{current:void 0,next:void 0,levels:void 0},LAYOUT_DEFAULT_MAXZOOM:void 0,LAYOUT_DEFAULT_MINZOOM:void 0,LAYOUT_DEFAULT_ZOOM_LEVEL:void 0,DOC_VERIFY_DEBOUNCE:50,DEFAULT_COLORS:"#6B9CD4 #DE7872 #B7D37C #A48CC2 #6CC7E1 #F3AB63 #AEC8EE".split(" "),TEXT_STYLE:{defaultHighlightColor:"rgb(255, 255, 255)",defaultTxtColor:"rgb(0, 0, 0)",shadowText:{setValue:"#000000 0.07em 0.07em 0.07em",getValue:"rgb(0, 0, 0) 0.07em 0.07em 0.07em"},
outlineText:{webkitTextFillColor:"transparent",webkitTextStroke:".05em #000000",webkitTextStrokeWidth:"0.05em",webkitTextStrokeColor:"rgb(0, 0, 0)"},embossedText:{setColor:"#ffffff",getColor:"rgb(255, 255, 255)",setShadow:"#000000 1px 1px 2px",getShadow:"rgb(0, 0, 0) 1px 1px 2px"},engravedText:{setColor:"#999999",getColor:"rgb(153, 153, 153)",setShadow:"#000000 -1px -1px 2px",getShadow:"rgb(0, 0, 0) -1px -1px 2px"}},DEFAULT_BLIP_FILL_PROPERTIES:{tileProps:{Sx:100,Sy:100,Tx:0,Ty:0,align:"TL"},type:"tileFill"},
kMESSAGE_BUS_CONNECTION_RETRY:10,kMESSAGE_BUS_CONNECTION_TIMEOUT:3E4,kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG:"MessageBus: Connection timeout",create:function(){return{SUPPORTED_IMAGE_FORMATS:c.SUPPORTED_IMAGE_FORMATS,DIALOGUE_CONFIG:c.DIALOGUE_CONFIG,DEFAULT_COLORS:c.DEFAULT_COLORS,ZOOM:c.ZOOM,LAYOUT_DEFAULT_MAXZOOM:c.LAYOUT_DEFAULT_MAXZOOM,LAYOUT_DEFAULT_MINZOOM:c.LAYOUT_DEFAULT_MINZOOM,LAYOUT_DEFAULT_ZOOM_LEVEL:c.LAYOUT_DEFAULT_ZOOM_LEVEL}}};return c});
(function(c){c("qowtRoot/third_party/when/lib/timer",["require"],function(c){return{set:setTimeout,clear:clearTimeout}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/lib/timed",[],function(){return function(c,k,a){a.prototype.delay=function(a){var h=this;return new this.constructor(function(k,v,e){h.then(function(e){c(function(){k(e)},a)},v,e)})};a.prototype.timeout=function(a,h){var q=this,v=1<arguments.length;return new this.constructor(function(e,n,y){var x=c(function(){n(v?h:Error("timed out after "+a+"ms"))},a);q.then(function(a){k(x);e(a)},function(a){k(x);n(a)},y)})};return a}})})("function"===typeof define&&define.amd?
define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/array",[],function(){return function(c){var k=Array.prototype.map,a=Array.prototype.reduce,g=Array.prototype.reduceRight,h=Array.prototype.forEach,q=c.resolve,v=c.all;c.any=function(a){return new c(function(c,g){function l(a){v.push(a);0===--k&&g(v)}var k=0,v=[];h.call(a,function(a){++k;q(a).then(c,l)});0===k&&c()})};c.some=function(a,g){return new c(function(c,l,k){function v(a){0<A&&(--A,u.push(a),0===A&&c(u))}function z(a){0<D&&(--D,G.push(a),0===D&&
l(G))}var A=0,D,u=[],G=[];h.call(a,function(a){++A;q(a).then(v,z,k)});g=Math.max(g,0);D=A-g+1;A=Math.min(g,A);0===A&&c(u)})};c.settle=function(a){return v(k.call(a,function(a){function c(){return a.inspect()}a=q(a);return a.then(c,c)}))};c.map=function(a,c,g){return v(k.call(a,function(a){return q(a).then(c,g)}))};c.reduce=function(c,g){function h(a,c,e){return q(a).then(function(a){return q(c).then(function(c){return g(a,c,e)})})}return 2<arguments.length?a.call(c,h,arguments[2]):a.call(c,h)};c.reduceRight=
function(a,c){function h(a,e,g){return q(a).then(function(a){return q(e).then(function(e){return c(a,e,g)})})}return 2<arguments.length?g.call(a,h,arguments[2]):g.call(a,h)};c.prototype.spread=function(a){return this.then(v).then(function(c){return a.apply(void 0,c)})};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/fatal",["require","./timer"],function(c){var k=c("./timer").set;return function(a){k(function(){throw a;},0)}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/lib/flow",["require","./fatal"],function(c){function k(){throw new TypeError("catch predicate must be a function");}function a(a,c){return function(){a.call(this);return c}}function g(){}var h=c("./fatal");return function(c){function l(a,c){return function(e){return(c===Error||null!=c&&c.prototype instanceof Error?e instanceof c:c(e))?a.call(this,e):n(e)}}var e=c.resolve,n=c.reject,y=c.prototype["catch"];c.prototype.done=function(a,c){var e=this._handler;
e.when(this._maybeFatal,g,this,e.receiver,a,c)};c.prototype._maybeFatal=function(a){if(Object(a)===a)e(a)["catch"](this._fatal)};c.prototype._fatal=h;c.prototype["catch"]=c.prototype.otherwise=function(a){return 1===arguments.length?y.call(this,a):"function"!==typeof a?this.ensure(k):y.call(this,l(arguments[1],a))};c.prototype["finally"]=c.prototype.ensure=function(c){if("function"!==typeof c)return this;c=a(c,this);return this.then(c,c)};c.prototype["else"]=c.prototype.orElse=function(a){return this.then(void 0,
function(){return a})};c.prototype.yield=function(a){return this.then(function(){return a})};c.prototype.tap=function(a){return this.then(a).yield(this)};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});(function(c){c("qowtRoot/third_party/when/lib/inspect",[],function(){return function(c){c.prototype.inspect=function(){return this._handler.inspect()};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/iterate",[],function(){return function(c){function k(a,c,l,e){function n(e){return g(l(e)).then(function(){return k(a,c,l,a(e))})}return g(e).then(function(a){return g(c(a)).then(function(c){return c?a:n(a)})})}function a(c,k,l,e){function n(e,n){return g(l(e)).then(function(){return a(c,k,l,n)})}return g(e).then(function(a){return g(k(a)).then(function(e){return e?a:g(c(a)).spread(n)})})}var g=c.resolve;c.iterate=k;c.unfold=a;return c}})})("function"===
typeof define&&define.amd?define:function(c){module.exports=c()});(function(c){c("qowtRoot/third_party/when/lib/progress",[],function(){return function(c){c.prototype.progress=function(c){return this.then(void 0,void 0,c)};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/with",[],function(){return function(c){c.prototype["with"]=c.prototype.withThis=c.prototype._bindContext;return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/makePromise",[],function(){return function(c){function k(c){var e=this;this._handler=new x;a(c,function(a){e._handler.resolve(a)},function(a){e._handler.reject(a)},function(a){e._handler.notify(a)})}function a(a,c,e,g){try{a(c,e,g)}catch(h){e(h)}}function g(a){return new h(new O(new D(a)))}function h(a){this._handler=a}function q(a,c){if(a instanceof k){var g=a._handler.join();return c===g?new D(new TypeError("Promise cycle")):g}return ba(a)?e(a):new A(a)}
function v(a){return a instanceof k?a._handler.join():e(a)}function e(a){try{var c=a.then;return"function"===typeof c?new z(c,a):new A(a)}catch(e){return new D(e)}}function n(){}function y(a){this.handler=a;if(this._isMonitored()){var c=this._env.promiseMonitor.captureStack();this.trace=a._addTrace(c)}}function x(a){this.consumers=[];this.receiver=a;this.handler=void 0;this.resolved=!1;this._isMonitored()&&(this.trace=this._env.promiseMonitor.captureStack())}function O(a){y.call(this,a)}function F(a,
c){y.call(this,a);this.receiver=c}function z(a,c){x.call(this);this.assimilated=!1;this.untrustedThen=a;this.thenable=c}function A(a){this.value=a}function D(a){this.value=a;this.observed=!1;this._isMonitored()&&(this.key=this._env.promiseMonitor.startTrace(a))}function u(){return{state:"pending"}}function G(a,c,e,g,h,r,k,l){this.a=a;this.b=c;this.c=e;this.d=g;this.e=h;this.f=r;this.g=k;this.handler=l}function R(a,c){this.q=a;this.value=c}function ba(a){return("object"===typeof a||"function"===typeof a)&&
null!==a}function ca(a,c,e){try{return a.call(e,c)}catch(h){return g(h)}}function E(){}var ta,r=c.scheduler,U=Object.create||function(a){function c(){}c.prototype=a;return new c};k.resolve=function(a){return a instanceof k?a:new h(new O(q(a)))};k.reject=g;k.never=function(){return ta};k._defer=function(){return new h(new x)};k.prototype.then=function(a,c,e){var g=this._handler,r=new x(g.receiver);g.when(r.resolve,r.notify,r,g.receiver,a,c,e);return new h(r)};k.prototype["catch"]=k.prototype.otherwise=
function(a){return this.then(void 0,a)};k.prototype._bindContext=function(a){return new h(new F(this._handler,a))};k.all=function(a){function c(a,e,g,h){g.when(E,E,void 0,a,function(a){e[h]=a;0===--r&&this.resolve(e)},a.reject,a.notify)}var e=new x,g=a.length>>>0,r=g,k=[],l,n;for(l=0;l<g;++l)l in a?(n=a[l],ba(n)?c(e,k,v(n),l):(k[l]=n,--r)):--r;0===r&&e.resolve(k);return new h(e)};k.race=function(a){if(Object(a)===a&&0===a.length)return ta;for(var c=new x,e=0;e<a.length;++e)q(a[e]).when(E,E,void 0,
c,c.resolve,c.reject);return new h(c)};h.prototype=U(k.prototype);n.prototype.inspect=u;n.prototype.when=E;n.prototype.resolve=E;n.prototype.reject=E;n.prototype.notify=E;n.prototype.join=function(){return this};n.prototype._env=c.monitor||k;n.prototype._addTrace=E;n.prototype._isMonitored=function(){return"undefined"!==typeof this._env.promiseMonitor};y.prototype=U(n.prototype);y.prototype.join=function(){return this.handler.join()};y.prototype.inspect=function(){return this.handler.inspect()};y.prototype._addTrace=
function(a){return this.handler._addTrace(a)};x.prototype=U(n.prototype);x.prototype.inspect=function(){return this.resolved?this.handler.join().inspect():u()};x.prototype.resolve=function(a){this._join(q(a,this))};x.prototype.reject=function(a){this._join(new D(a))};x.prototype.join=function(){return this.resolved?this.handler.join():this};x.prototype.run=function(){var a=this.consumers,c=this.handler=this.handler.join();this.consumers=void 0;for(var e=0;e<a.length;e+=7)c.when(a[e],a[e+1],a[e+2],
a[e+3],a[e+4],a[e+5],a[e+6])};x.prototype._join=function(a){this.resolved||(this.resolved=!0,this.handler=a,r.enqueue(this),this._isMonitored()&&(this.trace=a._addTrace(this.trace)))};x.prototype.when=function(a,c,e,g,h,k,l){this.resolved?r.enqueue(new G(a,c,e,g,h,k,l,this.handler.join())):this.consumers.push(a,c,e,g,h,k,l)};x.prototype.notify=function(a){this.resolved||r.enqueue(new R(this.consumers,a))};x.prototype._addTrace=function(a){return this.resolved?this.handler._addTrace(a):a};O.prototype=
U(y.prototype);O.prototype.when=function(a,c,e,g,h,k,l){r.enqueue(new G(a,c,e,g,h,k,l,this.join()))};F.prototype=U(y.prototype);F.prototype.when=function(a,c,e,g,h,r,k){void 0!==this.receiver&&(g=this.receiver);this.join().when(a,c,e,g,h,r,k)};z.prototype=U(x.prototype);z.prototype.when=function(a,c,e,g,h,r,k){this.assimilated||(this.assimilated=!0,this._assimilate());x.prototype.when.call(this,a,c,e,g,h,r,k)};z.prototype._assimilate=function(){var a=this;this._try(this.untrustedThen,this.thenable,
function(c){a.resolve(c)},function(c){a.reject(c)},function(c){a.notify(c)})};z.prototype._try=function(a,c,e,g,h){try{a.call(c,e,g,h)}catch(r){g(r)}};A.prototype=U(n.prototype);A.prototype.inspect=function(){return{state:"fulfilled",value:this.value}};A.prototype.when=function(a,c,e,g,h){c="function"===typeof h?ca(h,this.value,g):this.value;a.call(e,c)};D.prototype=U(n.prototype);D.prototype.inspect=function(){return{state:"rejected",reason:this.value}};D.prototype.when=function(a,c,e,h,r,k){this._isMonitored()&&
!this.observed&&this._env.promiseMonitor.removeTrace(this.key);this.observed=!0;c="function"===typeof k?ca(k,this.value,h):g(this.value);a.call(e,c)};D.prototype._addTrace=function(a){this.observed||this._env.promiseMonitor.updateTrace(this.key,a)};ta=new h(new n);G.prototype.run=function(){this.handler.when(this.a,this.b,this.c,this.d,this.e,this.f,this.g)};R.prototype.run=function(){for(var a=this.q,c=1;c<a.length;c+=7)this._notify(a[c],a[c+1],a[c+2],a[c+5])};R.prototype._notify=function(a,c,e,
g){var h;if("function"===typeof g)try{h=g.call(e,this.value)}catch(r){h=r}else h=this.value;a.call(c,h)};return k}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/Queue",[],function(){function c(k){this.head=this.tail=this.length=0;this.buffer=Array(1<<k)}c.prototype.push=function(c){this.length===this.buffer.length&&this._ensureCapacity(2*this.length);this.buffer[this.tail]=c;this.tail=this.tail+1&this.buffer.length-1;++this.length;return this.length};c.prototype.shift=function(){var c=this.buffer[this.head];this.buffer[this.head]=void 0;this.head=this.head+1&this.buffer.length-1;--this.length;return c};c.prototype._ensureCapacity=
function(c){var a=this.head,g=this.buffer,h=Array(c),l=0,v;if(0===a)for(v=this.length;l<v;++l)h[l]=g[l];else{c=g.length;for(v=this.tail;a<c;++l,++a)h[l]=g[a];for(a=0;a<v;++l,++a)h[l]=g[a]}this.buffer=h;this.head=0;this.tail=this.length};return c})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/scheduler",["require","./Queue"],function(c){function k(c){this._enqueue=c;this._handlerQueue=new a(15);var h=this;this.drainQueue=function(){h._drainQueue()}}var a=c("./Queue");k.prototype.enqueue=function(a){1===this._handlerQueue.push(a)&&this._enqueue(this.drainQueue)};k.prototype._drainQueue=function(){for(var a=this._handlerQueue;0<a.length;)a.shift().run()};return k})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/lib/async",["require"],function(c){var k;return"undefined"!==typeof process&&null!==process&&"function"===typeof process.nextTick?function(a){process.nextTick(a)}:(k="function"===typeof MutationObserver&&MutationObserver||"function"===typeof WebKitMutationObserver&&WebKitMutationObserver)?function(a,c){var h,k=a.createElement("div");(new c(function(){var a=h;h=void 0;a()})).observe(k,{attributes:!0});return function(a){h=a;k.setAttribute("class","x")}}(document,
k):function(a){var c=setTimeout;return function(a){c(a,0)}}(c)})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});(function(c){c("qowtRoot/third_party/when/lib/Promise",["require","./makePromise","./scheduler","./async"],function(c){var k=c("./makePromise"),a=c("./scheduler");c=c("./async");return k({scheduler:new a(c),monitor:"undefined"!==typeof console?console:void 0})})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/when","require ./lib/timer ./lib/timed ./lib/array ./lib/flow ./lib/inspect ./lib/iterate ./lib/progress ./lib/with ./lib/Promise".split(" "),function(c){function k(a,c,e,g){var h=D(a);return 2>arguments.length?h:h.then(c,e,g)}function a(a){return function(){return h(a,this,u.call(arguments))}}function g(a){return h(a,this,u.call(arguments,1))}function h(a,c,e){return A.all(e).then(function(e){return a.apply(c,e)})}function q(){function a(c){g._handler.resolve(c)}
function c(a){g._handler.reject(a)}function e(a){g._handler.notify(a)}var g=A._defer();this.promise=g;this.resolve=a;this.reject=c;this.notify=e;this.resolver={resolve:a,reject:c,notify:e}}var v=c("./lib/timer"),e=c("./lib/timed"),n=c("./lib/array"),y=c("./lib/flow"),x=c("./lib/inspect"),O=c("./lib/iterate"),F=c("./lib/progress"),z=c("./lib/with"),A=c("./lib/Promise"),A=[n,y,O,F,x,z].reduceRight(function(a,c){return c(a)},e(v.set,v.clear,A)),D=A.resolve,u=Array.prototype.slice;k.promise=function(a){return new A(a)};
k.resolve=A.resolve;k.reject=A.reject;k.lift=a;k["try"]=g;k.attempt=g;k.iterate=A.iterate;k.unfold=A.unfold;k.join=function(){return A.all(arguments)};k.all=function(a){return k(a,A.all)};k.settle=function(a){return k(a,A.settle)};k.any=a(A.any);k.some=a(A.some);k.map=function(a,c){return k(a,function(a){return A.map(a,c)})};k.reduce=function(a,c){var e=u.call(arguments,1);return k(a,function(a){e.unshift(a);return A.reduce.apply(A,e)})};k.reduceRight=function(a,c){var e=u.call(arguments,1);return k(a,
function(a){e.unshift(a);return A.reduceRight.apply(A,e)})};k.isPromiseLike=function(a){return a&&"function"===typeof a.then};k.Promise=A;k.defer=function(){return new q};return k})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
define("qowtRoot/messageBus/messageBusImpl",["qowtRoot/utils/typeUtils","qowtRoot/configs/common","qowtRoot/third_party/when/when"],function(c,l,k){var a=function(a){this.myWin_=a||window;this.pendingConnections_=[];this.acceptedConnections_=[];this.completedConnections_=[];this.acknowledgements_=[];this.listeners_=[];this.msgQueue_=[];this.pendingMsgs_=[];this.myWin_.addEventListener("message",this.handleIncomingMessage_.bind(this),!1)};a.prototype=Object.create(Object.prototype);a.prototype.constructor=
a;a.prototype.connect=function(a,g){if(!a||null===a||!c.isObject(a)||!a.postMessage)throw Error("MessageBus: A valid HTML window object has not been provided to connect()");if(a===this.myWin_)throw Error("MessageBus: Trying to connect to its own window");if(g&&!c.isFunction(g))throw Error("MessageBus: The provided callback function is not of the correct type");for(var h=this.pendingConnections_.length,l=0;l<h;l++)if(this.pendingConnections_[l].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");
h=this.acceptedConnections_.length;for(l=0;l<h;l++)if(this.acceptedConnections_[l].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");h=this.completedConnections_.length;for(l=0;l<h;l++)if(this.completedConnections_[l].win===a)throw Error("MessageBus: Trying to connect to a window that has already been connected");h={win:a,callback:g,currentWaitTime:0,deferred:k.defer()};this.pendingConnections_.push(h);this.tryToConnect_(h);return h.deferred.promise};
a.prototype.pushMessage=function(a){if(!c.isObject(a))throw Error("MessageBus: A valid message object has not been provided to pushMessage()");var h=this.completedConnections_.length;if(0===h)this.pendingMsgs_.push(a);else{if(!c.isObject(a))throw Error("Cannot mark non-object value as quickoffice message");a.qoMessageBus=!0;this.msgQueue_.length>=g&&this.msgQueue_.shift();this.msgQueue_.push(a);for(var k=0;k<h;k++)this.completedConnections_[k].win.postMessage(a,"*")}};a.prototype.listen=function(a,
g){if(!c.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to listen()");if(g&&!c.isFunction(g))throw Error("MessageBus: The provided filter function is not of the correct type");this.listeners_.push({listener:a,filter:g})};a.prototype.stopListening=function(a){if(!c.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to stopListening()");for(var g=this.listeners_.length,h=0;h<g;h++)if(this.listeners_[h].listener===a){this.listeners_.splice(h,
1);break}};a.prototype.isConnectedTo=function(a){for(var c=!1,g=this.completedConnections_.length,h=0;h<g;h++)if(a===this.completedConnections_[h].win){c=!0;break}return c};a.prototype.tryToConnect_=function(a){a.currentWaitTime>l.kMESSAGE_BUS_CONNECTION_TIMEOUT?this.handleTimeOut_(a):(a.currentWaitTime+=l.kMESSAGE_BUS_CONNECTION_RETRY,-1!==this.pendingConnections_.indexOf(a)&&a.win.postMessage(h,"*"),a.timeoutId=setTimeout(this.tryToConnect_.bind(this,a),l.kMESSAGE_BUS_CONNECTION_RETRY))};a.prototype.handleTimeOut_=
function(a){var c=l.kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG;window.connectFromAppToQowt&&(c=window.connectFromQowtToApp?Math.abs(Math.round(window.connectFromQowtToApp-window.connectFromAppToQowt)/1E3)>Math.round(l.kMESSAGE_BUS_CONNECTION_TIMEOUT/1E3*.8)?c+":qowt too late to connect":c+":qowt and app connected:handshake failed?":c+":qowt failed to connect");a.deferred.reject(Error(c))};a.prototype.handleIncomingMessage_=function(a){if(a){if(-1!==this.msgQueue_.indexOf(a.data))throw Error("MessageBus: A message that was pushed onto thisbus has arrived back on it - we have a circular dependancy!");
a.data===h?this.handleConnectionRequestMsg_(a):a.data===q?this.handleConnectionAcceptedMsg_(a):a.data===v?this.handleConnectionAckMsg_(a):a&&a.data&&!0===a.data.qoMessageBus&&("chrome-extension://gbkeegbaiigmenfmjfclcdgdpimamgkj"===a.origin||"chrome-extension://bpmcpldpdmajfigpchkicefoigmkfalc"===a.origin||"chrome-extension://ehibbfinohgbchlgdbfpikodjaojhccn"===a.origin)&&this.handleClientMsg_(a)}};a.prototype.handleConnectionRequestMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionRequest message");
a.source.postMessage(q,"*")};a.prototype.handleConnectionAcceptedMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAccepted message");for(var c=this.pendingConnections_.length,g=0;g<c;g++)if(this.pendingConnections_[g].win===a.source){c=this.pendingConnections_.splice(g,1)[0];a=this.acknowledgements_.indexOf(a.source);-1===a?this.acceptedConnections_.push(c):(this.acknowledgements_.splice(a,1),this.connectionCompleted_(c));c.win.postMessage(v,"*");break}};a.prototype.handleConnectionAckMsg_=
function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAck message");for(var c=this.acceptedConnections_.length,g=0;g<c;g++)if(this.acceptedConnections_[g].win===a.source){a=this.acceptedConnections_.splice(g,1)[0];this.connectionCompleted_(a);return}this.acknowledgements_.push(a.source)};a.prototype.handleClientMsg_=function(a){if(a.source){for(var c=this.listeners_.slice(),g=c.length,h=0;h<g;h++){var k=c[h];!k||k.filter&&!k.filter.call(this,a)||k.listener.call(this,a)}g=
this.completedConnections_.length;for(h=0;h<g;h++)this.completedConnections_[h].win!==a.source&&this.completedConnections_[h].win.postMessage(a.data,"*")}};a.prototype.connectionCompleted_=function(a){this.completedConnections_.push(a);clearTimeout(a.timeoutId);for(a.callback&&a.callback.call(this);0<this.pendingMsgs_.length;)this.pushMessage(this.pendingMsgs_.shift());a.deferred.resolve()};var g=10,h="qoConnectionRequest",q="qoConnectionAccepted",v="qoConnectionAck";return a});
define("qowtRoot/messageBus/messageBus",["qowtRoot/messageBus/messageBusImpl"],function(c){return new c});
define("qowtRoot/pubsub/pubsub",["third_party/lo-dash/lo-dash.min"],function(){function c(a,c){var g=[],k=[],q=[],F=[];h[a]&&h[a].length&&(v++,h[a].forEach(function(a){a.config.after?k.push(a):g.push(a);a.config.once&&F.push(a)}),g.concat(k).forEach(function(g){q.push(g.callback(a,c))}),F.forEach(function(a){l(a.token)}));return Promise.all(q)}function l(a){var c;_.values(h).some(function(g){return g.some(function(h,k){return h.token===a?(c=g.splice(k,1)[0],!0):!1})});return c}function k(a){var c=
0;return c=a?h[a]?h[a].length:0:_.values(h).reduce(function(a,c){return a+c.length},0)}function a(){h={}}var g=Object.create(Object.prototype,{subscriberCount:{get:function(){return k()}},registeredSignals:{get:function(){return _.keys(h)}},publishCount:{get:function(){return v}}});g.subscribe=function(a,c,g){if(!_.isString(a)||!a)throw new TypeError("invalid signal");if(!_.isFunction(c))throw new TypeError("invalid callback");g=g||{};g.once=!!g.once;g.after=!!g.after;var k=(++q).toString();h[a]=
h[a]||[];h[a].push({token:k,callback:c,config:g});return k};g.publish=function(a,g){if(!_.isString(a)||!a)throw new TypeError("invalid signal");g=g||{};return c(a,g)};g.doAction=function(a,g){if(!_.isString(a)||!a)throw new TypeError("invalid action");g=g||{};g=_.isString(g)?{contentType:g}:g;return c("qowt:doAction",{action:a,context:g})};g.unsubscribe=function(a){if(void 0!==a){if(!_.isString(a)||!a)throw new TypeError("invalid token");return l(a)}};g.subscriberCountForSignal=function(a){if(!_.isString(a)||
!a)throw new TypeError("invalid signal");return k(a)};g.clear=a;g.reset=function(){a();v=q=0};var h={},q=0,v=0;return g});(function(){var c={},l=window.sessionStorage.getItem("featureOverrides");l&&(c=JSON.parse(l));c.isRelease=!0;c.edit=!1;window.sessionStorage.setItem("featureOverrides",JSON.stringify(c));window.localStorage.removeItem("testsToInclude");window.localStorage.removeItem("builtInTests")})();define("configs/releaseFeatures",function(){});
(function(){var c={},l=window.sessionStorage.getItem("featureOverrides");l&&(c=JSON.parse(l));c.save=!!(window.chrome&&window.chrome.fileSystem&&window.chrome.fileSystem.chooseEntry);window.sessionStorage.setItem("featureOverrides",JSON.stringify(c))})();define("configs/chromeFeatures",function(){});define("qowtRoot/features/pack",[],function(){return{edit:!0,save:!1,pointEdit:!1,hats:!0}});
define("qowtRoot/features/utils",["qowtRoot/features/pack"],function(c){var l={isEnabled:function(a){a=c[a];return void 0===a?!1:a},enable:function(a){c[a]=!0},disable:function(a){c[a]=!1},setOverrides:function(a){for(var g in a)a.hasOwnProperty(g)&&(c[g]=a[g])},isDebug:function(){return void 0!==k?k:!l.isEnabled("isRelease")},setDebugOverride:function(a){k=a},clearDebugOverride:function(){k=void 0}},k;return l});
define("qowtRoot/utils/promiseUtils",["qowtRoot/utils/typeUtils","qowtRoot/third_party/when/when"],function(c,l){var k={cast:function(a){return a instanceof Promise?a:Promise.resolve(a)},delay:function(a,c){a=a||0;return new Promise(function(h){setTimeout(h.bind(void 0,c),a)})},delayThenReject:function(a,c){a=a||0;return new Promise(function(h,k){setTimeout(k.bind(h,c),a)})},throwAndEscapeChain:function(a){a instanceof Error||(console.error("throwAndEscapeChain wrapping value in new Error: ",a),a=
Error(a));l.reject(a).done();throw a;},pipeline:function(a){function g(){for(var l=Array.prototype.slice.call(arguments,0);0<a.length;){var e=a.shift();if(c.isPromiseLike(e))return k.cast(e).then(function(c){a.unshift(c);return g.apply(h,l)});c.checkArgTypes("PromiseUtils.pipeline",{task:[e,"function"]});e=e.apply(h,l);if(c.isPromiseLike(e))return k.cast(e).then(function(a){return g(a)});l=[e]}return l[0]}var h=this,l=Array.prototype.slice.call(arguments,0);if(l.some(c.isPromiseLike))return Promise.all(l).then(function(a){return k.pipeline.apply(h,
a)});c.checkArgTypes("PromiseUtils.pipeline",{tasks:[a,"list"]});a=a.slice(0);return g.apply(h,l.slice(1))},finally:function(a,c){function h(){return k.cast(c()).then(function(){return a})}return k.cast(a).then(h,h)},waitForNextMacroTurn:function(a){return new Promise(function(c){window.setTimeout(c.bind(null,a),0)})}};return k});
define("utils/analytics/googleAnalytics",["qowtRoot/features/utils","qowtRoot/utils/promiseUtils"],function(c,l){function k(e,g){var h;void 0!==A?h=A?Promise.resolve():Promise.reject(Error("ga permission cached (not permitted)")):(window.analytics&&chrome&&chrome.metricsPrivate&&chrome.metricsPrivate.getIsCrashReportingEnabled&&(!c.isDebug()||void 0!==window.__gaMock)?h=Promise.resolve():(console.warn("GA not supported on this platform"),h=Promise.reject(Error("GA not supported on this platform"))),
h=h.then(a).catch(q));return h.then(v).then(e.bind(null,g)).catch(function(){})}function a(){var a=Error("Crash reporting setting timed out");return Promise.race([g(),l.delayThenReject(1E3,a)]).then(h)}function g(){return new Promise(function(a){chrome.metricsPrivate.getIsCrashReportingEnabled(a)})}function h(a){return new Promise(function(c,e){D=window.analytics.getService(F);D.getConfig().addCallback(function(g){g.setTrackingPermitted(a);(A=a)?c():(console.warn("Crash reporting not allowed"),e())})})}
function q(){A=!1;return Promise.reject()}function v(){void 0===u&&e("QO");return Promise.resolve()}function e(a){u&&u.sendAppView(a);u=D.getTracker(O[a]);G&&u.set(window.analytics.Parameters.SESSION_GROUP,G);u.forceSessionStart();return Promise.resolve()}function n(a){z!==a&&(z=a,u.sendAppView(a));return Promise.resolve()}function y(a){u.sendException(a.msg,a.fatal);return Promise.resolve()}function x(a){u.sendEvent(a.category,a.action,a.label,a.value);return Promise.resolve()}var O={word:"UA-44583639-1",
sheet:"UA-44583639-2",point:"UA-44583639-3",QO:"UA-44583639-4"},F="Quickoffice",z,A,D,u,G;return{setSessionGroup:function(a){G=a},setTracker:function(a){return k(e,a)},sendState:function(a){return k(n,a)},sendException:function(a){return k(y,a)},sendEvent:function(a){return k(x,a)},reset:function(){u=D=A=z=void 0}}});
define("qowtRoot/utils/i18n",["qowtRoot/utils/typeUtils","utils/analytics/googleAnalytics"],function(c,l){var k={getMessage:function(a,g){var h="????";if(!chrome||!chrome.i18n)return a;c.isString(a)?(h=chrome.i18n.getMessage(a,g),h||(h=a,k.logError_("Missing translation",a))):k.logError_("Invalid string translation Id",a);return h},logError_:function(a,c){console.error(a+" "+c);l.sendException({msg:a,fatal:!1})}};return k});
define("qowtRoot/errors/localisedError",["qowtRoot/utils/typeUtils","qowtRoot/utils/i18n","third_party/lo-dash/lo-dash.min"],function(c,l){var k=function(a){a=a||"";this.name="LocalisedError";c.isObject(a)&&_.extend(this,a);this.message=(this.code?this.code+": ":"")+(this.message||JSON.stringify(a)||this.title||this.details||this.additionalInfo);this.title=l.getMessage(this.title);this.details=a.fileName?l.getMessage(this.details,a.fileName):l.getMessage(this.details);this.linkData&&this.linkData.msg&&
(this.linkData.msg=l.getMessage(this.linkData.msg)||this.linkData.msg);Error.captureStackTrace(this,k)};k.prototype=Object.create(Error.prototype);return k.prototype.constructor=k});define("qowtRoot/errors/qowtError",["qowtRoot/errors/localisedError"],function(c){var l=function(){c.apply(this,arguments);this.name="QOWTError";Error.captureStackTrace(this,l);this.fatal=!1};l.prototype=Object.create(c.prototype);l.prototype.constructor=l;return window.QOWTError=l});
define("qowtRoot/errors/qowtSilentError",["qowtRoot/errors/localisedError"],function(c){var l=function(){c.apply(this,arguments);this.name="QOWTSilentError";Error.captureStackTrace(this,l);this.fatal=!1;this.silent=!0};l.prototype=Object.create(c.prototype);l.prototype.constructor=l;return window.QOWTSilentError=l});
define("qowtRoot/errors/qowtException",["qowtRoot/errors/localisedError"],function(c){var l=function(){c.apply(this,arguments);this.name="QOWTException";Error.captureStackTrace(this,l);this.fatal=!0};l.prototype=Object.create(c.prototype);l.prototype.constructor=l;return window.QOWTException=l});
define("qowtRoot/errors/errorCatcher","qowtRoot/utils/typeUtils qowtRoot/messageBus/messageBus qowtRoot/pubsub/pubsub qowtRoot/errors/qowtError qowtRoot/errors/qowtSilentError qowtRoot/errors/qowtException".split(" "),function(c,l,k,a,g,h){function q(a){a.error?(console.error("%s caught js exception: %s",z,a.error.name||a.error.message?a.error.name+": "+a.error.message:a.error),console.error(a.error.stack),void 0===a.error.fatal&&(a.error.fatal=!0),e(a.error)):console.error(a)}function v(a,c){console.log("%s caught deprecated error",
z);console.log(c);c.isDeprecatedError=!0;e(c)}function e(e){if(e instanceof Error)void 0===e.fatal&&(e.fatal=!0);else{console.log("%s converting deprecated/bad error",z);switch(!0){case c.isObject(e)&&e.isDeprecatedError:var k={title:e.errorId?e.errorId+"_short_msg":void 0,details:e.errorId?e.errorId+"_msg":void 0,linkData:e.linkData,message:e.additionalInfo};e=e.fatal?new h(k):e.silent?new g(k):new a(k);break;case c.isNumber(e):e=new h({code:e});break;case c.isString(e):e=new h(e);break;default:e=
new h(e.toString())}e.stack=void 0}D.push(e);n(e);if(!e.isSynced){console.log("%s pushing error to msg bus",z);k=_.extend({},e);k.name=e.name;k.message=e.message;k.stack=e.stack;try{l.pushMessage({id:O,error:JSON.stringify(k)})}catch(q){}}}function n(a){console.log("%s dispatching error to observers",z);F.forEach(function(c){try{c.call(c,a)}catch(e){console.warn("Error observer %s threw an exception; ignored",c.name||""),console.warn(e.stack)}})}function y(a){if(a&&a.data&&a.data.error){console.log("%s receiving error from msg bus",
z);a=JSON.parse(a.data.error);var c={};-1!=="Error EvalError RangeError ReferenceError SyntaxError TypeError URIError QOWTError QOWTSilentError QOWTException".split(" ").indexOf(a.name)?(console.log("cast to %s",a.name),c=new window[a.name]):(console.log("cast fallback to Error"),c=Error());_.extend(c,a);void 0===a.stack&&(c.stack=void 0);a=c;a.isSynced=!0;e(a)}}function x(a){return a&&a.data&&a.data.id===O}var O="errorSync",F=[],z="sandbox"===window.name?"QOWT":"App",A,D=[];return{init:function(){A=
k.subscribe("qowt:error",v);window.addEventListener("error",q);l.listen(y,x);Error.stackTraceLimit=Infinity},reset:function(){k.unsubscribe(A);window.removeEventListener("error",q);l.stopListening(y);F=[]},handleError:function(a){e(a)},addObserver:function(a){c.isFunction(a)?F.push(a):console.warn("Error observer must be a function")},observers:function(){return F},lastError:function(){return D[D.length-1]}}});
define("qowtRoot/errors/unique/fileDoesNotExistError",["qowtRoot/errors/qowtException"],function(c){var l=function(){this.title="file_does_not_exist_error_title";this.details="file_does_not_exist_error_details";this.gaState="FileDoesNotExistError";c.apply(this,arguments);this.name="FileDoesNotExistError";Error.captureStackTrace(this,l)};l.prototype=Object.create(c.prototype);return l.prototype.constructor=l});
define("qowtRoot/utils/tryUtils",["qowtRoot/utils/typeUtils"],function(c){var l=function(c){this.rethrowOnException=!1;this.optMsg=c};l.prototype={__proto__:Object.prototype,ignore:function(){return this.run.apply(this,arguments)},rethrow:function(){this.rethrowOnException=!0;return this.run.apply(this,arguments)},run:function(){var k=arguments[0],a=[].splice.call(arguments,1);try{return k.apply(null,a)}catch(g){this.optMsg&&(c.isString(this.optMsg)?console.warn(this.optMsg):console.dir(this.optMsg));
if(this.rethrowOnException){if(g instanceof Error)throw g;throw Error(g);}console.warn("Ignoring exception: ",g)}}};return{withWarning:function(c){return new l(c)},ignore:function(){if(!c.isFunction(arguments[0]))throw Error("ignore must be passed a function as first argument");var k=new l;return k.ignore.apply(k,arguments)},rethrow:function(){var c=new l;return c.rethrow.apply(c,arguments)}}});
define("controllers/appState",["qowtRoot/errors/errorCatcher","utils/analytics/googleAnalytics"],function(c,l){function k(c){a.updateState(c.gaState?c.gaState:c.fatal?"FatalCrash":"NonFatalError",{data_reason:c.message,data_fatal:c.fatal})}var a={init:function(){c.addObserver(k);a.updateState("Init")},setApp:function(a){l.setTracker(a)},updateState:function(a,c){g!==a&&(g=a,window.qowtState={state:g,context:c},l.sendState(g))}},g;return a});
define("utils/converter",[],function(){var c={app2Icon:function(c){return{word:"../img/doc.ico",sheet:"../img/xls.ico",point:"../img/ppt.ico"}[(c||"").toLowerCase()]},extension2Format:function(c){return{doc:"CBF",docx:"OOXML",docm:"OOXML",dot:"CBF",dotx:"OOXML",xls:"CBF",xlsx:"OOXML",xlsm:"OOXML",xlt:"CBF",xltx:"OOXML",csv:"CSV",ppt:"CBF",pptx:"OOXML",pptm:"OOXML",pot:"CBF",potx:"OOXML"}[(c||"").toLowerCase()]},extension2App:function(c){return{doc:"word",docx:"word",docm:"word",dot:"word",dotx:"word",
xls:"sheet",xlsx:"sheet",xlsm:"sheet",xlt:"sheet",xltx:"sheet",csv:"sheet",ppt:"point",pptx:"point",pptm:"point",pot:"point",potx:"point"}[(c||"").toLowerCase()]},extension2Mime:function(c){return{doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",docm:"application/vnd.ms-word.document.macroenabled.12",dot:"application/msword-template",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xls:"application/vnd.ms-excel",
xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlt:"application/vnd.ms-excel",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",csv:"text/csv",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",pptm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",pot:"application/vnd.ms-powerpoint",potx:"application/vnd.openxmlformats-officedocument.presentationml.template"}[(c||
"").toLowerCase()]},app2FileName:function(c){return{word:"Document",point:"Presentation",sheet:"Spreadsheet"}[(c||"").toLowerCase()]},url2App:function(c){var a,g="";(c=(c||"").match(/.*\/([^\/?]*)/))&&(c=c[1].match(/.*\.([^\.]*)$/))&&(g=c[1]);switch(g.toLowerCase()){case "doc":case "docx":case "docm":a="word";break;case "xls":case "xlsx":case "xlsm":case "csv":a="sheet";break;case "ppt":case "pptx":case "pptm":a="point"}return a},mime2Extension:function(c){return l[(c||"").toLowerCase()]},mime2App:function(k){return c.extension2App(c.mime2Extension(k))},
mime2Icon:function(k){return c.app2Icon(c.mime2App(k))},mime2Format:function(k){return c.extension2Format(c.mime2Extension(k))},name2ext:function(c){var a="";(c=(c||"").match(/.*\.([^\.]*)$/))&&(a=c[1]);return a}},l={"application/msword":"doc","application/vnd.ms-word":"doc","application/vnd.msword":"doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/vnd.wordprocessing-openxml":"docx","application/vnd.ms-word.document.macroenabled.12":"docm","application/vnd.ms-word.document.12":"docm",
"application/vnd.openxmlformats":"docx","application/msword-template":"dot","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","application/mspowerpoint":"ppt","application/vnd.ms-powerpoint":"ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","application/vnd.presentation-openxml":"pptx","application/vnd.presentation-openxmlm":"pptx","application/vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","application/vnd.openxmlformats-officedocument.presentationml.template":"potx",
"application/msexcel":"xls","application/vnd.ms-excel":"xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","application/vnd.spreadsheet-openxml":"xlsx","application/vnd.ms-excel.sheet.macroenabled.12":"xlsm","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","text/csv":"csv"};return c});
define("qowtRoot/errors/unique/httpErrorFileNotFound",["qowtRoot/errors/qowtException"],function(c){var l=function(){this.title="temporary_unable_to_open_error_short_msg";this.details="temporary_unable_to_open_error_msg";this.gaState="HTTPErrorFileNotFound";c.apply(this,arguments);this.name="HTTPErrorFileNotFound";this.message="HTTP ERROR: 404";Error.captureStackTrace(this,l)};l.prototype=Object.create(c.prototype);return l.prototype.constructor=l});
define("qowtRoot/errors/unique/httpErrorZero",["qowtRoot/errors/qowtException"],function(c){var l=function(){this.title="http_error_zero_short_msg";this.details="http_error_zero_msg";this.gaState="HTTPErrorZero";c.apply(this,arguments);this.name="HTTPErrorZero";this.message="HTTP ERROR: 0";Error.captureStackTrace(this,l)};l.prototype=Object.create(c.prototype);return l.prototype.constructor=l});
define("qowtRoot/errors/unique/timeoutError",["qowtRoot/errors/qowtException"],function(c){var l=function(){this.gaState="TimeoutError";c.apply(this,arguments);this.name="TimeoutError";Error.captureStackTrace(this,l)};l.prototype=Object.create(c.prototype);return l.prototype.constructor=l});
define("utils/retryHandler",[],function(){var c=function(){this.interval=1E3;this.maxInterval=6E4};c.prototype={__proto__:Object.prototype,maxedOut:function(){return this.interval>this.maxInterval},retry:function(c){setTimeout(c,this.interval);this.interval=this.nextInterval_()},reset:function(){this.interval=1E3},nextInterval_:function(){var c=2*this.interval+this.getRandomInt_(0,1E3);return Math.min(c,this.maxInterval)},getRandomInt_:function(c,k){return Math.floor(Math.random()*(k-c+1)+c)}};return c});
define("utils/xhr","qowtRoot/errors/qowtException qowtRoot/errors/unique/httpErrorFileNotFound qowtRoot/errors/unique/httpErrorZero qowtRoot/errors/unique/timeoutError qowtRoot/utils/typeUtils qowtRoot/third_party/when/when utils/retryHandler".split(" "),function(c,l,k,a,g,h,q){var v=function(a){this.method_=a.method||"GET";this.responseType_=a.responseType||"blob";this.url_=this.buildUrl_(a.baseUrl,a.params);this.authToken_=a.authToken;this.contentType_=a.contentType;this.deferred_=h.defer();this.kEstimatedDownloadChunks_=
20;this.timeoutLength_=6E5;this.remainingChunks_=this.kEstimatedDownloadChunks_;this.progress_=0;this.retryHandler_=new q;a.abortPromise&&(a.abortPromise=a.abortPromise.catch(function(){this.xhr_&&this.xhr_.abort&&this.xhr_.abort();this.deferred_.reject(Error("XHR canceled"))}))};v.prototype={__proto__:Object.prototype,send:function(a){this.xhr_=this.createXMLHttpRequest_();this.xhr_.send(a);this.startConnectionTimeout_();return this.deferred_.promise},createXMLHttpRequest_:function(){var a=new XMLHttpRequest;
"GET"===this.method_?a.onprogress=this.onProgress_.bind(this):a.upload.onprogress=this.onProgress_.bind(this);a.onload=this.onSuccess_.bind(this);a.onerror=this.onError_.bind(this);a.open(this.method_,this.url_,!0);a.responseType=this.responseType_;this.authToken_&&a.setRequestHeader("Authorization","Bearer "+this.authToken_);this.contentType_&&a.setRequestHeader("Content-Type",this.contentType_);return a},onSuccess_:function(a){this.clearConnectionTimeout_();if(4===a.target.readyState){var c=a.target.response||
a.target.responseText;if(200!==a.target.status&&0!==a.target.status||!c)if(0!==a.target.status&&200!==a.target.status||c)this.onError_(a);else this.deferred_.reject("HTTP ERROR: ABORTED");else{if("json"===a.target.responseType&&"string"===typeof c)try{c=JSON.parse(c)}catch(g){return this.deferred_.reject(Error("XHR response not valid JSON"))}this.deferred_.notify(1);this.deferred_.resolve(c)}}},onProgress_:function(a){this.resetConnectionTimeout_();a&&a.lengthComputable?this.progress_=(a.position||
a.loaded)/(a.totalSize||a.total):(a=this.remainingChunks_/this.kEstimatedDownloadChunks_,this.remainingChunks_-=a,this.progress_+=a/this.kEstimatedDownloadChunks_);this.deferred_.notify(this.progress_)},onError_:function(a){a.target.status&&(500<=a.target.status||429===a.target.status)?this.retry_(a):this.deferred_.reject(this.getErrorFromXhrStatus_(a.target.status))},retry_:function(a){this.retryHandler_.maxedOut()?this.deferred_.reject(this.getErrorFromXhrStatus_(a.target.status)):this.retryHandler_.retry(this.send.bind(this))},
getErrorFromXhrStatus_:function(a){return 0===a?new k:404===a?new l:new c("HTTP ERROR: "+a)},buildUrl_:function(a,c){var g=this.parseUrl_(a),h=this.buildQuery_(c);h&&(g+="?"+h);return g},buildQuery_:function(a){a=a||{};return Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},parseUrl_:function(a){if(g.isString(a)){var c=a;c.match(/^http[s]?:\/\//)||c.match(/^blob:/)||c.match(new RegExp("^"+window.location.origin))||(a="http://"+a)}else throw Error("URL for XHR should be a string");
return a},startConnectionTimeout_:function(){this.timeout_=window.setTimeout(function(){var c=new a("XHR timed out");this.deferred_.reject(c)}.bind(this),this.timeoutLength_)},clearConnectionTimeout_:function(){window.clearTimeout(this.timeout_);delete this.timeout_},resetConnectionTimeout_:function(){this.clearConnectionTimeout_();this.startConnectionTimeout_()}};return v});
define("qowtRoot/utils/localStorageManager",["qowtRoot/errors/qowtException"],function(c){return{setItem:function(l,k){try{window.localStorage.setItem(l,k)}catch(a){throw new c({title:"storage_quota_exceed_error_short_msg",details:"storage_quota_exceed_error_msg",message:a.message});}},getItem:function(c){return window.localStorage.getItem(c)}}});
define("ui/progressSpinner",["qowtRoot/features/utils"],function(c){function l(){n&&(n=!1,q.style.opacity="0")}function k(c,e){x[c].progress=1<e?1:0>e||void 0===e?0:e;var g=0,h=0,k=0,l;for(l in x)if(x.hasOwnProperty(l)&&void 0!==x[l].weight&&void 0!==x[l].progress){var n=x[l];"*"===n.weight?k=n.progress:(h+=n.weight,g+=n.progress*n.weight)}0<k&&(g+=k*(1-h));a(g)}function a(a){a=1<a?1:0>a||void 0===a?0:a;var c=parseInt(8*a,10);e&&e.getElementById("circular-progress").setAttribute("class",("editor"===
v?"dark":"light")+" p"+c);1===a&&setTimeout(l,100)}function g(){v=c.isEnabled("edit")?"editor":"viewer";q=document.createElement("div");q.style.display="none";q.classList.add(v);q.classList.add("progress-spinner-container");q.classList.add("fader");q.addEventListener("webkitTransitionEnd",function(){n||(a(0),q.style.display="none")},!1);h=document.createElement("embed");h.classList.add(v);h.classList.add("progress-spinner");h.src="../img/progressSpinner.svg";h.onload=function(){e=h.getSVGDocument()};
q.appendChild(h);var g=document.createElement("div");g.classList.add(v);g.classList.add("progress-spinner-label");g.textContent=chrome.i18n.getMessage("file_loading_spinner_label");q.appendChild(g);document.body.appendChild(q);O=!0}var h,q,v,e,n=!1,y=0,x={},O=!1;return{show:function(c){O||g();n||(n=!0,q.style.display="block",q.style.opacity="1");c&&a(c)},hide:function(){l()},setProgress:function(c){a(c)},addContributor:function(a){y++;var c="contrib"+y;x[c]={weight:a,progress:0};return k.bind(this,
c)},resetContributors:function(){x={};y=0}}});define("utils/htmlConstructor",[],function(){var c={constructHTML:function(l,k){for(var a=document.createDocumentFragment(),g=0;g<l.length;g++){var h=l[g];h.elType=h.elType||"div";var q=document.createElement(h.elType),v;for(v in h)h.hasOwnProperty(v)&&"function"!==typeof h[v]&&"children"!==v&&(q[v]=h[v]);h.children&&c.constructHTML(h.children,q);a.appendChild(q)}k&&k.appendChild(a);return a}};return c});
define("utils/pluginLoader","qowtRoot/errors/errorCatcher qowtRoot/errors/qowtException qowtRoot/errors/qowtSilentError qowtRoot/pubsub/pubsub qowtRoot/third_party/when/when qowtRoot/utils/localStorageManager qowtRoot/utils/typeUtils ui/progressSpinner utils/htmlConstructor".split(" "),function(c,l,k,a,g,h,q,v,e){var n=function(a){this.status="idle";this.myWin_=a||window;this.kHistoricId_="pluginLoadTimes";this.kHistoricCount_=10;this.relatedApp_=null;this.kPluginLoadRetryMax_=3;this.timeouts_=this.pluginLoadAttempt_=
0;this.timeout_=this.expectedLoadTime_=this.averageLoadTime_=this.historicLoadTimes_=this.startTime_=this.progressIntervalId_=this.spinnerUpdateFunc_=this.deferred_=null;this.pluginTimeoutLength_=3E4};n.prototype=Object.create(Object.prototype);n.prototype.constructor=n;n.prototype.loadPlugin=function(a){if("word"!==a&&"sheet"!==a&&"point"!==a)throw Error("Error: unknown app: "+a);this.deferred_=g.defer();this.status="loading";this.relatedApp_=a;this.constructPluginHTML_();return this.deferred_.promise};
n.prototype.constructPluginHTML_=function(){this.pluginLoadAttempt_++;var a=e.constructHTML([{id:"pluginContainer",children:[{elType:"embed",name:"nacl_module",id:"qonacl",width:0,height:0,src:"../plugin/"+this.relatedApp_+".nmf",type:"application/x-nacl"}]}]);this.setupLoadListeners_(a);this.startLoadTimeout_();this.beginLoading_(a)};n.prototype.setupLoadListeners_=function(c){c=c.getElementById("pluginContainer");c.addEventListener("load",this.pluginLoaded_.bind(this),!0);c.addEventListener("error",
this.handleNaclError_.bind(this),!0);c.addEventListener("crash",this.handleNaClCrash_.bind(this),!0);c.addEventListener("abort",this.handleNaClAbort_.bind(this),!0);c.addEventListener("loadstart",this.initProgressUpdate_.bind(this),!0);a.subscribe("app:naclCrash",this.handleNaClCrash_.bind(this))};n.prototype.beginLoading_=function(a){document.body.appendChild(a)};n.prototype.handleNaclTimeout_=function(){this.timeouts_++;this.logMessage_("Nacl loading timeout #"+this.timeouts_);this.startLoadTimeout_()};
n.prototype.handleNaClAbort_=function(){this.clearLoadTimeout_();this.deferred_.reject(Error("Nacl Loading Aborted"))};n.prototype.handleNaclError_=function(){this.logMessage_("NaCl-FAIL#"+this.pluginLoadAttempt_+":"+this.getLastError_());this.clearLoadTimeout_();if(this.pluginLoadAttempt_<this.kPluginLoadRetryMax_){var a=document.getElementById("pluginContainer");if(a&&a.parentNode)a.parentNode.removeChild(a);else throw Error("Cannot retry NaCl load. Unexpected state.");this.constructPluginHTML_()}else{var a=
this.getLastError_(),c;c=!(-1===a.indexOf("Data Execution Prevention is required")&&-1===a.indexOf("CPU model is not supported"));throw new l({title:"app_nacl_error_title",details:c?"app_nacl_error_unsupported_device":"app_nacl_error_load_failed",message:a});}};n.prototype.handleNaClCrash_=function(){this.clearLoadTimeout_();throw new l({title:"app_nacl_crash_title",details:"app_nacl_crash_msg",message:this.getLastError_()});};n.prototype.getLastError_=function(){var a=document.getElementById("qonacl");
return a?a.lastError:"NaCl error or crash: No lastError logged."};n.prototype.logMessage_=function(a){var e=new k(a);c.handleError(e);console.error(a)};n.prototype.updateProgress_=function(){this.spinnerUpdateFunc_(this.progressAlgo_((new Date-this.startTime_)/this.expectedLoadTime_))};n.prototype.initProgressUpdate_=function(){v.show();this.spinnerUpdateFunc_=v.addContributor("*");this.calcExpectedLoadTime_();this.progressIntervalId_=this.myWin_.setInterval(this.updateProgress_.bind(this),10)};n.prototype.calcExpectedLoadTime_=
function(){this.startTime_=new Date;this.historicLoadTimes_=JSON.parse(h.getItem(this.kHistoricId_));this.historicLoadTimes_ instanceof Array||(this.historicLoadTimes_=[]);if(0===this.historicLoadTimes_.length)this.averageLoadTime_=100;else{var a=0;this.historicLoadTimes_.forEach(function(c){a+=c});this.averageLoadTime_=a/this.historicLoadTimes_.length}this.expectedLoadTime_=1.1*this.averageLoadTime_};n.prototype.progressAlgo_=function(a){return Math.pow(a+(1-a)/2,16)};n.prototype.pluginLoaded_=function(){this.clearLoadTimeout_();
this.myWin_.clearInterval(this.progressIntervalId_);q.isFunction(this.spinnerUpdateFunc_)&&this.spinnerUpdateFunc_(1);this.recordLoadTime_();1<this.pluginLoadAttempt_&&this.logMessage_("NaCl Loaded OK: try#"+this.pluginLoadAttempt_);this.status="loaded";this.deferred_.resolve()};n.prototype.recordLoadTime_=function(){for(this.historicLoadTimes_.push(new Date-this.startTime_);this.historicLoadTimes_.length>this.kHistoricCount_;)this.historicLoadTimes_.shift();h.setItem(this.kHistoricId_,JSON.stringify(this.historicLoadTimes_))};
n.prototype.startLoadTimeout_=function(){this.timeout_=this.myWin_.setTimeout(this.handleNaclTimeout_.bind(this),this.pluginTimeoutLength_)};n.prototype.clearLoadTimeout_=function(){this.myWin_.clearTimeout(this.timeout_)};return n});
define("utils/fileWriter",["qowtRoot/third_party/when/when","utils/analytics/googleAnalytics"],function(c,l){var k=function(a){this.entry=a;this.state=0};k.prototype={__proto__:Object.prototype,writeData:function(a){return this.createWriter_().then(this.truncateAndWrite_.bind(this,a)).then(function(){return this.entry}.bind(this))},createWriter_:function(){var a=c.defer();c(0===this.state).then(function(){this.entry.createWriter(a.resolve,a.reject)}.bind(this));return a.promise},writeOrResolve_:function(a,
c,h){if(2===c.readyState)switch(this.state){case 3:try{this.state=1,c.write(a)}catch(k){h.reject(Error(k))}break;case 1:this.state=0,h.resolve()}else l.sendException({msg:"Callback for write/ writeend called when FileWriter.readyState !== DONE",fatal:!1})},truncateAndWrite_:function(a,g){return c.promise(function(c,k){1===g.readyState&&k(Error("INVALID_STATE_ERR : Cannot write when the previous write is still in progress"));g.onwrite=this.writeOrResolve_.bind(this,a,g,{reject:k,resolve:c});g.onerror=
function(a){k(Error(a.currentTarget.error.message))};try{this.state=3,g.truncate(0)}catch(l){throw Error(l);}}.bind(this))}};return k});
define("utils/metrics",["qowtRoot/features/utils","qowtRoot/utils/typeUtils"],function(c,l){var k,a="doc docx docm xls xlsx xlsm ppt pptx pptm pps ppsx ppsm csv".split(" "),g="csvNonEmptyCellCount csvSheetCount csvFormattedCellCount docPageCount docSectionCount docParagraphCount docxPageCount docxSectionCount docxParagraphCount pptSlideCount pptMasterCount pptxSlideCount pptxMasterCount xlsNonEmptyCellCount xlsSheetCount xlsFormattedCellCount xlsxNonEmptyCellCount xlsxSheetCount xlsxFormattedCellCount".split(" ");return{recordFileType:function(g){if(g){var l=
k=g.toLowerCase();if(chrome&&chrome.metricsPrivate&&chrome.metricsPrivate.recordValue){var v;"Array"===a.constructor.name?(g=a.indexOf(l),v=a.length):(g=l,v=a);0>g||g>v?console.warn("Ignoring metrics record for unknown value: "+l):(l={metricName:"Quickoffice.FileFormat",type:"histogram-linear",min:1,max:v,buckets:v+1},c.isDebug()&&void 0===window.__umaMock?console.log("UMA not supported in debug mode"):chrome.metricsPrivate.recordValue(l,g))}}},recordCount:function(a){a=a||{};var q=k+(a.dataPoint||
"");a=a.value||0;if(l.isString(name)&&l.isNumber(a)&&l.isList(g)){var v,e;l.isList(g)?(e=g.indexOf(q),v=g.length):(e=q,v=g);if(!(0<=e&&e<=v))console.warn("Ignoring unknown metrics record "+q+" with value: "+a);else if(!c.isDebug()&&chrome&&chrome.metricsPrivate&&chrome.metricsPrivate)switch(v="Quickoffice."+q,q){case "docPageCount":case "docxPageCount":chrome.metricsPrivate.recordValue&&chrome.metricsPrivate.recordValue({metricName:v,type:"histogram-log",min:1,max:1E3,buckets:50},a);break;case "docParagraphCount":case "docxParagraphCount":chrome.metricsPrivate.recordMediumCount&&
chrome.metricsPrivate.recordMediumCount(v,a);break;case "csvSheetCount":case "docSectionCount":case "docxSectionCount":case "xlsSheetCount":case "xlsxSheetCount":case "pptSlideCount":case "pptxSlideCount":case "pptMasterCount":case "pptxMasterCount":chrome.metricsPrivate.recordSmallCount&&chrome.metricsPrivate.recordSmallCount(v,a);break;case "csvNonEmptyCellCount":case "xlsNonEmptyCellCount":case "xlsxNonEmptyCellCount":case "csvFormattedCellCount":case "xlsFormattedCellCount":case "xlsxFormattedCellCount":chrome.metricsPrivate.recordCount&&
chrome.metricsPrivate.recordCount(v,a);break;default:console.warn("Record count ignored unknown metric "+v)}}else console.warn("Metrics cannot record count - invalid parameters")}}});
define("qowtRoot/errors/unique/scriptLoadingTimeout",["qowtRoot/errors/qowtException"],function(c){var l=function(){this.title="drive_open_timeout_error_short_msg";this.details="drive_open_timeout_error_msg";this.gaState="ScriptLoadingTimeout";c.apply(this,arguments);this.name="ScriptLoadingTimeout";Error.captureStackTrace(this,l)};l.prototype=Object.create(c.prototype);return l.prototype.constructor=l});
define("qowtRoot/utils/driveErrors",[],function(){return{OFFLINE:-1,AUTHENTICATION_TOKEN_NOT_ISSUED:400,INVALID_CREDENTIALS:401,FORBIDDEN:403,FILE_NOT_FOUND:404,INTERNAL_SERVER_ERROR:500,TIMEOUT:503}});
define("utils/gdrive/firstPartyAuth",["qowtRoot/third_party/when/when","qowtRoot/utils/driveErrors"],function(c,l){function k(){window[x]=void 0;window[v]=void 0;return c.resolve()}function a(){return g(q,n).then(function(){return g(q,e)}).then(function(){return g(q,y)}).then(function(){return Promise.reject({status:l.INVALID_CREDENTIALS})}).catch(function(a){return a?Promise.reject(a):Promise.resolve()})}function g(a,c){return new Promise(function(e,g){chrome.cookies.get({url:a,name:c},function(a){a&&
void 0!==a.value?(window[x]=a.value,g()):e()})})}function h(a,e,g,h){return c.promise(function(c,k){chrome.cookies.get({url:a,name:e},function(a){a&&void 0!==a.value?(window[g]=h?a.value:!!a.value,c()):k({status:l.INVALID_CREDENTIALS})})})}var q="https://*.google.com/",v="__OVERRIDE_SID",e="SAPISID",n="__Secure-1PAPISID",y="__Secure-3PAPISID",x="__SAPISID";return{setCookies:function(){return c.all([k(),a()])},setCookiesOlderWay:function(){return c.all([k(),h("http://*.google.com/","SID",v),h(q,e,
x,!0)])}}});define("qowtRoot/models/env",[],function(){return{pointsPerEm:12,fontUnit:"pt"}});
define("qowtRoot/utils/deprecatedUtils",["qowtRoot/models/env","qowtRoot/utils/typeUtils","qowtRoot/errors/qowtSilentError","qowtRoot/errors/errorCatcher"],function(c,l,k,a){var g={NodeType:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,1:"ELEMENT_NODE",2:"ATTRIBUTE_NODE",3:"TEXT_NODE",4:"CDATA_SECTION_NODE",5:"ENTITY_REFERENCE_NODE",
6:"ENTITY_NODE",7:"PROCESSING_INSTRUCTION_NODE",8:"COMMENT_NODE",9:"DOCUMENT_NODE",10:"DOCUMENT_TYPE_NODE",11:"DOCUMENT_FRAGMENT_NODE",12:"NOTATION_NODE"},RegExp:{HEX:/^#?([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/gi,HEX3:/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/gi},regExpExec:function(a,c){var g;if(l.isRegex(a)&&l.isString(c)){var e=a.exec(c);e&&e.length&&(g=e);a.lastIndex=0}return g},parseBoolean:function(a){return"false"===a||"False"===a||!1===a||0===a?!1:!0},computePercentValueOf:function(a,c){return a*
c/100},stripNode:function(a){for(var c=g.cpArray(a.childNodes),k=a.parentNode,e=0;e<c.length;e++)k.insertBefore(c[e],a);k.removeChild(a)},cpArray:function(a){for(var c=[],g=0;g<a.length;g++)c[c.length]=a[g];return c},cloneAndAttach:function(a,c,k){k=g.cloneDiv(a,k);g.copyAllContainedCanvases(a,k);c.appendChild(k);return k},cloneDiv:function(a,c){var k=a.cloneMe?a.cloneMe():a.cloneNode(!1);k.setEid&&k.setEid(a.getEid());for(var e=0;e<a.childNodes.length;e++){var l=a.childNodes[e];l.getAttribute&&"handlers"===
l.getAttribute("qowt-divtype")||(l=g.cloneDiv(l),k.appendChild(l))}c&&(k.id=c);return k},copyAllContainedCanvases:function(a,c){for(var k=a.querySelectorAll("canvas"),e=c.querySelectorAll("canvas"),l=0;l<k.length;l++)if(void 0!==k[l]&&void 0!==e[l]){var y=k[l].getContext("2d"),x=e[l].getContext("2d");g.cloneCanvasImage(y,x)}},cloneCanvasImage:function(c,g){if(0<c.canvas.width&&0<c.canvas.height){var l=c.getImageData(0,0,c.canvas.width,c.canvas.height);l?g.putImageData(l,0,0):(l=new k("Failed to execute putImageData on CanvasRenderingContext2D."),
a.handleError(l))}},getElementStyleString:function(a){var c="",g;for(g in a)c+=g+":"+a[g]+";";return c},appendJSONAttributes:function(a,c){for(var g in c)a[g]=c[g]},bulletTextMeasureElement:void 0,setBulletTextMeasureElement:function(){g.bulletTextMeasureElement={};g.bulletTextMeasureElement._bulletTextMeasureElement=document.createElement("P");g.bulletTextMeasureElement._bulletTextMeasureElement.className="bulletTextMeasureCss";g.bulletTextMeasureElement._bulletTextMeasureElement.style.position=
"absolute";g.bulletTextMeasureElement._bulletTextMeasureElement.style.visibility="hidden";g.bulletTextMeasureElement._bulletTextMeasureElement.height="auto";g.bulletTextMeasureElement._bulletTextMeasureElement.width="auto";g.bulletTextMeasureElement._bulletTextMeasureElement_Style=document.createElement("style");g.bulletTextMeasureElement._bulletTextMeasureElement_Style.type="text/css";document.getElementsByTagName("head")[0].appendChild(g.bulletTextMeasureElement._bulletTextMeasureElement_Style);
c.rootNode.appendChild(g.bulletTextMeasureElement._bulletTextMeasureElement)},setNumberTextMeasureElement:function(){g.numberTextMeasureElement={};g.numberTextMeasureElement._numberTextMeasureElement=document.createElement("P");g.numberTextMeasureElement._numberTextMeasureElement.className="numberTextMeasureCss";g.numberTextMeasureElement._numberTextMeasureElement.style.position="absolute";g.numberTextMeasureElement._numberTextMeasureElement.style.visibility="hidden";g.numberTextMeasureElement._numberTextMeasureElement.height=
"auto";g.numberTextMeasureElement._numberTextMeasureElement.width="auto";g.numberTextMeasureElement._numberTextMeasureElement_Style=document.createElement("style");g.numberTextMeasureElement._numberTextMeasureElement_Style.type="text/css";document.getElementsByTagName("head")[0].appendChild(g.numberTextMeasureElement._numberTextMeasureElement_Style);if(void 0===c.rootNodeContainer||null===c.rootNodeContainer)c.rootNodeContainer=document.getElementById("qowt-doc-root");c.rootNodeContainer.appendChild(g.numberTextMeasureElement._numberTextMeasureElement)},
returnUndefinedIfEmptyJson:function(a){return _.isEmpty(a)?void 0:a}};return g});
define("qowtRoot/utils/domUtils",["qowtRoot/utils/deprecatedUtils","qowtRoot/utils/typeUtils"],function(c,l){var k={totalHeight:function(a){return a.getBoundingClientRect().height},peerIndex:function(a){if(a){for(var c=0;a.previousSibling;)c++,a=a.previousSibling;return c}},isEditable:function(a){a.nodeType===Node.TEXT_NODE&&(a=a.parentNode);return(a=window.getComputedStyle(a))?"read-write"===a["-webkit-user-modify"]:!1},previousNode:function(a){for(var c=a?a.previousSibling:void 0;!c&&a&&a.parentNode;)a=
a.parentNode,c=a.previousSibling;for(;c&&c.lastChild;)c=c.lastChild;return c},nextNode:function(a){for(var c=a?a.nextSibling:void 0;!c&&a&&a.parentNode;)a=a.parentNode,c=a.nextSibling;for(;c&&c.firstChild;)c=c.firstChild;return c},rightMostLeafNode:function(a){for(a=a&&a.lastChild;a&&a.lastChild;)a=a.lastChild;return a},leftMostLeafNode:function(a){for(a=a&&a.firstChild;a&&a.firstChild;)a=a.firstChild;return a},getSiblingByIndex:function(a,c){for(;0<c;c--)if(a=a.nextSibling,!a)return null;return a},
insertAtStart:function(a,c){0<c.childNodes.length?c.insertBefore(a,c.childNodes[0]):c.appendChild(a)},insertAtEnd:function(a,c){c.appendChild(a)},insertAfter:function(a,c){var h=c.parentNode;h&&h.insertBefore(a,c.nextSibling)},insertBefore:function(a,c){var h=c.parentNode;h&&h.insertBefore(a,c)},insertAtSiblingOrParent:function(a,c){if(!a)throw Error("insertAtSiblingOrParent missing context");if(!a.parentNodeId&&!a.siblingNodeId)throw Error("insertAtSiblingOrParent requires either parentNodeId or siblingNodeId");
if(!a.parentNodeId)throw Error("insertAtSiblingOrParent missing parentNodeId");if(c&&!l.isFunction(c))throw Error("insertAtSiblingOrParent errorFuncton must be  a function");var h;(h=document.getElementById(a.siblingNodeId))?k.insertAfter(a.node,h):(h=document.getElementById(a.parentNodeId))?h.insertBefore(a.node,h.firstChild):c&&l.isFunction(c)&&c(" failed to insert node - no parent or sibling node found!")},relativePosition:function(a){if(a.nodeType!==Node.TEXT_NODE)throw Error("error: relativePosition needs to be given text node");
var c=0,h=0;for(a=a.previousSibling;a&&a.nodeType===Node.TEXT_NODE;)c+=a.textContent.length,a=a.previousSibling,h++;return{textNodeIndex:h,characterOffset:c}},absolutePos:function(a){var c=0,h=0;if(a.offsetParent){do c+=a.offsetTop,h+=a.offsetLeft,a=a.offsetParent;while(null!==a)}return{top:c,left:h}},absoluteScroll:function(a){var c=0,h=0;if(a.offsetParent){do c+=a.scrollTop,h+=a.scrollLeft,a=a.offsetParent;while(null!==a)}return{top:c,left:h}},getById:function(a){if(1<arguments.length){for(var c=
0,h=[],q=arguments.length;c<q;c++)h.push(k.getById(arguments[c]));return h}l.isString(a)&&(a=document.getElementById(a));return a},prependChildrenID:function(a,c,h){h=h||"-";if(a&&a.id&&(a.id=""+c+h+a.id,a.childNodes&&a.childNodes.length))for(var l=0,v=a.childNodes.length;l<v;l++)k.prependChildrenID(a.childNodes[l],c,h)},insert:function(a,g,h){switch(h){case "replace":a.parentNode.replaceChild(g,a);break;case "before":a.parentNode.insertBefore(g,a);break;case "after":if(a===a.parentNode.childNodes[a.parentNode.childNodes.length-
1])a.parentNode.appendChild(g);else{for(a=a.nextSibling;a&&a.nodeType!==c.NodeType.ELEMENT_NODE;)a=a.nextSibling;a.parentNode.insertBefore(g,a)}break;case "top":a.insertBefore(g,a.childNodes[0]);break;default:a.appendChild(g)}},stopEvent:function(a){a&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())},contains:function(a,c){return a?!!(a.compareDocumentPosition(c)&document.DOCUMENT_POSITION_CONTAINED_BY):!1},isElementInViewport:function(a){a=a.getBoundingClientRect();
return 0<=a.top&&0<=a.left&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a.right<=(window.innerWidth||document.documentElement.clientWidth)},removeNode:function(a){a&&l.isNode(a)&&a.parentNode&&l.isNode(a.parentNode)&&a.parentNode.removeChild(a)},getTransformValue:function(a,c){var h=a.style.webkitTransform;if(""!==h)for(var h=h.split(")"),k=0;k<h.length;k++){var l=h[k].split("(");if(l[0].trim()===c)switch(c){case "scale":return k=l[1].split(","),h=k[0].trim(),k=k[1].trim(),
{flipH:h,flipV:k};case "rotate":return l[1]}}return!1},cloneStyle:function(a,c){c&&a&&(a.style.cssText=c.style.cssText)},cloneNode:function(a,c,h){var k;k=a.cloneMe?a.cloneMe(h):h?document.importNode(a,!1):a.cloneNode(!1);k.setEid&&k.setEid(a.getEid());if(c)for(var l=0;l<a.childNodes.length;l++){var e=this.cloneNode(a.childNodes[l],c,h);k.appendChild(e)}return k}};return k});
define("utils/gdrive/apiaryLoader",["qowtRoot/third_party/when/when","qowtRoot/utils/domUtils","qowtRoot/utils/driveErrors"],function(c,l,k){function a(){l.removeNode(g);var a=document.createElement("script");a.id=g;a.src=h+"?onload="+q;document.getElementsByTagName("head")[0].appendChild(a)}var g="__apiary_script",h="https://apis.google.com/js/client.js",q="__apiaryLoaded";return{load:function(){return navigator.onLine?c.promise(function(c){window[q]=function(){window[q]=void 0;c()};a()}):c.reject({status:k.OFFLINE})}}});
define("utils/gdrive/driveUtils",[],function(){return{getErrorCode:function(c){return c&&c.result&&c.result.error&&c.result.error.code||c&&c.status},getErrorReason:function(c){return c&&c.result&&c.result.error&&c.result.error.errors&&c.result.error.errors[0]&&c.result.error.errors[0].reason},getErrorMessage:function(c){return c&&c.result&&c.result.error&&c.result.error.message||c&&c.statusText},isValidDriveId:function(c){return c&&/^[a-zA-Z0-9_-]+$/.test(c)}}});
define("utils/gdrive/drive","qowtRoot/errors/errorCatcher qowtRoot/errors/qowtSilentError qowtRoot/errors/unique/scriptLoadingTimeout qowtRoot/utils/driveErrors utils/gdrive/firstPartyAuth utils/gdrive/apiaryLoader utils/gdrive/driveUtils qowtRoot/third_party/when/when".split(" "),function(c,l,k,a,g,h,q,v){function e(){return ba?v.resolve():v.all([h.load(),g.setCookies()]).timeout(3E4,new k("apiary script loading timeout")).then(n).then(function(){ba=!0})}function n(){gapi.client.setApiKey("AIzaSyD-qQA49y2Lv7b0KJCQghmHKe0iMHFnIts");
gapi.config.update("googleapis.config/auth/useFirstPartyAuth",!0);E&&gapi.config.update("googleapis.config/fogId",E)}function y(a){return ca?v.resolve(ca):z({path:"/drive/v2/files/"+a,method:"GET",params:{updateViewedDate:!0,supportsTeamDrives:!0}},"Drive.getMetaData_").then(function(a){return ca=a&&a.result}).catch(R)}function x(a){return z({path:"/drive/v2/files/"+a+"?alt=media",method:"GET",params:{supportsTeamDrives:!0}},"Drive.download_").then(G).catch(R)}function O(a,c,e){a={path:"/drive/v2/files/"+
a+"/copy",method:"POST",params:{convert:c,supportsTeamDrives:!0}};e.title&&(a.body={title:e.title});return z(a,"Drive.createFileFromDriveFile_")}function F(a,e,g){g&&g.mimeType||c.handleError(new l("Drive upload called with no mime type."));var h=v.defer(),k=new FileReader;k.readAsBinaryString(a);k.onload=function(){var a=g.mimeType,c=btoa(k.result),a="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify(g)+"\r\n---------314159265358979323846\r\nContent-Type: "+
a+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+c+"\r\n---------314159265358979323846--";e.headers={"Content-Type":'multipart/mixed; boundary="-------314159265358979323846"'};e.body=a;z(e,"Drive.upload_").then(h.resolve,h.reject)};return h.promise}function z(a,c){var e=v.defer();gapi.client.request(a).then(e.resolve,function(a,h){D(h)?v.all([g.setCookies()]).done(function(){gapi.client.request(a).then(e.resolve,function(h){D(h)?v.all([g.setCookiesOlderWay()]).done(function(){gapi.client.request(a).then(e.resolve,
u.bind(null,e,c))},function(a){e.reject(a)}):u(e,c,h)})},function(a){e.reject(a)}):A(h)?gapi.client.request(a).then(e.resolve,u.bind(null,e,c)):u(e,c,h)}.bind(null,a));return e.promise}function A(c){var e=q.getErrorCode(c);c=q.getErrorReason(c);return e===a.INTERNAL_SERVER_ERROR||e===a.TIMEOUT||e===a.FORBIDDEN&&("rateLimitExceeded"===c||"userRateLimitExceeded"===c)}function D(c){c=q.getErrorCode(c);return c===a.INVALID_CREDENTIALS||c===a.AUTHENTICATION_TOKEN_NOT_ISSUED}function u(a,e,g){e+=" error:";
var h=q.getErrorCode(g),k=q.getErrorMessage(g);console.error([e,h,k].join(" "));c.handleError(new l([e,h].join(" ")));a.reject(g)}function G(a){a=a.body;for(var c=a.length,e=new ArrayBuffer(c),e=new Uint8Array(e),g=0;g<c;g++)e[g]=a.charCodeAt(g);return new Blob([e])}function R(a){throw a;}var ba=!1,ca,E;return{getMetaData:function(a){return e().then(y.bind(null,a))},download:function(a){return e().then(x.bind(null,a))},upload:function(a,c,g){g={path:"/upload/drive/v2/files/"+a,method:"PUT",params:{newRevision:g?
"true":"false",uploadType:"multipart",alt:"json",supportsTeamDrives:!0}};return e().then(y.bind(null,a)).then(F.bind(null,c,g))},createFileFromDriveFile:function(a,c,g){return e().then(O.bind(null,a,c,g))},createFileFromNonDriveFile:function(a,c,g){c={path:"/upload/drive/v2/files/",method:"POST",params:{uploadType:"multipart",convert:c,supportsTeamDrives:!0}};return e().then(F.bind(null,a,c,g))},clearCachedMetaData:function(){ca=void 0},setUserId:function(a){E=a}}});
define("qowtRoot/utils/pathUtils",["qowtRoot/utils/typeUtils"],function(c){return{create:function(l){return function(){var k={extension:function(){return g},dirName:function(){return q},baseName:function(){return h},fileName:function(){return a},smartBaseName:function(){var a=k.baseName();if(a)var c=/(-[0-9]+)$/g,g=a.match(c),a=g?a.replace(c,--g):a+"-1";return a}},a,g,h,q;(function(){if(l&&c.isString(l)){var k=l.lastIndexOf("/");q=-1!==k?l.substr(0,k+1):void 0;a=-1!==k?l.substr(k+1):l;k=a.lastIndexOf(".");
h=-1!==k?a.substr(0,k):a;var e=a.length;g=-1!==k?a.substr(k+1,e):void 0}})();return k}()}}});define("qowtRoot/utils/uuid",[],function(){return{generateUUID:function(){var c=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var k=(c+16*Math.random())%16|0;c=Math.floor(c/16);return("x"===l?k:k&7|8).toString(16)})}}});
define("controllers/fileManager","qowtRoot/third_party/when/when utils/converter utils/xhr utils/pluginLoader utils/fileWriter utils/metrics utils/gdrive/drive utils/gdrive/driveUtils ui/progressSpinner controllers/appState qowtRoot/utils/i18n qowtRoot/utils/tryUtils qowtRoot/utils/pathUtils qowtRoot/errors/qowtException qowtRoot/errors/unique/httpErrorFileNotFound qowtRoot/errors/unique/httpErrorZero qowtRoot/errors/unique/timeoutError qowtRoot/errors/unique/scriptLoadingTimeout qowtRoot/utils/typeUtils qowtRoot/utils/driveErrors qowtRoot/utils/uuid third_party/lo-dash/lo-dash.min".split(" "),function(c,
l,k,a,g,h,q,v,e,n,y,x,O,F,z,A,D,u,G,R,ba){var ca,E=function(){};E.prototype={__proto__:Object.prototype,init:function(a,e){this.config_=a;this.uuid_=e;this.isReady=!1;this.fileTypeKnown=c.defer();var g=c(this.fileTypeKnown.promise).then(this.loadPlugin_.bind(this)).catch(function(a){throw a;}),h=c.resolve().then(this.tryToRestoreOrDeleteFromCache_.bind(this)).catch(this.openOriginalFile_.bind(this));return c.all([g,h]).then(this.whenDone_.bind(this))},getUUID:function(){return this.getCache().uuid},
updateConfigAndCache:function(a){a&&(this.config_.preferredFilename=this.config_.userFile.name,this.config_.userFile=void 0);this.config_.isDownloaded=!0;this.config_.isRenamed=a;this.cacheInfo_()},getCache:function(){var a=window.sessionStorage.getItem("__fileManagerCache");return x.ignore(JSON.parse.bind(JSON,a))||{}},getEntryPoint:function(){return ca},originalURL:function(){return _.get(this,"config_.originalURL")},privateFilePath:function(){return this.returnFilePath_(_.get(this,"config_.privateFile",
{}))},downloadFilePath:function(){return this.returnFilePath_(_.get(this,"config_.downloadFile",{}))},userFilePath:function(){return this.returnFilePath_(_.get(this,"config_.userFile",{}))},mimeTypeFromFileName:function(a){return l.extension2Mime(l.name2ext(a))},mimeType:function(){var a=this.config_.mimeType;l.mime2App(a)||(a=this.userFilePath()||this.privateFilePath()||this.originalURL(),a=O.create(a).extension()||this.config_.extension,a=l.extension2Mime(a));return a},displayName:function(){var a=
_.get(this,"config_.preferredFilename",{});if(0<a.length)return a;var c;if(a=this.userFilePath()||this.originalURL()){a=O.create(a).fileName();try{c=window.decodeURIComponent(a)}catch(e){try{c=window.unescape(a)}catch(g){c=a}}}else c=this.config_.title;return c},driveDocId:function(){return _.get(this,"config_.driveDocId")},driveFileRole:function(){return _.get(this,"config_.driveFileRole")},isNewDocument:function(){return _.get(this,"config_.newDocument")},isEmbedded:function(){return _.get(this,
"config_.embedded")},createPrivateFile:function(a){this.config_.mimeType=l.extension2Mime(a);return this.createPrivateFile_(a).then(this.cacheInfo_.bind(this))},overwriteUserFile:function(a){return this.config_.privateFile?this.config_.driveDocId||this.config_.userFile?this.config_.driveDocId?this.uploadDriveFile_(a):this.copyFile_(this.config_.privateFile,this.config_.userFile):c.reject(Error("Cannot overwrite user file: No user or drive file")):c.reject(Error("Cannot overwrite user file: private is file missing"))},
newUserFile:function(a,e){function g(a){return q.createFileFromNonDriveFile(a,!1,k).catch(function(){return this.saveAsLocal_()}.bind(this))}var h,k;this.config_.privateFile?!this.config_.driveDocId||e?h=this.saveAsLocal_(a):a?(k={title:this.nameForCopiedFile_()},h=q.createFileFromDriveFile(this.config_.driveDocId,!1,k)):(k={title:this.nameForSaveAsFile_(),mimeType:this.mimeType(),parents:[_.get(this,"config_.parents[0]")]},h=this.getFileFromEntry_(this.config_.privateFile).then(g.bind(this))):h=
c.reject(Error("Cannot create new user file: Private file missing"));return h},downloadToLocalFile:function(){this.getFileFromEntry_(this.config_.downloadFile).then(function(a){a=new File([a],a.name,{type:this.mimeTypeFromFileName(a.name)});a=window.URL.createObjectURL(a);var c=this.tryAndGetDownloadFileName();chrome.downloads.download({url:a,filename:c,conflictAction:"uniquify",saveAs:!1})}.bind(this))},tryAndGetDownloadFileName:function(){var a=_.get(this,"config_.downloadFileName","downloadedFile"),
c="."+(this.config_.extension?this.config_.extension:l.mime2Extension(this.mimeType()));try{a=a.replace(/[<>:"/\\|?*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()}),/(\.do[ct][xm]?|\.p[po]t[xm]?|\.xl[st][xm]?|\.csv)$/i.exec(a)||(a+=c)}catch(e){a="downloadedFile"+c}return a},convertToDocs:function(){var a={title:this.nameForConvertedFile_(),mimeType:this.mimeType()};return this.config_.driveDocId?q.createFileFromDriveFile(this.config_.driveDocId,!0,a):this.getFileFromEntry_(this.config_.privateFile).then(function(c){return q.createFileFromNonDriveFile(c,
!0,a)})},cacheFileDetails:function(a){window.sessionStorage.setItem("__fileManagerCache",JSON.stringify(a))},returnFilePath_:function(a){return a.fullPath||a.name},getFileType_:function(){var a;this.config_.driveDocId?a="driveDoc":this.config_.streamURL?a="stream":this.config_.userFile?a="userFile":this.config_.newDocument&&(a="newdocument");return a},getDriveDoc_:function(){return q.getMetaData(this.config_.driveDocId).then(function(a){void 0===a.mimeType||void 0===a.title||void 0===a.id?a=void 0===
l.mime2App(a.mimeType)?c.reject(Error("Drive mimeType not an MS Office mimeType")):c.reject(Error("Drive document missing crucial information")):(this.config_.mimeType=a.mimeType,this.config_.extension=a.fileExtension,this.config_.title=a.title,this.config_.driveDocId=a.id,this.config_.parents=a.parents,this.config_.driveFileRole=_.get(a,"userPermission.role"),a=this.createPrivateFile_().then(this.updateInfoAndDownload_.bind(this,"DownloadingDriveDoc")));return a}.bind(this)).yield(!0)},getStream_:function(){return this.createPrivateFile_().then(this.updateInfoAndDownload_.bind(this,
"DownloadingStream")).yield(!0)},getUserFile_:function(){return this.createPrivateFile_().then(function(){this.updateAppStateAndCache_("LocalFile");return this.copyFile_(this.config_.userFile,this.config_.privateFile)}.bind(this))},getNewDocument_:function(a){"word"===a?(this.config_.mimeType="application/vnd.openxmlformats-officedocument.wordprocessingml.document",this.config_.title="Untitled document.docx"):"point"===a?(this.config_.mimeType="application/vnd.openxmlformats-officedocument.presentationml.presentation",
this.config_.title="Untitled presentation.pptx"):"sheet"===a&&(this.config_.mimeType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",this.config_.title="Untitled spreadsheet.xlsx");return this.createPrivateFile_().then(this.updateInfoAndLoadNewDocument_.bind(this,"LoadingNewDocument",a)).yield(!0)},updateInfoAndLoadNewDocument_:function(a,c){this.updateAppStateAndCache_(a);return this.loadNewDocument_(c)},getTemplateUrl_:function(a){if("word"===a)return"templates/blank.docx";if("point"===
a)return"templates/blank.pptx";if("sheet"===a)return"templates/blank.xlsx"},loadNewDocument_:function(a){e.show();var c=e.addContributor(.9);a=this.getTemplateUrl_(a);return(new k({baseUrl:chrome.runtime.getURL(a)})).send().then(function(a){return(new g(this.config_.privateFile)).writeData(a)}.bind(this),void 0,c).then(function(){this.config_.isDownloaded=!0;this.cacheInfo_();c(1);e.hide()}.bind(this))},updateInfoAndDownload_:function(a){this.updateAppStateAndCache_(a);return this.download_()},updateAppStateAndCache_:function(a){this.initAppState_(a);
this.cacheInfo_();this.fileTypeKnown.resolve()},restoreConfigFromCache_:function(a){this.config_.isDownloaded=a.isDownloaded;this.config_.isRenamed=a.isRenamed;this.config_.mimeType=a.mimeType||this.config_.mimeType;this.config_.extension=a.extension||this.config_.extension;this.config_.driveDocId=a.driveDocId||this.config_.driveDocId;this.config_.driveFileRole=a.driveFileRole||this.config_.driveFileRole;this.config_.newDocument=a.newDocument||this.config_.newDocument;this.config_.title=a.title||
this.config_.title;this.config_.parents=a.parents||this.config_.parents;this.config_.originalURL=a.originalURL||this.config_.originalURL},deleteFromCache_:function(a){return this.deletePrivateFile_(a).then(this.cacheFileDetails.bind(this,{}))},tryDeletingPrivateFile_:function(a){function e(){return c.reject(Error("IncompleteDownload"))}function g(){return c.reject(Error("CacheDeleteFailed"))}return a.privateFilePath?this.deleteFromCache_(a.privateFilePath).then(e,g):c.reject(Error("NoPrivateFile"))},
tryToRestoreOrDeleteFromCache_:function(){var a;(a=this.getCache())&&a.uuid===this.uuid_?a.isDownloaded?(ca="restore",this.restoreConfigFromCache_(a),a=this.tryToRestoreFiles_(a)):a=this.tryDeletingPrivateFile_(a):a=c.reject(Error("NoCache"));return a},saveFileEntryAndUpdateCache_:function(a){this.config_.userFile=a;this.cacheInfo_()},tryToRestoreFiles_:function(a){function e(){this.config_.downloadFileName=a.downloadFileName;this.updateAppStateAndCache_("BrowserRefresh");return a.userFileId?this.restoreFileById_(a.userFileId).then(this.saveFileEntryAndUpdateCache_.bind(this)).yield(!0):
!0}return a.privateFilePath?this.restorePrivateFile_(a.privateFilePath).then(this.restoreDownloadFile_.bind(this,a.downloadFilePath)).then(e.bind(this)):c.reject(Error("There is no cached private file path"))},nameForCopiedFile_:function(){return"Copy of "+this.displayName()},nameForSaveAsFile_:function(){return"Copy of "+O.create(this.displayName()).baseName()+"."+l.mime2Extension(this.mimeType())},nameForConvertedFile_:function(){return O.create(this.displayName()).baseName()},saveAsLocal_:function(a){var e=
O.create(this.displayName()),g=this.config_.userFile&&!this.config_.isRenamed?e.smartBaseName():e.baseName(),h=l.mime2App(this.mimeType());a=a?[e.extension()]:ta[h];g+="."+(-1===a.indexOf(e.extension())?a[0]:e.extension());return this.selectFile_(g,a).then(function(a){this.config_.mimeType=void 0;this.config_.extension=void 0;this.config_.driveDocId=void 0;this.config_.driveFileRole=void 0;this.config_.preferredFilename=void 0;this.config_.newDocument=void 0;this.saveFileEntryAndUpdateCache_(a);return this.copyFile_(this.config_.privateFile,
this.config_.userFile)}.bind(this),function(){return c.reject({userCancelled:!0})})},initAppState_:function(a){var c=this.mimeType();if(c&&0!==c.length)h.recordFileType(l.mime2Extension(c)),n.setApp(l.mime2App(c)),n.updateState(a);else throw Error("Unknown mimeType; unable to know which app to load");},whenDone_:function(){this.isReady=!0;return c.resolve(!0)},handleDriveError_:function(a){switch(v.getErrorCode(a)){case R.FILE_NOT_FOUND:this.throwFileNotFoundException_();break;case R.INTERNAL_SERVER_ERROR:case R.OFFLINE:this.throwTemporaryUnableToOpenException_(a);
break;default:this.handleGenericFileError_(a)}},throwTemporaryUnableToOpenException_:function(a){throw new F({title:"temporary_unable_to_open_error_short_msg",details:"temporary_unable_to_open_error_msg",message:G.isString(a)&&a||a.message||v.getErrorCode(a)});},handleGenericFileError_:function(a){if("SecurityError"===a.name)this.throwSecurityException_();else if(a instanceof D)this.throwTimeoutException_(a);else{if(a instanceof A)throw a;if(a instanceof z)throw a;if(a instanceof u)throw a;this.throwFileOpenCrashException_(a)}},
throwEntryPointException_:function(){throw new F({title:"entry_point_error_short_msg",details:"entry_point_error_msg"});},throwSecurityException_:function(){throw new F({title:"file_opened_in_incognito_mode_error_title",details:"file_opened_in_incognito_mode_error_details"});},throwTimeoutException_:function(a){a.title=y.getMessage("download_file_timeout_error_short_msg");a.details=y.getMessage("download_file_timeout_error_msg");throw a;},throwFileNotFoundException_:function(){throw new F({title:"file_not_found_error_short_msg",
details:"file_not_found_error_msg"});},throwFileOpenCrashException_:function(a){var c=new F({title:"file_open_crash_error_short_msg",details:"file_open_crash_error_msg",message:G.isString(a)&&a||a.message||v.getErrorCode(a)});c.stack=a.stack;throw c;},cacheInfo_:function(){var a={originalURL:this.config_.originalURL,isDownloaded:this.config_.isDownloaded,streamURL:this.config_.streamURL,mimeType:this.config_.mimeType,extension:this.config_.extension,privateFilePath:this.privateFilePath(),downloadFilePath:this.downloadFilePath(),
downloadFileName:this.config_.downloadFileName,userFileId:this.config_.userFile&&window.RequestFileSystem&&chrome.fileSystem.retainEntry(this.config_.userFile),driveDocId:this.config_.driveDocId,newdocument:this.config_.newdocument,driveFileRole:this.config_.driveFileRole,title:this.config_.title,parents:this.config_.parents,isRenamed:this.config_.isRenamed,uuid:this.uuid_};this.cacheFileDetails(a)},restoreFileById_:function(a){return c.promise(function(c,e){window.RequestFileSystem?chrome.fileSystem.restoreEntry(a,
c):e(Error("NoAccessToFileSystem"))})},restorePrivateFile_:function(a){return this.getTempFs_().then(function(c){return a?this.openFileAndSaveEntry_(c,a,"privateFile"):this.createPrivateFile_()}.bind(this))},createDownloadableFile_:function(){return this.getTempFs_().then(function(a){return this.createDownloadableFileFromPrivateFile_(a)}.bind(this)).then(function(a){this.config_.downloadFile=a;this.config_.downloadFileName=this.displayName()}.bind(this))},restoreDownloadFile_:function(a){return this.getTempFs_().then(function(c){return a?
this.openFileAndSaveEntry_(c,a,"downloadFile"):this.createDownloadableFile_()}.bind(this))},download_:function(){e.show();var a=e.addContributor(.9);return(this.config_.driveDocId?q.download(this.config_.driveDocId):void 0===this.config_.streamURL?c.reject(Error("FileManager needs URL to download")):(new k({baseUrl:this.config_.streamURL})).send()).then(function(a){return(new g(this.config_.privateFile)).writeData(a)}.bind(this),void 0,a).then(function(){this.config_.isDownloaded=!0;this.cacheInfo_();
a(1);e.hide()}.bind(this))},loadPlugin_:function(){var c=this.mimeType(),e=l.mime2App(c);if(!e||0===e.length)throw Error("Could not find app from mimeType: "+c);return(new a).loadPlugin(e)},selectFile_:function(a,e){return c.promise(function(c,g){window.chrome.fileSystem.chooseEntry({type:"saveFile",suggestedName:a,accepts:[{extensions:e}]},function(a){window.chrome.runtime.lastError&&"User cancelled"===window.chrome.runtime.lastError.message?g(Error(window.chrome.runtime.lastError.message)):window.chrome.fileSystem.getDisplayPath(a,
function(e){a.localFilePath=e;c(a)})}.bind(this))}.bind(this))},getTempFs_:function(){return c.promise(function(a,c){window.webkitRequestFileSystem(window.TEMPORARY,1048576,a,c)})},getFileFromFs_:function(a,e,g){return c.promise(function(c,h){a.root.getFile(e,g,c,h)})},createFile_:function(a,c){return this.getFileFromFs_(a,c,{create:!0,exclusive:!1})},openFile_:function(a,c){return this.getFileFromFs_(a,c,{create:!1})},createDownloadableFileFromPrivateFile_:function(a){return c.promise(function(c,
e){var g=this.config_.privateFile,h=g.name.split("."),h=[h[0],h[1]].join("_downloadable.");g.copyTo(a.root,h,c,e)}.bind(this))},deletePrivateFile_:function(a){return this.getTempFs_().then(function(e){return c.promise(function(c,g){e.root.getFile(a,{create:!1},function(a){a.remove(c,g)})})})},createPrivateFile_:function(a){return this.getTempFs_().then(function(a,c){var e=ba.generateUUID(),g=a||l.mime2Extension(this.mimeType()),e=[e,g].join(".");return this.createFile_(c,e)}.bind(this,a)).then(function(a){return this.config_.privateFile=
a}.bind(this))},openFileAndSaveEntry_:function(a,c,e){return this.openFile_(a,c).then(function(a){return this.config_[e]=a}.bind(this))},copyFile_:function(a,e){function h(a,e){var k=new g(a);return"File"===e.constructor.name?k.writeData(e):c.reject("Cannot copy file: Source is not a File")}return void 0===e?c.reject(Error("Cannot copy file: Missing destination file")):e.isFile?void 0===a?c.reject(Error("Cannot copy file: Missing source file")):a.file?this.getFileFromEntry_(a).then(h.bind(null,e)):
h(e,a):c.reject("Cannot copy file: Destination is not a FileEntry/ a File")},uploadDriveFile_:function(a){var c=this.config_.driveDocId;return this.getFileFromEntry_(this.config_.privateFile).then(function(e){return q.upload(c,e,a)})},getFileFromEntry_:function(a){return c.promise(function(c,e){a.file?a.file(c):e(Error("Entry missing file function"))})},openOriginalFile_:function(a){var c;switch(this.getFileType_()){case "driveDoc":v.isValidDriveId(this.config_.driveDocId_)?c=this.getDriveDoc_().catch(this.handleDriveError_.bind(this)):
this.throwFileNotFoundException_();break;case "stream":c=this.getStream_().catch(this.handleGenericFileError_.bind(this));break;case "userFile":c=this.getUserFile_().catch(this.handleGenericFileError_.bind(this));break;case "newdocument":c=this.getNewDocument_(this.config_.newDocument).catch(this.handleGenericFileError_.bind(this));break;default:this.throwEntryPointException_(a)}return c.then(this.createDownloadableFile_.bind(this)).then(this.cacheInfo_.bind(this))}};var ta={word:["docx"],sheet:["xlsx"],
point:["pptx"]};return new E});
define("qowtRoot/utils/errorUtils",[],function(){return{stripStack:function(c){var l="";if(c=c.stack?c.stack.split("\n"):void 0)for(var l=l+(c[0]+";"),k=1;k<c.length;k++){var a=c[k].match(/\s*at\s*(\S*)\s*(\S*):(\d+):(\d+)\)/);if(a){a.shift();var g=a[1].lastIndexOf("/");a[1]=-1!==g?a[1].substr(g+1):a[1];l+=a.join(":")+";"}}return l},errorInfo:function(c){var l;c&&(l=c.e,c.e_info&&c.e_info.category&&(l+="; Category: "+c.e_info.category));return l},errorCode:function(c){return c&&c.split(";",1)[0]},
category:function(c){a:{c=c.split(";");for(var l=1;l<c.length;l++){var k=c[l].split(":");if("Category"===k[0].trim()){c=k[1].trim();break a}}c=""}return c}}});
define("errorObservers/gaExceptionLogger",["qowtRoot/pubsub/pubsub","qowtRoot/utils/errorUtils","utils/analytics/googleAnalytics"],function(c,l,k){var a="idle";c.subscribe("qowt:init",function(){a="idle"});return function(c){if("idle"===a){var h={msg:l.stripStack(c)||c.message||c.name||"unknown error",fatal:c.fatal};console.log("GA logging as:",h);k.sendException(h);a=c.fatal?"fatal exception logged":a}}});define("errorObservers/hideUI",["ui/progressSpinner"],function(c){return function(){c.hide()}});
define("errorObservers/showQOWT",[],function(){return function(c){c.silent||(document.getElementById("sandbox").style.display="block")}});
define("utils/sendUserFeedback",["qowtRoot/errors/errorCatcher","qowtRoot/utils/errorUtils","controllers/fileManager"],function(c,l,k){var a=[];c.addObserver(function(c){var h=c.fatal?"FATAL: ":"NonFatal: ",h=h+(l.stripStack(c)||c.message||c.name||"unknown error");a.push(h)});return{openFeedbackUI:function(c){c={requestFeedback:!0,feedbackInfo:{description:c,categoryTag:"FromQuickoffice",pageUrl:k.originalURL(),systemInformation:[{key:"appID",value:chrome.runtime.id},{key:"appVersion",value:chrome.runtime.getManifest().version},
{key:"mimeType",value:k.mimeType()},{key:"exceptions",value:a.toString()}]}};chrome.runtime.sendMessage("gfdkimpbcpahaombhbimeihdjnejgicl",c,function(){})}}});
define("utils/backgroundPageUtils",["qowtRoot/utils/promiseUtils","qowtRoot/third_party/when/when"],function(c){function l(){var g=new Promise(function(a,c){chrome&&chrome.runtime&&chrome.runtime.getBackgroundPage?chrome.runtime.getBackgroundPage(a):c(Error("chrome.runtime.getBackgroundPage not available"))});return Promise.race([g,c.delayThenReject(a,Error("chrome.runtime.getBackgroundPage timed out"))])}function k(a){var k=new Promise(function(c){var e=function(a){a.isReady?c(a):window.setTimeout(e.bind(null,
a),10)};e(a)});return Promise.race([k,c.delayThenReject(g,Error("Background page timed out getting ready"))])}var a=1E4,g=1E4;return{getPage:function(){return l().then(k)}}});
define("utils/urlUtils",["qowtRoot/utils/typeUtils"],function(c){return{parseURL:function(l){if(!c.isString(l))throw Error("Invalid URI");var k=l.split("?");l=k[0];var k=1<k.length?k[1]:"",a=this.parseQueryString(k);return{baseURL:l,queryString:k,queryObject:a}},parseQueryString:function(l){if(!c.isString(l))throw Error("Invalid QueryString");var k;if(l){k={};l=l.split(/[&;]/g);for(var a=0;a<l.length;a++)if(l[a]){var g=l[a].split("="),h=decodeURIComponent(g[0]).toLowerCase(),g=1<g.length?decodeURIComponent(g[1]):
void 0;k[h]=g}}return k},stripQueryString:function(){var c=this.parseURL(window.location.href);window.history.replaceState({},"",c.baseURL)}}});
!function(c,l){function k(k,n,u){var y=[];n=1==n?{entropy:!0}:n||{};k=q(h(n.entropy?[k,e(c)]:null==k?v():k,3),y);var E=new a(y),y=function(){for(var a=E.g(O),c=z,e=0;a<A;)a=(a+e)*x,c*=x,e=E.g(1);for(;a>=D;)a/=2,c/=2,e>>>=1;return(a+e)/c};return y.int32=function(){return 0|E.g(4)},y.quick=function(){return E.g(4)/4294967296},y.double=y,q(e(E.S),c),(n.pass||u||function(a,c,e,h){return h&&(h.S&&g(h,E),a.state=function(){return g(E,{})}),e?(l[F]=a,c):a})(y,k,"global"in n?n.global:this==l,n.state)}function a(a){var c,
e=a.length,g=this,h=0,k=g.i=g.j=0,l=g.S=[];for(e||(a=[e++]);h<x;)l[h]=h++;for(h=0;h<x;h++)l[h]=l[k=u&k+a[h%e]+(c=l[h])],l[k]=c;(g.g=function(a){for(var c,e=0,h=g.i,k=g.j,l=g.S;a--;)c=l[h=u&h+1],e=e*x+l[u&(l[h]=l[k=u&k+c])+(l[k]=c)];return g.i=h,g.j=k,e})(x)}function g(a,c){return c.i=a.i,c.j=a.j,c.S=a.S.slice(),c}function h(a,c){var e,g=[],k=typeof a;if(c&&"object"==k)for(e in a)try{g.push(h(a[e],c-1))}catch(l){}return g.length?g:"string"==k?a:a+"\x00"}function q(a,c){for(var g,h=a+"",k=0;k<h.length;)c[u&
k]=u&(g^=19*c[u&k])+h.charCodeAt(k++);return e(c)}function v(){try{var a;return n&&(a=n.randomBytes)?a=a(x):(a=new Uint8Array(x),(y.crypto||y.msCrypto).getRandomValues(a)),e(a)}catch(g){return a=y.navigator,[+new Date,y,a&&a.plugins,y.screen,e(c)]}}function e(a){return String.fromCharCode.apply(0,a)}var n,y=this,x=256,O=6,F="random",z=l.pow(x,O),A=l.pow(2,52),D=2*A,u=x-1;if(l["seed"+F]=k,q(l.random(),c),"object"==typeof module&&module.exports){module.exports=k;try{n=require("crypto")}catch(G){}}else"function"==
typeof define&&define.amd&&define("third_party/seedrandom/seedrandom.min",[],function(){return k})}([],Math);define("utils/timeUtils",[],function(){return{DAY_IN_MS:864E5,WEEK_IN_MS:6048E5,weekSinceEpoch:function(){var c=Date.now()/this.WEEK_IN_MS;return Math.ceil(c)}}});
define("common/elements/google-consumer-survey/google-consumer-survey",["qowtRoot/utils/localStorageManager","qowtRoot/utils/uuid","third_party/seedrandom/seedrandom.min","utils/timeUtils"],function(c,l,k,a){var g=90*a.DAY_IN_MS;window.GoogleConsumerSurvey=Polymer({is:"google-consumer-survey",properties:{siteId:{reflect:!1,value:""},targetPercentage:{reflect:!1,value:void 0},bucketing:{reflect:!1,value:void 0}},created:function(){this.UUID=c.getItem("__GCS_uuid")||l.generateUUID();c.setItem("__GCS_uuid",
this.UUID);window._402=window._402||{};window._402.promptHandlerUrl="https://www.google.com/insights/consumersurveys/gk/prompt"},attached:function(){this.shouldLaunchSurvey_()&&this.launchSurvey_()},shouldLaunchSurvey_:function(){var c=!1;this.targetPercentage||this.bucketing?this.surveyResultsStale_(a.WEEK_IN_MS)&&(c=this.sampleUser_()):c=this.surveyResultsStale_(g);return c},sampleUser_:function(){var c=!1,g=parseInt(this.UUID.split("-")[1],16),l=this.bucketing?65535/this.bucketing:65535,e=a.weekSinceEpoch(),
n=e%(this.bucketing||1)*l;g>=n&&g<n+l&&(this.fire("user-considered-for-sampling"),k(g*e)()<(void 0===this.targetPercentage?1:this.targetPercentage/100)&&(this.fire("user-sampled-for-survey"),c=!0));return c},surveyResultsStale_:function(a){var g=!0,k=c.getItem("__GCS_site_"+this.siteId);k&&(g=Date.now()-k>a);return g},launchSurvey_:function(){this.siteId&&0!==this.siteId.length&&this.parentNode?(this.scriptTag=document.createElement("script"),this.scriptTag.src="https://www.google.com/insights/consumersurveys/async_survey?force_http=1&site="+
this.siteId,this.appendChild(this.scriptTag),this.userSurveyed=!0,c.setItem("__GCS_site_"+this.siteId,Date.now())):console.warn("<google-consumer-survey>: missing siteId!")}});return{}});
define("monkeyLoader",["qowtRoot/features/utils"],function(c){function l(a,c,h){c([a],function(a){k++;h(a)},function(c){0===k?(console.warn("Failed to load "+a+". The monkey server is likely not running."),h()):(console.error("Monkey _is_ running, but we failed to laod module "+a+"."),console.error(c),console.error(c.stack))})}var k=0;return{load:function(a,g,h){g=g||"";c.isDebug()?(console.log("Loading "+a),l.apply(this,arguments)):h()}}});
define("controllers/application","qowtRoot/errors/errorCatcher qowtRoot/errors/qowtException qowtRoot/errors/unique/fileDoesNotExistError qowtRoot/utils/typeUtils qowtRoot/utils/tryUtils qowtRoot/utils/promiseUtils qowtRoot/messageBus/messageBus qowtRoot/features/utils controllers/appState controllers/fileManager errorObservers/gaExceptionLogger errorObservers/hideUI errorObservers/showQOWT utils/analytics/googleAnalytics utils/converter utils/metrics utils/sendUserFeedback utils/backgroundPageUtils utils/gdrive/driveUtils utils/urlUtils qowtRoot/third_party/when/when utils/gdrive/drive qowtRoot/utils/uuid qowtRoot/pubsub/pubsub qowtRoot/utils/localStorageManager common/elements/google-consumer-survey/google-consumer-survey".split(" "),function(c,
l,k,a,g,h,q,v,e,n,y,x,O,F,z,A,D,u,G,R,ba,ca,E,ta,r){function U(c){c=c.data;if(!a.isString(c)&&!a.isObject(c))throw Error("Invlid content from Core");if(a.isString(c))c=g.withWarning("JSON Syntax error in content from Core").rethrow(JSON.parse.bind(JSON,c)),"NaClCrash"===c.name&&(Ob=!0);else if(Ob){var e=c;console.error("reporting minidump to local server");var h=new FormData;h.append("prod","Quickoffice");h.append("ver",chrome.runtime.getManifest().version);h.append("upload_file_minidump",new Blob([e]));
e=new XMLHttpRequest;e.open("POST",chrome.runtime.getManifest().crash_dump_server,!0);e.send(h);ta.publish("app:naclCrash")}Ob||q.pushMessage({id:"dcp",content:c})}function X(a){if(a.keyCode&&(a.metaKey||a.ctrlKey))switch(a.keyCode){case 80:a.preventDefault();q.pushMessage({id:"print"});break;case 83:a.preventDefault()}}function I(){Bc();kb({category:"network-status",action:window.navigator.onLine?"online":"offline"});return ba.promise(function(a){chrome.identity.getProfileUserInfo(function(c){c=
""!==c.email;var e=window.navigator.onLine;kb({category:"account-status",action:c?"signed-in":"signed-out"});kb({category:"account-network",action:c?e?"signedin-online":"signedin-offline":e?"signedout-online":"signedout-offline"});a()}.bind(this))}.bind(this)).timeout(3E3,"Timed-out waiting for identity info").catch(function(){})}function kb(a){if(window.navigator.onLine)F.sendEvent(a);else{var c=Cc();c.push(a);r.setItem("pending_ga",JSON.stringify(c))}}function Bc(){if(window.navigator.onLine){var a=
Cc();if(0<a.length)for(var c=0;c<a.length;c++)a[c]&&"object"===typeof a[c]&&F.sendEvent({category:a[c].category,action:a[c].action,label:a[c].label});r.setItem("pending_ga",JSON.stringify([]))}}function Cc(){var a;try{a=r.getItem("pending_ga"),a=JSON.parse(a),Array.isArray(a)||(a=[])}catch(c){a=[],console.warn("Failed to initialize file store so resetting it to be empty: "+c)}return a}function Dc(){return new Promise(function(a,c){chrome&&chrome.tabs&&chrome.tabs.get?chrome.tabs.get(wa,function(e){e?
(xa=e.incognito,a()):c(Error("Missing tab for tabId "+wa))}):c(Error("Missing chrome.tabs API"))})}function Kb(){var a=ba.defer();Ba().then(function(c){wa=c.tabId;a.resolve()},function(){chrome&&chrome.tabs&&chrome.tabs.getCurrent?chrome.tabs.getCurrent(function(c){c&&c.id?(wa=c.id,a.resolve()):a.reject(Error("Missing tab id"))}):a.reject(Error("Missing chrome.tabs API"))});return Promise.race([a.promise,h.delayThenReject(3E4,Error("Requesting current tab id timed out"))])}function cb(){q.listen(p,
wb);q.listen(fc,ga);return Promise.resolve()}function Ba(){null===Qb&&(Qb=new Promise(function(a,c){chrome.mimeHandlerPrivate.getStreamInfo(function(e){chrome.runtime.lastError?c(chrome.runtime.lastError):a(e)})}));return Qb}function Lb(){return Promise.all([Ba(),u.getPage()]).then(function(a){var c=n.getCache(),e=a[0];if(c&&c.originalURL===e.originalUrl)throw chrome.mimeHandlerPrivate.abortStream(),Error("Load from cache");return a[1].registerMimeHandlerStream(a[0])}).catch(function(){var a=R.parseURL(window.location.href);
a.queryObject?(n.cacheFileDetails(a.queryObject),R.stripQueryString()):a.queryObject=n.getCache();if(a.queryObject.state)return dc(a.queryObject.state);if(a.queryObject.uuid)return a.queryObject.uuid;throw new k;})}function dc(a){return u.getPage().then(function(c){var e;try{var g=JSON.parse(a);if(c.handleDriveDoc&&g.ids)e=c.handleDriveDoc(g.ids),ca.setUserId(g.userId);else throw new l("Missing handleDriveDoc api");}catch(h){throw new l({title:"something_not_right",details:"file_not_found_error_msg"});
}return e||ba.reject(Error("Failed to retrieve the UUID for first Drive Doc"))})}function Ga(c){return u.getPage().then(function(e){if(e.addReaperLock){M=c[1];if(!a.isString(M))throw Error("Failed to get a valid UUID");e.addReaperLock(wa);e=e.getFileDetails(M);if(!e)throw new l("Missing FileDetails object");e=Object.create(e);return n.init(e,M)}throw Error("Background page's 'addReaperLock' function is undefined");}).then(gd)}function wb(a){var c=!1;a&&a.data&&"dcpRequest"===a.data.id&&(c=!0);return c}
function ga(a){return!wb(a)}function xb(){var a=r.getItem("onboardingComplete");chrome.i18n.getMessage("@@ui_locale").match(/en[-_]us/i)&&a&&!v.isDebug()&&v.isEnabled("hats")&&window.setTimeout(function(){var a={word:{siteId:"wtkwz5qvgh3olklj43wihw3lhi",rate:3},sheet:{siteId:"renjicjirwkihjol6bv5k5q7hm",rate:8},point:{siteId:"4jgyc2mhqmpdwpatxatmggghiq",rate:4}},c=z.mime2App(n.mimeType());if(a[c]){var e=db();e.siteId=a[c].siteId;e.targetPercentage=a[c].rate;e.bucketing=12;document.body.appendChild(e)}},
3E3)}function db(){var a=document.createElement("google-consumer-survey");a.addEventListener("user-considered-for-sampling",function(){F.sendEvent({category:"user-survey",action:"sampling",label:"user-consired"})});a.addEventListener("user-sampled-for-survey",function(){F.sendEvent({category:"user-survey",action:"sampling",label:"user-sampled"})});return a}function p(a){if(a&&a.data&&a.data.content)if(a=a.data.content,-1!=="writeToExisting writeToNew writeToExistingDriveFile convertToDocs makeACopy download".split(" ").indexOf(a.name))Ec(a);
else{var c=la;switch(a.name){case "oPT":case "oDC":case "owb":a.pa=n.privateFilePath();c(a);break;case "sDC":"OOXML"===z.mime2Format(n.mimeType())?c(a):n.createPrivateFile("docx").done(lb.bind(T,a,c));break;case "saveWkbk":"OOXML"===z.mime2Format(n.mimeType())?yb(a,c):n.createPrivateFile("xlsx").done(yb.bind(T,a,c));break;case "sPT":"OOXML"===z.mime2Format(n.mimeType())?yb(a,c):n.createPrivateFile("pptx").done(yb.bind(T,a,c));break;default:c(a)}}else throw Error("DCP Requests must have content");
}function lb(a,c){a.name="saveAs";a.dst=n.privateFilePath();c(a)}function yb(a,c){a.dst=n.privateFilePath();c(a)}function Ec(a){switch(a.name){case "writeToExisting":n.overwriteUserFile().done(mb.bind(T,a.name,n.userFilePath()),Ha.bind(T,a.name));break;case "writeToNew":n.newUserFile(!1,a.context&&a.context.toLocal).then(mb.bind(T,a.name,n.userFilePath()),Nb.bind(T,a.name)).done(function(){},Ha.bind(T,a.name));break;case "makeACopy":Ha(a.name);n.newUserFile(!0).done(fd.bind(T,n.userFilePath()),Qa);
break;case "writeToExistingDriveFile":Ha(a.name);n.overwriteUserFile(a.newRevision).done(Gc.bind(T,a.token),Hc.bind(T,a.token));break;case "convertToDocs":Ha(a.name);n.convertToDocs().done(Ic,Jc);break;case "download":Pb&&(chrome.downloads.onDeterminingFilename.addListener(function P(a,c){c({filename:n.tryAndGetDownloadFileName(),conflictAction:"uniquify"});chrome.downloads.onDeterminingFilename.removeListener(P);Pb=!0}),Pb=!1,n.downloadToLocalFile());Ha(a.name);break;default:console.log("#!#! Unexpected processAppRequest "+
a.name)}}function ec(a){return ba.promise(function(c){Ra(Mb(a),c)})}function Fc(a){return ba.promise(function(c){var e=Mb(a);chrome&&chrome.tabs&&e&&chrome.tabs.update(wa,{url:e},c)})}function Mb(a){var c=a.result.alternateLink;c.match(/.*\/file\/.*/)?a="chrome-extension://"+chrome.runtime.id+'/views/app.html?state={"ids":["'+a.result.id+'"],"action":"open"}':(a=c,a=(c=a.match(/(.*)\?(.*)/))?c[2]&&0<c[2].length?a+"&nativeconvert=1":a+"nativeconvert=1":a+"?nativeconvert=1");return a}function mb(a,
c,e){n.userFilePath()!==c&&V();"writeToNew"===a&&"drive"===Ca()?Fc(e).then(Ha.bind(T,a)):Ha(a);q.pushMessage({id:"userFileNotification",context:{type:"saveSuccess",format:z.mime2Format(n.mimeType()),userFileType:Ca(),isRenamed:void 0,localFilePath:"local"===Ca()?e.localFilePath:"",driveFileReadOnly:"reader"===n.driveFileRole()}})}function Nb(a){q.pushMessage({id:"dcp",content:{name:a,userCancelled:!0,format:z.mime2Format(n.mimeType()),userFileType:Ca(),driveFileReadOnly:"reader"===n.driveFileRole()}});
q.pushMessage({id:"userFileNotification",context:{type:"saveCancel"}})}function Gc(a){q.pushMessage({id:"driveFileNotification",context:{type:"saveSuccess",saveToken:a}})}function Hc(a,c){q.pushMessage({id:"driveFileNotification",context:{type:"saveFailure",saveToken:a,errorCode:G.getErrorCode(c)}})}function Ic(a){var c=Da;q.pushMessage({id:"driveFileNotification",context:{type:"convertSuccess"}});Da=!1;if(!c)return ec(a)}function Jc(a){var c=Da;Da=!1;c||q.pushMessage({id:"recordEvent",category:"menu",
action:"convertToDocsFailed"});q.pushMessage({id:"driveFileNotification",context:{type:"convertFailure",errorCode:G.getErrorCode(a)}})}function fd(a,c){"drive"===Ca()?ec(c):(document.title=n.displayName(),n.userFilePath()!==a&&V(),q.pushMessage({id:"localFileNotification",context:{type:"copySuccess",displayName:n.displayName(),format:z.mime2Format(n.mimeType()),userFileType:Ca(),driveFileReadOnly:!1}}))}function Qa(a){"drive"===Ca()&&(q.pushMessage({id:"recordEvent",category:"menu",action:"makeCopyFailed"}),
q.pushMessage({id:"driveFileNotification",context:{type:"copyFailure",errorCode:G.getErrorCode(a)}}))}function Ha(a,c){document.title=n.displayName();q.pushMessage({id:"dcp",content:{name:a,displayName:n.displayName(),format:z.mime2Format(n.mimeType()),userFileType:Ca(),driveFileReadOnly:"reader"===n.driveFileRole(),e:c&&c.message||c}})}function la(a){if(ia&&ia.postMessage)a=a instanceof ArrayBuffer?a:g.withWarning("Msg to Core must be JSON").rethrow(JSON.stringify.bind(JSON,a)),ia.postMessage(a);
else throw Error("Error: NaCl module not ready?");}function Ca(){var a;n.userFilePath()?a="local":n.driveDocId()&&(a="drive");return a}function fc(a){if(a&&a.data)switch(a.data.id){case "closeApp":window.close();break;case "reportAnIssue":D.openFeedbackUI(a.data.description);break;case "showHelp":case "signIntoDrive":Ra(a.data.link);break;case "recordCount":A.recordCount(a.data.context);break;case "stateChange":a=a.data.data;e.updateState(a.state,a.context);break;case "recordEvent":F.sendEvent(a.data);
break;case "recordCachableEvent":kb(a.data);break;case "createNewTab":Ra(a.data.link);break;case "conversionCancelled":Da=!0;break;case "reloadTab":if(wa&&chrome&&chrome.tabs){chrome.tabs.reload(wa);break}window.location.reload();break;case "setBlockUnload":chrome.mimeHandlerPrivate&&chrome.mimeHandlerPrivate.setShowBeforeUnloadDialog&&chrome.mimeHandlerPrivate.setShowBeforeUnloadDialog(!!a.data.blockUnload);break;case "fileNotFound":n.updateConfigAndCache(!0);break;case "fileSaveSuccess":n.updateConfigAndCache(),
q.pushMessage({id:"updateFileInfo"})}}function Ra(a,c){chrome&&chrome.tabs&&a&&a.match(/^https?:\/\/|^file:\/\/|^mailto:/i)&&chrome.tabs.create({url:a},c)}function gd(){hd();V();nb();aa();id();Dc().then(function(){T.openFile()}).catch(function(){xa=!1;T.openFile()})}function hd(){return u.getPage().then(function(a){if(a.cacheTabId)a.cacheTabId(M,wa);else throw Error("Background page's 'cacheTabId' function is undefined");})}function V(){return u.getPage().then(function(a){if(a.cachePrivateFilePath)a.cachePrivateFilePath(M,
n.privateFilePath());else throw Error("Background page's 'cachePrivateFilePath' function is undefined");})}function nb(){return u.getPage().then(function(a){if(a.cacheDownloadFilePath)a.cacheDownloadFilePath(M,n.downloadFilePath());else throw Error("Background page's 'cacheDownloadFilePath' function is undefined");})}function aa(){return u.getPage().then(function(a){if(a.cacheTimestamp)a.cacheTimestamp(M);else throw Error("Background page's 'cacheTimestamp' function is undefined");})}function id(){return u.getPage().then(function(a){if(a.removeReaperLock)a.removeReaperLock(wa);
else throw Error("Background page's 'removeReaperLock' function is undefined");})}var T={openFile:function(){if(!n.isReady)throw Error("Error: app not ready to open file yet");e.updateState("Opening");document.title=n.displayName();var a=z.mime2Icon(n.mimeType());if(a){var c=document.createElement("link");c.type="image/x-icon";c.rel="shortcut icon";c.href=a;document.getElementsByTagName("head")[0].appendChild(c)}if(ia=document.getElementById("qonacl"))ia.addEventListener("message",U,!1);else throw Error("App can not find core plugin");
ua&&q.pushMessage({id:va,overrides:ua});zb.app=z.mime2App(n.mimeType());a=z.mime2Extension(n.mimeType());a=!("docm"!==a&&"pptm"!==a&&"xlsm"!==a);q.pushMessage({id:"openFile",displayName:n.displayName(),originalURL:n.originalURL(),userFileType:Ca(),entryPoint:n.getEntryPoint(),driveFileReadOnly:"reader"===n.driveFileRole(),format:z.mime2Format(n.mimeType()),isRenamed:n.getCache().isRenamed,environment:zb,isMacroEnabledFile:a,newDocument:n.isNewDocument(),embedded:n.isEmbedded(),isIncognito:xa})}},
Ia,zb,ia,Ob,ua,va="featureOverrides",wa,M,xa=!1,Da=!1,Pb=!0,Qb=null;(function(){chrome.runtime.onMessage.addListener(function(a,c,e){"reaperCheck"===a&&e({uuid:n.getUUID()})})})();(function(){try{ua={};var c=window.sessionStorage.getItem(va),e=r.getItem(va);e||(e='{"edit":true,"pointEdit":true}');a.extend(ua,JSON.parse(c));a.extend(ua,JSON.parse(e));0<Object.keys(ua).length&&v.setOverrides(ua)}catch(g){}})();require(["monkeyLoader!monkeyAppClient"],function(){document.title="";Ia=document.getElementById("sandbox");
window.connectFromAppToQowt=new Date;q.connect(Ia.contentWindow);var a=E.generateUUID();F.setSessionGroup(a);e.init();zb={locale:chrome.i18n.getMessage("@@ui_locale"),defaultLocale:"en"};window.addEventListener("keydown",X);c.addObserver(y);c.addObserver(x);c.addObserver(O);c.init();ba.all([I(),Lb(),Kb(),cb()]).then(Ga).then(xb).done()});return T});require(["third_party/domready/domReady!"],function(){require(["controllers/application"])});define("mainApp",function(){});
